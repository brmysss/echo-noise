var Us=Object.defineProperty;var Vs=(T,n,o)=>n in T?Us(T,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):T[n]=o;var Kt=(T,n,o)=>Vs(T,typeof n!="symbol"?n+"":n,o);import{s as $s,u as qs,a as Tn,r as ie,b as Ws,t as sr,g as Ys,o as Ks,c as di,w as ot,d as ta,e as Gs,f as Zs,h as Ee,i as ze,j as en,k as Xs,l as Js,m as Ia,n as Ne,p as In,q as nt,v as Fi,x as kn,y as Qs,z as an,A as Ct,B as Bt,C as bi,D as ve,E as fe,F as zt,G as qe,H as $,I as de,J as Na,_ as _t,K as et,L as Mn,M as el,N as lr,O as tl,P as Gt,Q as na,R as Le,S as nl,T as Ui,U as Ze,V as St,W as Lt,X as qt,Y as on,Z as Vi,$ as yi,a0 as zn,a1 as ja,a2 as fr,a3 as il,a4 as fi,a5 as rl,a6 as $i,a7 as al,a8 as ol,a9 as ia,aa as ra,ab as sl}from"./CYpytnI3.js";import{_ as hr,a as Ba,b as ll,c as cl,d as ul,N as dl}from"./BigsygO6.js";const fl=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],hl=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],pl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Zt=[];let ml=class{constructor(){Kt(this,"_data",new Jn);Kt(this,"_hash",new Jn([...fl]));Kt(this,"_nDataBytes",0);Kt(this,"_minBufferSize",0)}finalize(n){n&&this._append(n);const o=this._nDataBytes*8,s=this._data.sigBytes*8;return this._data.words[s>>>5]|=128<<24-s%32,this._data.words[(s+64>>>9<<4)+14]=Math.floor(o/4294967296),this._data.words[(s+64>>>9<<4)+15]=o,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(n,o){const s=this._hash.words;let c=s[0],f=s[1],m=s[2],h=s[3],y=s[4],C=s[5],S=s[6],u=s[7];for(let d=0;d<64;d++){if(d<16)Zt[d]=n[o+d]|0;else{const x=Zt[d-15],A=(x<<25|x>>>7)^(x<<14|x>>>18)^x>>>3,g=Zt[d-2],O=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;Zt[d]=A+Zt[d-7]+O+Zt[d-16]}const p=y&C^~y&S,v=c&f^c&m^f&m,E=(c<<30|c>>>2)^(c<<19|c>>>13)^(c<<10|c>>>22),b=(y<<26|y>>>6)^(y<<21|y>>>11)^(y<<7|y>>>25),k=u+b+p+hl[d]+Zt[d],M=E+v;u=S,S=C,C=y,y=h+k|0,h=m,m=f,f=c,c=k+M|0}s[0]=s[0]+c|0,s[1]=s[1]+f|0,s[2]=s[2]+m|0,s[3]=s[3]+h|0,s[4]=s[4]+y|0,s[5]=s[5]+C|0,s[6]=s[6]+S|0,s[7]=s[7]+u|0}_append(n){typeof n=="string"&&(n=Jn.fromUtf8(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes}_process(n){let o,s=this._data.sigBytes/64;n?s=Math.ceil(s):s=Math.max((s|0)-this._minBufferSize,0);const c=s*16,f=Math.min(c*4,this._data.sigBytes);if(c){for(let m=0;m<c;m+=16)this._doProcessBlock(this._data.words,m);o=this._data.words.splice(0,c),this._data.sigBytes-=f}return new Jn(o,f)}},Jn=class za{constructor(n,o){Kt(this,"words");Kt(this,"sigBytes");n=this.words=n||[],this.sigBytes=o===void 0?n.length*4:o}static fromUtf8(n){const o=unescape(encodeURIComponent(n)),s=o.length,c=[];for(let f=0;f<s;f++)c[f>>>2]|=(o.charCodeAt(f)&255)<<24-f%4*8;return new za(c,s)}toBase64(){const n=[];for(let o=0;o<this.sigBytes;o+=3){const s=this.words[o>>>2]>>>24-o%4*8&255,c=this.words[o+1>>>2]>>>24-(o+1)%4*8&255,f=this.words[o+2>>>2]>>>24-(o+2)%4*8&255,m=s<<16|c<<8|f;for(let h=0;h<4&&o*8+h*6<this.sigBytes*8;h++)n.push(pl.charAt(m>>>6*(3-h)&63))}return n.join("")}concat(n){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let o=0;o<n.sigBytes;o++){const s=n.words[o>>>2]>>>24-o%4*8&255;this.words[this.sigBytes+o>>>2]|=s<<24-(this.sigBytes+o)%4*8}else for(let o=0;o<n.sigBytes;o+=4)this.words[this.sigBytes+o>>>2]=n.words[o>>>2];this.sigBytes+=n.sigBytes}};function gl(T){return new ml().finalize(T).toBase64()}function vl(T){return gl($s(T))}const bl=T=>T==="defer"||T===!1;function yl(...T){var E;const n=typeof T[T.length-1]=="string"?T.pop():void 0;typeof T[0]!="string"&&T.unshift(n);let[o,s,c={}]=T;if(typeof o!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const f=qs(),m=s,h=()=>Tn.value,y=()=>f.isHydrating?f.payload.data[o]:f.static.data[o];c.server??(c.server=!0),c.default??(c.default=h),c.getCachedData??(c.getCachedData=y),c.lazy??(c.lazy=!1),c.immediate??(c.immediate=!0),c.deep??(c.deep=Tn.deep),c.dedupe??(c.dedupe="cancel");const C=c.getCachedData(o,f),S=C!=null;if(!f._asyncData[o]||!c.immediate){(E=f.payload._errors)[o]??(E[o]=Tn.errorValue);const b=c.deep?ie:Ws;f._asyncData[o]={data:b(S?C:c.default()),pending:ie(!S),error:sr(f.payload._errors,o),status:ie("idle"),_default:c.default}}const u={...f._asyncData[o]};delete u._default,u.refresh=u.execute=(b={})=>{if(f._asyncDataPromises[o]){if(bl(b.dedupe??c.dedupe))return f._asyncDataPromises[o];f._asyncDataPromises[o].cancelled=!0}if(b._initial||f.isHydrating&&b._initial!==!1){const M=b._initial?C:c.getCachedData(o,f);if(M!=null)return Promise.resolve(M)}u.pending.value=!0,u.status.value="pending";const k=new Promise((M,x)=>{try{M(m(f))}catch(A){x(A)}}).then(async M=>{if(k.cancelled)return f._asyncDataPromises[o];let x=M;c.transform&&(x=await c.transform(M)),c.pick&&(x=El(x,c.pick)),f.payload.data[o]=x,u.data.value=x,u.error.value=Tn.errorValue,u.status.value="success"}).catch(M=>{if(k.cancelled)return f._asyncDataPromises[o];u.error.value=Zs(M),u.data.value=Ee(c.default()),u.status.value="error"}).finally(()=>{k.cancelled||(u.pending.value=!1,delete f._asyncDataPromises[o])});return f._asyncDataPromises[o]=k,f._asyncDataPromises[o]},u.clear=()=>wl(f,o);const d=()=>u.refresh({_initial:!0}),p=c.server!==!1&&f.payload.serverRendered;{const b=Ys();if(b&&p&&c.immediate&&!b.sp&&(b.sp=[]),b&&!b._nuxtOnBeforeMountCbs){b._nuxtOnBeforeMountCbs=[];const x=b._nuxtOnBeforeMountCbs;Ks(()=>{x.forEach(A=>{A()}),x.splice(0,x.length)}),di(()=>x.splice(0,x.length))}p&&f.isHydrating&&(u.error.value||C!=null)?(u.pending.value=!1,u.status.value=u.error.value?"error":"success"):b&&(f.payload.serverRendered&&f.isHydrating||c.lazy)&&c.immediate?b._nuxtOnBeforeMountCbs.push(d):c.immediate&&d();const k=Gs();if(c.watch){const x=ot(c.watch,()=>u.refresh());k&&ta(x)}const M=f.hook("app:data:refresh",async x=>{(!x||x.includes(o))&&await u.refresh()});k&&ta(M)}const v=Promise.resolve(f._asyncDataPromises[o]).then(()=>u);return Object.assign(v,u),v}function wl(T,n){n in T.payload.data&&(T.payload.data[n]=void 0),n in T.payload._errors&&(T.payload._errors[n]=Tn.errorValue),T._asyncData[n]&&(T._asyncData[n].data.value=void 0,T._asyncData[n].error.value=Tn.errorValue,T._asyncData[n].pending.value=!1,T._asyncData[n].status.value="idle"),n in T._asyncDataPromises&&(T._asyncDataPromises[n]&&(T._asyncDataPromises[n].cancelled=!0),T._asyncDataPromises[n]=void 0)}function El(T,n){const o={};for(const s of n)o[s]=T[s];return o}function Sl(T,n,o){const[s={},c]=typeof n=="string"?[{},n]:[n,o],f=ze(()=>en(T)),m=s.key||vl([c,typeof f.value=="string"?f.value:"",...Cl(s)]);if(!m||typeof m!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+m);const h=m===c?"$f"+m:m;if(!s.baseURL&&typeof f.value=="string"&&f.value[0]==="/"&&f.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:y,lazy:C,default:S,transform:u,pick:d,watch:p,immediate:v,getCachedData:E,deep:b,dedupe:k,...M}=s,x=Xs({...Js,...M,cache:typeof s.cache=="boolean"?void 0:s.cache}),A={server:y,lazy:C,default:S,transform:u,pick:d,immediate:v,getCachedData:E,deep:b,dedupe:k,watch:p===!1?[]:[x,f,...p||[]]};let g;return yl(h,()=>{var B;(B=g==null?void 0:g.abort)==null||B.call(g,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),g=typeof AbortController<"u"?new AbortController:{};const I=en(s.timeout);let R;return I&&(R=setTimeout(()=>g.abort(new DOMException("Request aborted due to timeout.","AbortError")),I),g.signal.onabort=()=>clearTimeout(R)),(s.$fetch||globalThis.$fetch)(f.value,{signal:g.signal,...x}).finally(()=>{clearTimeout(R)})},A)}function Cl(T){var o;const n=[((o=en(T.method))==null?void 0:o.toUpperCase())||"GET",en(T.baseURL)];for(const s of[T.params||T.query]){const c=en(s);if(!c)continue;const f={};for(const[m,h]of Object.entries(c))f[en(m)]=en(h);n.push(f)}return n}const Tl={wrapper:"w-full flex flex-col gap-2",indicator:{container:{base:"flex flex-row justify-end",width:"min-w-fit",transition:"transition-all"},align:"text-end",width:"w-fit",color:"text-gray-400 dark:text-gray-500",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},progress:{base:"block appearance-none border-none overflow-hidden",width:"w-full [&::-webkit-progress-bar]:w-full",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"},rounded:"rounded-full [&::-webkit-progress-bar]:rounded-full",track:"[&::-webkit-progress-bar]:bg-gray-200 [&::-webkit-progress-bar]:dark:bg-gray-700 [@supports(selector(&::-moz-progress-bar))]:bg-gray-200 [@supports(selector(&::-moz-progress-bar))]:dark:bg-gray-700",bar:"[&::-webkit-progress-value]:rounded-full [&::-webkit-progress-value]:transition-all [&::-webkit-progress-value]:ease-in-out [&::-moz-progress-bar]:rounded-full",color:"text-{color}-500 dark:text-{color}-400",background:"[&::-webkit-progress-value]:bg-current [&::-moz-progress-bar]:bg-current",indeterminate:{base:"indeterminate:relative",rounded:"indeterminate:after:rounded-full [&:indeterminate::-webkit-progress-value]:rounded-full [&:indeterminate::-moz-progress-bar]:rounded-full"}},steps:{base:"grid grid-cols-1",color:"text-{color}-500 dark:text-{color}-400",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},step:{base:"transition-all opacity-0 truncate row-start-1 col-start-1",align:"text-end",active:"opacity-100",first:"text-gray-500 dark:text-gray-400"},animation:{carousel:"bar-animation-carousel","carousel-inverse":"bar-animation-carousel-inverse",swing:"bar-animation-swing",elastic:"bar-animation-elastic"},default:{color:"primary",size:"md",animation:"carousel"}},Fa=Ia("messageStore",()=>{const T=ie([]),n=ie(0),o=ie(!0),s=ie(1),c=ie(15),f=Ne(),m=ie(!1),h=ie(null),y=ie([]),C=ie([]),S=ie(null);return{messages:T,total:n,hasMore:o,page:s,pageSize:c,loading:m,siteConfig:h,reset:()=>{T.value=[],n.value=0,o.value=!0,s.value=1,m.value=!1},getMessages:async R=>{if(!m.value){m.value=!0;try{const P=await kn("messages/page",R,{credentials:"include"});if(!P)return f.add({title:"获取笔记列表失败",description:"请稍后重试",icon:"i-fluent-error-circle-16-filled",color:"red",timeout:2e3}),null;const B=P.data.items.filter(Y=>!T.value.some(G=>G.id===Y.id));return R.page===1?T.value=P.data.items:T.value=[...T.value,...B],n.value=P.data.total,s.value=R.page,c.value=R.pageSize,o.value=T.value.length<n.value,P.data}catch(P){console.error("获取笔记列表失败:",P),f.add({title:"获取笔记列表失败",description:"请稍后重试",icon:"i-fluent-error-circle-16-filled",color:"red",timeout:2e3})}finally{m.value=!1}}},deleteMessage:async R=>{try{const P=await Qs(`messages/${R}`,{credentials:"include"});return!P||P.code!==1?(f.add({title:"删除笔记失败",description:P==null?void 0:P.msg,icon:"i-fluent-error-circle-16-filled",color:"red",timeout:2e3}),null):(T.value=T.value.filter(B=>B.id!==R),n.value-=1,P)}catch(P){throw console.error("删除笔记失败:",P),P}},updateMessage:async(R,P)=>{try{const B=await Fi(`messages/${R}`,{content:P},{credentials:"include"});if(!B||B.code!==1)return f.add({title:"更新笔记失败",description:B==null?void 0:B.msg,icon:"i-fluent-error-circle-16-filled",color:"red",timeout:2e3}),null;const Y=T.value.findIndex(G=>G.id===R);return Y!==-1&&(T.value[Y]=B.data),B}catch(B){throw console.error("更新笔记失败:",B),B}},getSiteConfig:async()=>{try{const R=await In("site/config",{credentials:"include"});return!R||R.code!==1?(f.add({title:"获取网站配置失败",description:(R==null?void 0:R.msg)||"请稍后重试",icon:"i-fluent-error-circle-16-filled",color:"red",timeout:2e3}),null):(h.value=R.data,nt(),R.data)}catch(R){throw console.error("获取网站配置失败:",R),R}},updateSiteConfig:async(R,P)=>{try{const B=await Fi("site/config",{[R]:P},{credentials:"include"});return!B||B.code!==1?(f.add({title:"更新配置失败",description:B==null?void 0:B.msg,icon:"i-fluent-error-circle-16-filled",color:"red",timeout:2e3}),null):(h.value={...h.value,[R]:P},B.data)}catch(B){throw console.error("更新配置失败:",B),B}},tags:y,images:C,getAllTags:async()=>{try{const R=await In("messages/tags",{credentials:"include"});return!R||R.code!==1?(f.add({title:"获取标签列表失败",description:(R==null?void 0:R.msg)||"请稍后重试",color:"red",timeout:2e3}),null):(y.value=R.data,R.data)}catch(R){throw console.error("获取标签列表失败:",R),R}},getMessagesByTag:async R=>{try{const P=await In(`messages/tags/${encodeURIComponent(R)}`,{credentials:"include"});return!P||P.code!==1?(f.add({title:"获取标签消息失败",description:(P==null?void 0:P.msg)||"请稍后重试",color:"red",timeout:2e3}),null):P.data}catch(P){throw console.error("获取标签消息失败:",P),P}},getAllImages:async()=>{try{const R=await In("messages/images",{credentials:"include"});return!R||R.code!==1?(f.add({title:"获取图片列表失败",description:(R==null?void 0:R.msg)||"请稍后重试",color:"red",timeout:2e3}),null):(C.value=R.data,R.data)}catch(R){throw console.error("获取图片列表失败:",R),R}},notifyConfig:S,getNotifyConfig:async()=>{try{const R=await In("notify/config",{credentials:"include"});return!R||R.code!==1?(f.add({title:"获取推送配置失败",description:(R==null?void 0:R.msg)||"请稍后重试",color:"red",timeout:2e3}),null):(S.value=R.data,R.data)}catch(R){throw console.error("获取推送配置失败:",R),R}},updateNotifyConfig:async R=>{try{const P=await Fi("notify/config",R,{credentials:"include"});return!P||P.code!==1?(f.add({title:"更新推送配置失败",description:(P==null?void 0:P.msg)||"请稍后重试",color:"red",timeout:2e3}),null):(S.value=P.data,P.data)}catch(P){throw console.error("更新推送配置失败:",P),P}},testNotify:async R=>{try{const P=await kn(`notify/test?type=${R}`,{},{credentials:"include"});if(!P||P.code!==1)throw new Error((P==null?void 0:P.msg)||"测试失败");return P.data}catch(P){throw console.error("推送测试失败:",P),P}},createMessage:async R=>{try{const P=await kn("messages",R,{credentials:"include"});if(!P||P.code!==1)throw new Error((P==null?void 0:P.msg)||"创建消息失败");if(R.notify)try{const B=an().public.baseApi,Y={content:R.content,images:R.image_url?[`${B}${R.image_url}`].filter(Boolean):[],format:"markdown"},G=await kn("notify/send",Y,{credentials:"include"});(!G||G.code!==1)&&console.warn("推送失败:",G==null?void 0:G.msg)}catch(B){console.error("消息推送失败:",B)}return f.add({title:"成功",description:"发布成功",color:"green",timeout:2e3}),P.data}catch(P){throw console.error("创建消息失败:",P),P}}}}),Ua=()=>{const T=Fa(),n=Ne();return{save:async f=>{try{const m=await kn("messages",f);if(!m||m.code!==1)return console.log(m==null?void 0:m.code),n.add({title:"添加失败",description:String(m==null?void 0:m.msg),icon:"i-fluent-error-circle-16-filled",color:"red",timeout:2e3}),null;const h=m.data;return T.messages.unshift(h),n.add({title:"保存成功",description:"消息已保存",icon:"i-fluent-checkmark-starburst-16-filled",color:"green",timeout:1e3}),m.data}catch(m){console.error(m)}},uploadImage:async f=>{try{const m=new FormData;m.append("image",f);const h=await kn("images/upload",m);return!h||h.code!==1?(console.log(h==null?void 0:h.code),n.add({title:"上传失败",description:String(h==null?void 0:h.msg),icon:"i-fluent-error-circle-16-filled",color:"red",timeout:2e3}),null):h.data}catch(m){return console.error("上传图片错误:",m),null}},deleteMessage:async f=>{try{const m=await T.deleteMessage(f);if(m&&m.code===1)return n.add({title:"删除成功",description:"笔记已删除",icon:"i-fluent-checkmark-starburst-16-filled",color:"green",timeout:1e3}),!0}catch(m){console.error(m)}}}},te=(T,n=1e4)=>(T=parseFloat(T+"")||0,Math.round((T+Number.EPSILON)*n)/n),cr=function(T){if(!(T&&T instanceof Element&&T.offsetParent))return!1;const n=T.scrollHeight>T.clientHeight,o=window.getComputedStyle(T).overflowY,s=o.indexOf("hidden")!==-1,c=o.indexOf("visible")!==-1;return n&&!s&&!c},pi=function(T,n=void 0){return!(!T||T===document.body||n&&T===n)&&(cr(T)?T:pi(T.parentElement,n))},At=function(T){var n=new DOMParser().parseFromString(T,"text/html").body;if(n.childElementCount>1){for(var o=document.createElement("div");n.firstChild;)o.appendChild(n.firstChild);return o}return n.firstChild},pr=T=>`${T||""}`.split(" ").filter(n=>!!n),Dt=(T,n,o)=>{T&&pr(n).forEach(s=>{T.classList.toggle(s,o||!1)})};class vn{constructor(n){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=n,this.pageX=n.pageX,this.pageY=n.pageY,this.clientX=n.clientX,this.clientY=n.clientY,this.id=self.Touch&&n instanceof Touch?n.identifier:-1,this.time=Date.now()}}const bn={passive:!1};class kl{constructor(n,{start:o=()=>!0,move:s=()=>{},end:c=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=n,this.startCallback=o,this.moveCallback=s,this.endCallback=c;for(const f of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[f]=this[f].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,bn),this.element.addEventListener("touchstart",this.onTouchStart,bn),this.element.addEventListener("touchmove",this.onMove,bn),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(n){if(!n.buttons||n.button!==0)return;const o=new vn(n);this.currentPointers.some(s=>s.id===o.id)||this.triggerPointerStart(o,n)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(n){for(const o of Array.from(n.changedTouches||[]))this.triggerPointerStart(new vn(o),n);window.addEventListener("blur",this.onWindowBlur)}onMove(n){const o=this.currentPointers.slice(),s="changedTouches"in n?Array.from(n.changedTouches||[]).map(f=>new vn(f)):[new vn(n)],c=[];for(const f of s){const m=this.currentPointers.findIndex(h=>h.id===f.id);m<0||(c.push(f),this.currentPointers[m]=f)}c.length&&this.moveCallback(n,this.currentPointers.slice(),o)}onPointerEnd(n){n.buttons>0&&n.button!==0||(this.triggerPointerEnd(n,new vn(n)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(n){for(const o of Array.from(n.changedTouches||[]))this.triggerPointerEnd(n,new vn(o))}triggerPointerStart(n,o){return!!this.startCallback(o,n,this.currentPointers.slice())&&(this.currentPointers.push(n),this.startPointers.push(n),!0)}triggerPointerEnd(n,o){const s=this.currentPointers.findIndex(c=>c.id===o.id);s<0||(this.currentPointers.splice(s,1),this.startPointers.splice(s,1),this.endCallback(n,o,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const n=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:n.clientX,clientY:n.clientY}),n,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,bn),this.element.removeEventListener("touchstart",this.onTouchStart,bn),this.element.removeEventListener("touchmove",this.onMove,bn),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function aa(T,n){return n?Math.sqrt(Math.pow(n.clientX-T.clientX,2)+Math.pow(n.clientY-T.clientY,2)):0}function oa(T,n){return n?{clientX:(T.clientX+n.clientX)/2,clientY:(T.clientY+n.clientY)/2}:T}const ur=T=>typeof T=="object"&&T!==null&&T.constructor===Object&&Object.prototype.toString.call(T)==="[object Object]",dt=(T,...n)=>{const o=n.length;for(let s=0;s<o;s++){const c=n[s]||{};Object.entries(c).forEach(([f,m])=>{const h=Array.isArray(m)?[]:{};T[f]||Object.assign(T,{[f]:h}),ur(m)?Object.assign(T[f],dt(h,m)):Array.isArray(m)?Object.assign(T,{[f]:[...m]}):Object.assign(T,{[f]:m})})}return T},qi=function(T,n){return T.split(".").reduce((o,s)=>typeof o=="object"?o[s]:void 0,n)};class mi{constructor(n={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(n);for(const o of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))o.startsWith("on")&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}setOptions(n){this.options=n?dt({},this.constructor.defaults,n):{};for(const[o,s]of Object.entries(this.option("on")||{}))this.on(o,s)}option(n,...o){let s=qi(n,this.options);return s&&typeof s=="function"&&(s=s.call(this,this,...o)),s}optionFor(n,o,s,...c){let f=qi(o,n);var m;typeof(m=f)!="string"||isNaN(m)||isNaN(parseFloat(m))||(f=parseFloat(f)),f==="true"&&(f=!0),f==="false"&&(f=!1),f&&typeof f=="function"&&(f=f.call(this,this,n,...c));let h=qi(o,this.options);return h&&typeof h=="function"?f=h.call(this,this,n,...c,f):f===void 0&&(f=h),f===void 0?s:f}cn(n){const o=this.options.classes;return o&&o[n]||""}localize(n,o=[]){n=String(n).replace(/\{\{(\w+).?(\w+)?\}\}/g,(s,c,f)=>{let m="";return f?m=this.option(`${c[0]+c.toLowerCase().substring(1)}.l10n.${f}`):c&&(m=this.option(`l10n.${c}`)),m||(m=s),m});for(let s=0;s<o.length;s++)n=n.split(o[s][0]).join(o[s][1]);return n=n.replace(/\{\{(.*?)\}\}/g,(s,c)=>c)}on(n,o){let s=[];typeof n=="string"?s=n.split(" "):Array.isArray(n)&&(s=n),this.events||(this.events=new Map),s.forEach(c=>{let f=this.events.get(c);f||(this.events.set(c,[]),f=[]),f.includes(o)||f.push(o),this.events.set(c,f)})}off(n,o){let s=[];typeof n=="string"?s=n.split(" "):Array.isArray(n)&&(s=n),s.forEach(c=>{const f=this.events.get(c);if(Array.isArray(f)){const m=f.indexOf(o);m>-1&&f.splice(m,1)}})}emit(n,...o){[...this.events.get(n)||[]].forEach(s=>s(this,...o)),n!=="*"&&this.emit("*",n,...o)}}Object.defineProperty(mi,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(mi,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class mr extends mi{constructor(n={}){super(n),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(n={}){const o=new Map;for(const[s,c]of Object.entries(n)){const f=this.option(s),m=this.plugins[s];m||f===!1?m&&f===!1&&(m.detach(),delete this.plugins[s]):o.set(s,new c(this,f||{}))}for(const[s,c]of o)this.plugins[s]=c,c.attach()}detachPlugins(n){n=n||Object.keys(this.plugins);for(const o of n){const s=this.plugins[o];s&&s.detach(),delete this.plugins[o]}return this.emit("detachPlugins"),this}}var Re;(function(T){T[T.Init=0]="Init",T[T.Error=1]="Error",T[T.Ready=2]="Ready",T[T.Panning=3]="Panning",T[T.Mousemove=4]="Mousemove",T[T.Destroy=5]="Destroy"})(Re||(Re={}));const It=["a","b","c","d","e","f"],Va={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},Ml={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:Va},sa='<circle cx="25" cy="25" r="20"></circle>',gr='<div class="f-spinner"><svg viewBox="0 0 50 50">'+sa+sa+"</svg></div>",ut=T=>T&&T!==null&&T instanceof Element&&"nodeType"in T,Pe=(T,n)=>{T&&pr(n).forEach(o=>{T.classList.remove(o)})},pe=(T,n)=>{T&&pr(n).forEach(o=>{T.classList.add(o)})},Qn={a:1,b:0,c:0,d:1,e:0,f:0},xl=1e5,ei=1e4,mt="mousemove",la="drag",ca="content",gt="auto";let Wi=null,Yi=null;class sn extends mr{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return Yi===null&&(Yi=window.matchMedia("(hover: none)").matches),Yi}get isMobile(){return Wi===null&&(Wi=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),Wi}get panMode(){return this.options.panMode!==mt||this.isTouchDevice?la:mt}get panOnlyZoomed(){const n=this.options.panOnlyZoomed;return n===gt?this.isTouchDevice:n}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:n,b:o}=this.current;return Math.sqrt(n*n+o*o)||1}get targetScale(){const{a:n,b:o}=this.target;return Math.sqrt(n*n+o*o)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:n}=this;return n.fullWidth/n.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:n,contentRect:o}=this,s=Math.max(n.height/o.fitHeight,n.width/o.fitWidth)||1;return Math.min(this.fullScale,s)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const n=this.content;return!!(n&&n instanceof HTMLImageElement)&&!n.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const n of It){const o=n=="e"||n==="f"?1e-4:1e-5;if(Math.abs(this.target[n]-this.current[n])>o)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(n,o={},s={}){var c;if(super(o),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Re.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Qn)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Qn)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!n)throw new Error("Container Element Not Found");this.container=n,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},sn.Plugins),s)),this.emit("attachPlugins"),this.emit("init");const f=this.content;if(f.addEventListener("load",this.onLoad),f.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){n.classList.add(this.cn("isLoading"));const m=At(gr);!n.contains(f)||f.parentElement instanceof HTMLPictureElement?this.spinner=n.appendChild(m):this.spinner=((c=f.parentElement)===null||c===void 0?void 0:c.insertBefore(m,f))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){const{container:n}=this,o=this.cn(ca);let s=this.option(ca)||n.querySelector(`.${o}`);if(s||(s=n.querySelector("img,picture")||n.firstElementChild,s&&pe(s,o)),s instanceof HTMLPictureElement&&(s=s.querySelector("img")),!s)throw new Error("No content found");this.content=s}onLoad(){const{spinner:n,container:o,state:s}=this;n&&(n.remove(),this.spinner=null),this.option("spinner")&&o.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),s===Re.Init?this.enable():this.updateMetrics()}onError(){this.state!==Re.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=Re.Error,this.emit("error"))}getNextScale(n){const{fullScale:o,targetScale:s,coverScale:c,maxScale:f,minScale:m}=this;let h=m;switch(n){case"toggleMax":h=s-m<.5*(f-m)?f:m;break;case"toggleCover":h=s-m<.5*(c-m)?c:m;break;case"toggleZoom":h=s-m<.5*(o-m)?o:m;break;case"iterateZoom":let y=[1,o,f].sort((S,u)=>S-u),C=y.findIndex(S=>S>s+1e-5);h=y[C]||1}return h}attachObserver(){var n;const o=()=>{const{container:s,containerRect:c}=this;return Math.abs(c.width-s.getBoundingClientRect().width)>.1||Math.abs(c.height-s.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(o()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{o()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(n=this.resizeObserver)===null||n===void 0||n.observe(this.container)}detachObserver(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()}attachEvents(){const{container:n}=this;n.addEventListener("click",this.onClick,{passive:!1,capture:!1}),n.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new kl(n,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(mt,this.onMouseMove)}detachEvents(){var n;const{container:o}=this;o.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),o.removeEventListener("wheel",this.onWheel,{passive:!1}),(n=this.pointerTracker)===null||n===void 0||n.stop(),this.pointerTracker=null,document.removeEventListener(mt,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const n=this.friction,o=this.option("maxVelocity");for(const s of It)n?(this.velocity[s]*=1-n,o&&!this.isScaling&&(this.velocity[s]=Math.max(Math.min(this.velocity[s],o),-1*o)),this.current[s]+=this.velocity[s]):this.current[s]=this.target[s];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(const n of It)n==="e"&&this.isBouncingX||n==="f"&&this.isBouncingY||(this.velocity[n]=(1/(1-this.friction)-1)*(this.target[n]-this.current[n]))}checkBounds(n=0,o=0){const{current:s}=this,c=s.e+n,f=s.f+o,m=this.getBounds(),{x:h,y}=m,C=h.min,S=h.max,u=y.min,d=y.max;let p=0,v=0;return C!==1/0&&c<C?p=C-c:S!==1/0&&c>S&&(p=S-c),u!==1/0&&f<u?v=u-f:d!==1/0&&f>d&&(v=d-f),Math.abs(p)<1e-4&&(p=0),Math.abs(v)<1e-4&&(v=0),Object.assign(Object.assign({},m),{xDiff:p,yDiff:v,inBounds:!p&&!v})}clampTargetBounds(){const{target:n}=this,{x:o,y:s}=this.getBounds();o.min!==1/0&&(n.e=Math.max(n.e,o.min)),o.max!==1/0&&(n.e=Math.min(n.e,o.max)),s.min!==1/0&&(n.f=Math.max(n.f,s.min)),s.max!==1/0&&(n.f=Math.min(n.f,s.max))}calculateContentDim(n=this.current){const{content:o,contentRect:s}=this,{fitWidth:c,fitHeight:f,fullWidth:m,fullHeight:h}=s;let y=m,C=h;if(this.option("zoom")||this.angle!==0){const S=!(o instanceof HTMLImageElement)&&(window.getComputedStyle(o).maxWidth==="none"||window.getComputedStyle(o).maxHeight==="none"),u=S?m:c,d=S?h:f,p=this.getMatrix(n),v=new DOMPoint(0,0).matrixTransform(p),E=new DOMPoint(0+u,0).matrixTransform(p),b=new DOMPoint(0+u,0+d).matrixTransform(p),k=new DOMPoint(0,0+d).matrixTransform(p),M=Math.abs(b.x-v.x),x=Math.abs(b.y-v.y),A=Math.abs(k.x-E.x),g=Math.abs(k.y-E.y);y=Math.max(M,A),C=Math.max(x,g)}return{contentWidth:y,contentHeight:C}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===mt||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:n}=this,{x:o,y:s,xDiff:c,yDiff:f}=this.checkBounds(),m=this.option("maxVelocity");let h=this.velocity.e,y=this.velocity.f;c!==0?(this.isBouncingX=!0,c*h<=0?h+=.14*c:(h=.14*c,o.min!==1/0&&(this.target.e=Math.max(n.e,o.min)),o.max!==1/0&&(this.target.e=Math.min(n.e,o.max))),m&&(h=Math.max(Math.min(h,m),-1*m))):this.isBouncingX=!1,f!==0?(this.isBouncingY=!0,f*y<=0?y+=.14*f:(y=.14*f,s.min!==1/0&&(this.target.f=Math.max(n.f,s.min)),s.max!==1/0&&(this.target.f=Math.min(n.f,s.max))),m&&(y=Math.max(Math.min(y,m),-1*m))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=h),this.isBouncingY&&(this.velocity.f=y)}enable(){const{content:n}=this,o=new DOMMatrixReadOnly(window.getComputedStyle(n).transform);for(const s of It)this.current[s]=this.target[s]=o[s];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=Re.Ready,this.emit("ready")}onClick(n){var o;n.type==="click"&&n.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((o=this.pointerTracker)===null||o===void 0||o.clear(),this.trackingPoints=[],this.startDecelAnim());const s=n.target;if(!s||n.defaultPrevented)return;if(s.hasAttribute("disabled"))return n.preventDefault(),void n.stopPropagation();if((()=>{const p=window.getSelection();return p&&p.type==="Range"})()&&!s.closest("button"))return;const c=s.closest("[data-panzoom-action]"),f=s.closest("[data-panzoom-change]"),m=c||f,h=m&&ut(m)?m.dataset:null;if(h){const p=h.panzoomChange,v=h.panzoomAction;if((p||v)&&n.preventDefault(),p){let E={};try{E=JSON.parse(p)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(E)}if(v)return void(this[v]&&this[v]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return n.preventDefault(),void n.stopPropagation();if(s.closest("[data-fancybox]"))return;const y=this.content.getBoundingClientRect(),C=this.dragStart;if(C.time&&!this.canZoomOut()&&(Math.abs(y.x-C.x)>2||Math.abs(y.y-C.y)>2))return;this.dragStart.time=0;const S=p=>{this.option("zoom",n)&&p&&typeof p=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(p)&&typeof this[p]=="function"&&(n.preventDefault(),this[p]({event:n}))},u=this.option("click",n),d=this.option("dblClick",n);d?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",n),!n.defaultPrevented&&u&&S(u)):(this.emit("dblClick",n),n.defaultPrevented||S(d)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",n),!n.defaultPrevented&&u&&S(u))}addTrackingPoint(n){const o=this.trackingPoints.filter(s=>s.time>Date.now()-100);o.push(n),this.trackingPoints=o}onPointerDown(n,o,s){var c;if(this.option("touch",n)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const f=this.content.getBoundingClientRect();if(this.dragStart={x:f.x,y:f.y,top:f.top,left:f.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===mt&&this.targetScale>1)return n.preventDefault(),n.stopPropagation(),!1;const m=n.composedPath()[0];if(!s.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(m.nodeName)||m.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(c=window.getSelection())===null||c===void 0||c.removeAllRanges()}if(n.type==="mousedown")["A","BUTTON"].includes(m.nodeName)||n.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(o),this.emit("touchStart",n)),!0}onPointerMove(n,o,s){if(this.option("touch",n)===!1||!this.isDragging||o.length<2&&this.panOnlyZoomed&&te(this.targetScale)<=te(this.minScale)||(this.emit("touchMove",n),n.defaultPrevented))return;this.addTrackingPoint(o[0]);const{content:c}=this,f=oa(s[0],s[1]),m=oa(o[0],o[1]);let h=0,y=0;if(o.length>1){const x=c.getBoundingClientRect();h=f.clientX-x.left-.5*x.width,y=f.clientY-x.top-.5*x.height}const C=aa(s[0],s[1]),S=aa(o[0],o[1]);let u=C?S/C:1,d=m.clientX-f.clientX,p=m.clientY-f.clientY;this.dragOffset.x+=d,this.dragOffset.y+=p,this.dragOffset.time=Date.now()-this.dragStart.time;let v=te(this.targetScale)===te(this.minScale)&&this.option("lockAxis");if(v&&!this.lockedAxis)if(v==="xy"||v==="y"||n.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void n.preventDefault();const x=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=x>45&&x<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,d=0,p=0}else this.lockedAxis=v;if(pi(n.target,this.content)&&(v="x",this.dragOffset.y=0),v&&v!=="xy"&&this.lockedAxis!==v&&te(this.targetScale)===te(this.minScale))return;n.cancelable&&n.preventDefault(),this.container.classList.add(this.cn("isDragging"));const E=this.checkBounds(d,p);this.option("rubberband")?(this.isInfinite!=="x"&&(E.xDiff>0&&d<0||E.xDiff<0&&d>0)&&(d*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*E.xDiff))),this.isInfinite!=="y"&&(E.yDiff>0&&p<0||E.yDiff<0&&p>0)&&(p*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*E.yDiff)))):(E.xDiff&&(d=0),E.yDiff&&(p=0));const b=this.targetScale,k=this.minScale,M=this.maxScale;b<.5*k&&(u=Math.max(u,k)),b>1.5*M&&(u=Math.min(u,M)),this.lockedAxis==="y"&&te(b)===te(k)&&(d=0),this.lockedAxis==="x"&&te(b)===te(k)&&(p=0),this.applyChange({originX:h,originY:y,panX:d,panY:p,scale:u,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(n,o,s){if(s.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(o),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),pi(n.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",n),this.isDragging=!1,this.lockedAxis=!1,this.state!==Re.Destroy&&(n.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var n;const o=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const x of It)this.velocity[x]=0;this.target.e=this.current.e,this.target.f=this.current.f,Pe(this.container,"is-scaling"),Pe(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:s}=this,c=s[0],f=s[s.length-1];let m=0,h=0,y=0;f&&c&&(m=f.clientX-c.clientX,h=f.clientY-c.clientY,y=f.time-c.time);const C=((n=window.visualViewport)===null||n===void 0?void 0:n.scale)||1;C!==1&&(m*=C,h*=C);let S=0,u=0,d=0,p=0,v=this.option("decelFriction");const E=this.targetScale;if(y>0){d=Math.abs(m)>3?m/(y/30):0,p=Math.abs(h)>3?h/(y/30):0;const x=this.option("maxVelocity");x&&(d=Math.max(Math.min(d,x),-1*x),p=Math.max(Math.min(p,x),-1*x))}d&&(S=d/(1/(1-v)-1)),p&&(u=p/(1/(1-v)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&te(E)===this.minScale)&&(S=d=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&te(E)===this.minScale)&&(u=p=0);const b=this.dragOffset.x,k=this.dragOffset.y,M=this.option("dragMinThreshold")||0;Math.abs(b)<M&&Math.abs(k)<M&&(S=u=0,d=p=0),(this.option("zoom")&&(E<this.minScale-1e-5||E>this.maxScale+1e-5)||o&&!S&&!u)&&(v=.35),this.applyChange({panX:S,panY:u,friction:v}),this.emit("decel",d,p,b,k)}onWheel(n){var o=[-n.deltaX||0,-n.deltaY||0,-n.detail||0].reduce(function(f,m){return Math.abs(m)>Math.abs(f)?m:f});const s=Math.max(-1,Math.min(1,o));if(this.emit("wheel",n,s),this.panMode===mt||n.defaultPrevented)return;const c=this.option("wheel");c==="pan"?(n.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-n.deltaX,panY:2*-n.deltaY,bounce:!1})):c==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(n)}onMouseMove(n){this.panWithMouse(n)}onKeydown(n){n.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:n,target:o,content:s,contentRect:c}=this,f=Object.assign({},Qn);for(const b of It){const k=b=="e"||b==="f"?ei:xl;f[b]=te(n[b],k),Math.abs(o[b]-n[b])<(b=="e"||b==="f"?.51:.001)&&(n[b]=o[b])}let{a:m,b:h,c:y,d:C,e:S,f:u}=f,d=`matrix(${m}, ${h}, ${y}, ${C}, ${S}, ${u})`,p=s.parentElement instanceof HTMLPictureElement?s.parentElement:s;if(this.option("transformParent")&&(p=p.parentElement||p),p.style.transform===d)return;p.style.transform=d;const{contentWidth:v,contentHeight:E}=this.calculateContentDim();c.width=v,c.height=E,this.emit("afterTransform")}updateMetrics(n=!1){var o;if(!this||this.state===Re.Destroy||this.isContentLoading)return;const s=Math.max(1,((o=window.visualViewport)===null||o===void 0?void 0:o.scale)||1),{container:c,content:f}=this,m=f instanceof HTMLImageElement,h=c.getBoundingClientRect(),y=getComputedStyle(this.container);let C=h.width*s,S=h.height*s;const u=parseFloat(y.paddingTop)+parseFloat(y.paddingBottom),d=C-(parseFloat(y.paddingLeft)+parseFloat(y.paddingRight)),p=S-u;this.containerRect={width:C,height:S,innerWidth:d,innerHeight:p};const v=parseFloat(f.dataset.width||"")||(re=>{let he=0;return he=re instanceof HTMLImageElement?re.naturalWidth:re instanceof SVGElement?re.width.baseVal.value:Math.max(re.offsetWidth,re.scrollWidth),he||0})(f),E=parseFloat(f.dataset.height||"")||(re=>{let he=0;return he=re instanceof HTMLImageElement?re.naturalHeight:re instanceof SVGElement?re.height.baseVal.value:Math.max(re.offsetHeight,re.scrollHeight),he||0})(f);let b=this.option("width",v)||gt,k=this.option("height",E)||gt;const M=b===gt,x=k===gt;typeof b!="number"&&(b=v),typeof k!="number"&&(k=E),M&&(b=v*(k/E)),x&&(k=E/(v/b));let A=f.parentElement instanceof HTMLPictureElement?f.parentElement:f;this.option("transformParent")&&(A=A.parentElement||A);const g=A.getAttribute("style")||"";A.style.setProperty("transform","none","important"),m&&(A.style.width="",A.style.height=""),A.offsetHeight;const O=f.getBoundingClientRect();let I=O.width*s,R=O.height*s,P=I,B=R;I=Math.min(I,b),R=Math.min(R,k),m?{width:I,height:R}=((re,he,me,Me)=>{const Se=me/re,ke=Me/he,De=Math.min(Se,ke);return{width:re*=De,height:he*=De}})(b,k,I,R):(I=Math.min(I,b),R=Math.min(R,k));let Y=.5*(B-R),G=.5*(P-I);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:O.top-h.top+Y,bottom:h.bottom-O.bottom+Y,left:O.left-h.left+G,right:h.right-O.right+G,fitWidth:I,fitHeight:R,width:I,height:R,fullWidth:b,fullHeight:k}),A.style.cssText=g,m&&(A.style.width=`${I}px`,A.style.height=`${R}px`),this.setTransform(),n!==!0&&this.emit("refresh"),this.ignoreBounds||(te(this.targetScale)<te(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===Re.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:n,contentHeight:o}=this.calculateContentDim(this.target),{targetScale:s,lockedAxis:c}=this,{fitWidth:f,fitHeight:m}=this.contentRect;let h=0,y=0,C=0,S=0;const u=this.option("infinite");if(u===!0||c&&u===c)h=-1/0,C=1/0,y=-1/0,S=1/0;else{let{containerRect:d,contentRect:p}=this,v=te(f*s,ei),E=te(m*s,ei),{innerWidth:b,innerHeight:k}=d;if(d.width===v&&(b=d.width),d.width===E&&(k=d.height),n>b){C=.5*(n-b),h=-1*C;let M=.5*(p.right-p.left);h+=M,C+=M}if(f>b&&n<b&&(h-=.5*(f-b),C-=.5*(f-b)),o>k){S=.5*(o-k),y=-1*S;let M=.5*(p.bottom-p.top);y+=M,S+=M}m>k&&o<k&&(h-=.5*(m-k),C-=.5*(m-k))}return{x:{min:h,max:C},y:{min:y,max:S}}}getBounds(){const n=this.option("bounds");return n!==gt?n:this.calculateBounds()}updateControls(){const n=this,o=n.container,{panMode:s,contentRect:c,targetScale:f,minScale:m}=n;let h=m,y=n.option("click")||!1;y&&(h=n.getNextScale(y));let C=n.canZoomIn(),S=n.canZoomOut(),u=s===la&&!!this.option("touch"),d=S&&u;if(u&&(te(f)<te(m)&&!this.panOnlyZoomed&&(d=!0),(te(c.width,1)>te(c.fitWidth,1)||te(c.height,1)>te(c.fitHeight,1))&&(d=!0)),te(c.width*f,1)<te(c.fitWidth,1)&&(d=!1),s===mt&&(d=!1),Dt(o,this.cn("isDraggable"),d),!this.option("zoom"))return;let p=C&&te(h)>te(f),v=!p&&!d&&S&&te(h)<te(f);Dt(o,this.cn("canZoomIn"),p),Dt(o,this.cn("canZoomOut"),v);for(const E of o.querySelectorAll("[data-panzoom-action]")){let b=!1,k=!1;switch(E.dataset.panzoomAction){case"zoomIn":C?b=!0:k=!0;break;case"zoomOut":S?b=!0:k=!0;break;case"toggleZoom":case"iterateZoom":C||S?b=!0:k=!0;const M=E.querySelector("g");M&&(M.style.display=C?"":"none")}b?(E.removeAttribute("disabled"),E.removeAttribute("tabindex")):k&&(E.setAttribute("disabled",""),E.setAttribute("tabindex","-1"))}}panTo({x:n=this.target.e,y:o=this.target.f,scale:s=this.targetScale,friction:c=this.option("friction"),angle:f=0,originX:m=0,originY:h=0,flipX:y=!1,flipY:C=!1,ignoreBounds:S=!1}){this.state!==Re.Destroy&&this.applyChange({panX:n-this.target.e,panY:o-this.target.f,scale:s/this.targetScale,angle:f,originX:m,originY:h,friction:c,flipX:y,flipY:C,ignoreBounds:S})}applyChange({panX:n=0,panY:o=0,scale:s=1,angle:c=0,originX:f=-this.current.e,originY:m=-this.current.f,friction:h=this.option("friction"),flipX:y=!1,flipY:C=!1,ignoreBounds:S=!1,bounce:u=this.option("bounce")}){const d=this.state;if(d===Re.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=h||0,this.ignoreBounds=S;const{current:p}=this,v=p.e,E=p.f,b=this.getMatrix(this.target);let k=new DOMMatrix().translate(v,E).translate(f,m).translate(n,o);if(this.option("zoom")){if(!S){const M=this.targetScale,x=this.minScale,A=this.maxScale;M*s<x&&(s=x/M),M*s>A&&(s=A/M)}k=k.scale(s)}k=k.translate(-f,-m).translate(-v,-E).multiply(b),c&&(k=k.rotate(c)),y&&(k=k.scale(-1,1)),C&&(k=k.scale(1,-1));for(const M of It)M!=="e"&&M!=="f"&&(k[M]>this.minScale+1e-5||k[M]<this.minScale-1e-5)?this.target[M]=k[M]:this.target[M]=te(k[M],ei);(this.targetScale<this.scale||Math.abs(s-1)>.1||this.panMode===mt||u===!1)&&!S&&this.clampTargetBounds(),d===Re.Init?this.animate():this.isResting||(this.state=Re.Panning,this.requestTick())}stop(n=!1){if(this.state===Re.Init||this.state===Re.Destroy)return;const o=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const s of It)this.velocity[s]=0,n==="current"?this.current[s]=this.target[s]:n==="target"&&(this.target[s]=this.current[s]);this.setTransform(),Pe(this.container,"is-scaling"),Pe(this.container,"is-animating"),this.isTicking=!1,this.state=Re.Ready,o&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),pe(this.container,"is-animating"),this.isScaling&&pe(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(n,o=this.option("mouseMoveFriction")){if(this.pmme=n,this.panMode!==mt||!n||te(this.targetScale)<=te(this.minScale))return;this.emit("mouseMove",n);const{container:s,containerRect:c,contentRect:f}=this,m=c.width,h=c.height,y=s.getBoundingClientRect(),C=(n.clientX||0)-y.left,S=(n.clientY||0)-y.top;let{contentWidth:u,contentHeight:d}=this.calculateContentDim(this.target);const p=this.option("mouseMoveFactor");p>1&&(u!==m&&(u*=p),d!==h&&(d*=p));let v=.5*(u-m)-C/m*100/100*(u-m);v+=.5*(f.right-f.left);let E=.5*(d-h)-S/h*100/100*(d-h);E+=.5*(f.bottom-f.top),this.applyChange({panX:v-this.target.e,panY:E-this.target.f,friction:o})}zoomWithWheel(n){if(this.state===Re.Destroy||this.state===Re.Init)return;const o=Date.now();if(o-this.pwt<45)return void n.preventDefault();this.pwt=o;var s=[-n.deltaX||0,-n.deltaY||0,-n.detail||0].reduce(function(C,S){return Math.abs(S)>Math.abs(C)?S:C});const c=Math.max(-1,Math.min(1,s)),{targetScale:f,maxScale:m,minScale:h}=this;let y=f*(100+45*c)/100;te(y)<te(h)&&te(f)<=te(h)?(this.cwd+=Math.abs(c),y=h):te(y)>te(m)&&te(f)>=te(m)?(this.cwd+=Math.abs(c),y=m):(this.cwd=0,y=Math.max(Math.min(y,m),h)),this.cwd>this.option("wheelLimit")||(n.preventDefault(),te(y)!==te(f)&&this.zoomTo(y,{event:n}))}canZoomIn(){return this.option("zoom")&&(te(this.contentRect.width,1)<te(this.contentRect.fitWidth,1)||te(this.targetScale)<te(this.maxScale))}canZoomOut(){return this.option("zoom")&&te(this.targetScale)>te(this.minScale)}zoomIn(n=1.25,o){this.zoomTo(this.targetScale*n,o)}zoomOut(n=.8,o){this.zoomTo(this.targetScale*n,o)}zoomToFit(n){this.zoomTo("fit",n)}zoomToCover(n){this.zoomTo("cover",n)}zoomToFull(n){this.zoomTo("full",n)}zoomToMax(n){this.zoomTo("max",n)}toggleZoom(n){this.zoomTo(this.getNextScale("toggleZoom"),n)}toggleMax(n){this.zoomTo(this.getNextScale("toggleMax"),n)}toggleCover(n){this.zoomTo(this.getNextScale("toggleCover"),n)}iterateZoom(n){this.zoomTo("next",n)}zoomTo(n=1,{friction:o=gt,originX:s=gt,originY:c=gt,event:f}={}){if(this.isContentLoading||this.state===Re.Destroy)return;const{targetScale:m,fullScale:h,maxScale:y,coverScale:C}=this;if(this.stop(),this.panMode===mt&&(f=this.pmme||f),f||s===gt||c===gt){const u=this.content.getBoundingClientRect(),d=this.container.getBoundingClientRect(),p=f?f.clientX:d.left+.5*d.width,v=f?f.clientY:d.top+.5*d.height;s=p-u.left-.5*u.width,c=v-u.top-.5*u.height}let S=1;typeof n=="number"?S=n:n==="full"?S=h:n==="cover"?S=C:n==="max"?S=y:n==="fit"?S=1:n==="next"&&(S=this.getNextScale("iterateZoom")),S=S/m||1,o=o===gt?S>1?.15:.25:o,this.applyChange({scale:S,originX:s,originY:c,friction:o}),f&&this.panMode===mt&&this.panWithMouse(f,o)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:n,contentRect:o,target:s}=this;this.applyChange({panX:.5*n.width-(o.left+.5*o.fitWidth)-s.e,panY:.5*n.height-(o.top+.5*o.fitHeight)-s.f,scale:n.width/o.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:n,contentRect:o,target:s}=this;this.applyChange({panX:.5*n.width-(o.left+.5*o.fitWidth)-s.e,panY:.5*n.innerHeight-(o.top+.5*o.fitHeight)-s.f,scale:n.height/o.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:n}=this,o=this.cn("inFullscreen"),s=this.cn("htmlHasFullscreen");n.classList.toggle(o);const c=n.classList.contains(o);c?(document.documentElement.classList.add(s),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(s),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(c?"enterFS":"exitFS")}getMatrix(n=this.current){const{a:o,b:s,c,d:f,e:m,f:h}=n;return new DOMMatrix([o,s,c,f,m,h])}reset(n){if(this.state!==Re.Init&&this.state!==Re.Destroy){this.stop("current");for(const o of It)this.target[o]=Qn[o];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=n===void 0?this.option("friction"):n,this.state=Re.Panning,this.requestTick())}}destroy(){this.stop(),this.state=Re.Destroy,this.detachEvents(),this.detachObserver();const{container:n,content:o}=this,s=this.option("classes")||{};for(const c of Object.values(s))n.classList.remove(c+"");o&&(o.removeEventListener("load",this.onLoad),o.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(sn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ml}),Object.defineProperty(sn,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const ua=function(T,n){let o=!0;return(...s)=>{o&&(o=!1,T(...s),setTimeout(()=>{o=!0},n))}},da=(T,n)=>{let o=[];return T.childNodes.forEach(s=>{s.nodeType!==Node.ELEMENT_NODE||n&&!s.matches(n)||o.push(s)}),o},_l={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var Ke;(function(T){T[T.Init=0]="Init",T[T.Ready=1]="Ready",T[T.Destroy=2]="Destroy"})(Ke||(Ke={}));const Ki=T=>{if(typeof T=="string"||T instanceof HTMLElement)T={html:T};else{const n=T.thumb;n!==void 0&&(typeof n=="string"&&(T.thumbSrc=n),n instanceof HTMLImageElement&&(T.thumbEl=n,T.thumbElSrc=n.src,T.thumbSrc=n.src),delete T.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},T)},Ll=(T={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},T);class Tt extends mi{constructor(n,o){super(o),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:n})}attach(){}detach(){}}const Al={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};class $a extends Tt{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let n=this.list;if(!n){n=document.createElement("ul"),pe(n,this.cn("list")),n.setAttribute("role","tablist");const o=this.instance.container;o.appendChild(n),pe(o,this.cn("hasDots")),this.list=n}return n}refresh(){var n;const o=this.instance.pages.length,s=Math.min(2,this.option("minCount")),c=Math.max(2e3,this.option("maxCount")),f=this.option("dynamicFrom");if(o<s||o>c)return void this.cleanup();const m=typeof f=="number"&&o>5&&o>=f,h=!this.list||this.isDynamic!==m||this.list.children.length!==o;h&&this.cleanup();const y=this.build();if(Dt(y,this.cn("isDynamic"),!!m),h)for(let u=0;u<o;u++)y.append(this.createItem(u));let C,S=0;for(const u of[...y.children]){const d=S===this.instance.page;d&&(C=u),Dt(u,this.cn("isCurrent"),d),(n=u.children[0])===null||n===void 0||n.setAttribute("aria-selected",d?"true":"false");for(const p of["isBeforePrev","isPrev","isNext","isAfterNext"])Pe(u,this.cn(p));S++}if(C=C||y.firstChild,m&&C){const u=C.previousElementSibling,d=u&&u.previousElementSibling;pe(u,this.cn("isPrev")),pe(d,this.cn("isBeforePrev"));const p=C.nextElementSibling,v=p&&p.nextElementSibling;pe(p,this.cn("isNext")),pe(v,this.cn("isAfterNext"))}this.isDynamic=m}createItem(n=0){var o;const s=document.createElement("li");s.setAttribute("role","presentation");const c=At(this.instance.localize(this.option("dotTpl"),[["%d",n+1]]).replace(/\%i/g,n+""));return s.appendChild(c),(o=s.children[0])===null||o===void 0||o.setAttribute("role","tab"),s}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,Pe(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty($a,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Al});const ti="disabled",ni="next",fa="prev";class qa extends Tt{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const n=this.instance,o=n.pages.length,s=n.page;if(o<2)return void this.cleanup();this.build();let c=this.prev,f=this.next;c&&f&&(c.removeAttribute(ti),f.removeAttribute(ti),n.isInfinite||(s<=0&&c.setAttribute(ti,""),s>=o-1&&f.setAttribute(ti,"")))}addBtn(n){var o;const s=this.instance,c=document.createElement("button");c.setAttribute("tabindex","0"),c.setAttribute("title",s.localize(`{{${n.toUpperCase()}}}`)),pe(c,this.cn("button")+" "+this.cn(n===ni?"isNext":"isPrev"));const f=s.isRTL?n===ni?fa:ni:n;var m;return c.innerHTML=s.localize(this.option(`${f}Tpl`)),c.dataset[`carousel${m=n,m?m.match("^[a-z]")?m.charAt(0).toUpperCase()+m.substring(1):m:""}`]="true",(o=this.container)===null||o===void 0||o.appendChild(c),c}build(){const n=this.instance.container,o=this.cn("container");let{container:s,prev:c,next:f}=this;s||(s=n.querySelector("."+o),this.isDom=!!s),s||(s=document.createElement("div"),pe(s,o),n.appendChild(s)),this.container=s,f||(f=s.querySelector("[data-carousel-next]")),f||(f=this.addBtn(ni)),this.next=f,c||(c=s.querySelector("[data-carousel-prev]")),c||(c=this.addBtn(fa)),this.prev=c}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(qa,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class Wa extends Tt{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(n){this.target=this.instance,this.nav=n,this.attachEvents()}addAsNavFor(n){this.nav=this.instance,this.target=n,this.attachEvents()}attachEvents(){const{nav:n,target:o}=this;n&&o&&(n.options.initialSlide=o.options.initialPage,n.state===Ke.Ready?this.onNavReady(n):n.on("ready",this.onNavReady),o.state===Ke.Ready?this.onTargetReady(o):o.on("ready",this.onTargetReady))}onNavReady(n){n.on("createSlide",this.onNavCreateSlide),n.on("Panzoom.click",this.onNavClick),n.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(n){n.on("change",this.onTargetChange),n.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(n,o,s){this.onNavTouch(n,n.panzoom,s)}onNavTouch(n,o,s){var c,f;if(Math.abs(o.dragOffset.x)>3||Math.abs(o.dragOffset.y)>3)return;const m=s.target,{nav:h,target:y}=this;if(!h||!y||!m)return;const C=m.closest("[data-index]");if(s.stopPropagation(),s.preventDefault(),!C)return;const S=parseInt(C.dataset.index||"",10)||0,u=y.getPageForSlide(S),d=h.getPageForSlide(S);h.slideTo(d),y.slideTo(u,{friction:((f=(c=this.nav)===null||c===void 0?void 0:c.plugins)===null||f===void 0?void 0:f.Sync.option("friction"))||0}),this.markSelectedSlide(S)}onNavCreateSlide(n,o){o.index===this.selectedIndex&&this.markSelectedSlide(o.index)}onTargetChange(){var n,o;const{target:s,nav:c}=this;if(!s||!c||c.state!==Ke.Ready||s.state!==Ke.Ready)return;const f=(o=(n=s.pages[s.page])===null||n===void 0?void 0:n.slides[0])===null||o===void 0?void 0:o.index,m=c.getPageForSlide(f);this.markSelectedSlide(f),c.slideTo(m,c.prevPage===null&&s.prevPage===null?{friction:0}:void 0)}markSelectedSlide(n){const o=this.nav;o&&o.state===Ke.Ready&&(this.selectedIndex=n,[...o.slides].map(s=>{s.el&&s.el.classList[s.index===n?"add":"remove"]("is-nav-selected")}))}attach(){const n=this;let o=n.options.target,s=n.options.nav;o?n.addAsNavFor(o):s&&n.addAsTargetFor(s)}detach(){const n=this,o=n.nav,s=n.target;o&&(o.off("ready",n.onNavReady),o.off("createSlide",n.onNavCreateSlide),o.off("Panzoom.click",n.onNavClick),o.off("Panzoom.touchEnd",n.onNavTouch)),n.nav=null,s&&(s.off("ready",n.onTargetReady),s.off("refresh",n.onTargetChange),s.off("change",n.onTargetChange)),n.target=null}}Object.defineProperty(Wa,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const Dl={Navigation:qa,Dots:$a,Sync:Wa},ii="animationend",ha="isSelected",ri="slide";class rn extends mr{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===Ke.Ready}get isInfinite(){let n=!1;const{contentDim:o,viewportDim:s,pages:c,slides:f}=this,m=f[0];return c.length>=2&&m&&o+m.dim>=s&&(n=this.option("infinite")),n}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(n,o={},s={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ke.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof n=="string"&&(n=document.querySelector(n)),!n||!ut(n))throw new Error("No Element found");this.container=n,this.slideNext=ua(this.slideNext.bind(this),150),this.slidePrev=ua(this.slidePrev.bind(this),150),this.userOptions=o,this.userPlugins=s,queueMicrotask(()=>{this.processOptions()})}processOptions(){var n,o;const s=dt({},rn.defaults,this.userOptions);let c="";const f=s.breakpoints;if(f&&ur(f))for(const[m,h]of Object.entries(f))window.matchMedia(m).matches&&ur(h)&&(c+=m,dt(s,h));c===this.bp&&this.state!==Ke.Init||(this.bp=c,this.state===Ke.Ready&&(s.initialSlide=((o=(n=this.pages[this.page])===null||n===void 0?void 0:n.slides[0])===null||o===void 0?void 0:o.index)||0),this.state!==Ke.Init&&this.destroy(),super.setOptions(s),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=Ke.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},rn.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=Ke.Ready,this.emit("ready")}initLayout(){const{container:n}=this,o=this.option("classes");pe(n,this.cn("container")),Dt(n,o.isLTR,!this.isRTL),Dt(n,o.isRTL,this.isRTL),Dt(n,o.isVertical,!this.isHorizontal),Dt(n,o.isHorizontal,this.isHorizontal);let s=this.option("viewport")||n.querySelector(`.${o.viewport}`);s||(s=document.createElement("div"),pe(s,o.viewport),s.append(...da(n,`.${o.slide}`)),n.prepend(s)),s.addEventListener("scroll",this.onScroll);let c=this.option("track")||n.querySelector(`.${o.track}`);c||(c=document.createElement("div"),pe(c,o.track),c.append(...Array.from(s.childNodes))),c.setAttribute("aria-live","polite"),s.contains(c)||s.prepend(c),this.viewport=s,this.track=c,this.emit("initLayout")}initSlides(){const{track:n}=this;if(!n)return;const o=[...this.slides],s=[];[...da(n,`.${this.cn(ri)}`)].forEach(c=>{if(ut(c)){const f=Ki({el:c,isDom:!0,index:this.slides.length});s.push(f)}});for(let c of[...this.option("slides",[])||[],...o])s.push(Ki(c));this.slides=s;for(let c=0;c<this.slides.length;c++)this.slides[c].index=c;for(const c of s)this.emit("beforeInitSlide",c,c.index),this.emit("initSlide",c,c.index);this.emit("initSlides")}setInitialPage(){const n=this.option("initialSlide");this.page=typeof n=="number"?this.getPageForSlide(n):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:n,pages:o,isHorizontal:s}=this;if(!n||!o.length)return;let c=this.page;o[c]||(this.page=c=0);const f=(o[c].pos||0)*(this.isRTL&&s?1:-1),m=s?`${f}px`:"0",h=s?"0":`${f}px`;n.style.transform=`translate3d(${m}, ${h}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const n=this.option("Panzoom")||{};this.panzoom=new sn(this.viewport,dt({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:o=>!(this.pages.length<2&&!o.options.infinite),bounds:()=>this.getBounds(),maxVelocity:o=>Math.abs(o.target[this.axis]-o.current[this.axis])<2*this.viewportDim?100:0},n)),this.panzoom.on("*",(o,s,...c)=>{this.emit(`Panzoom.${s}`,o,...c)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const n=this.container;n&&(n.addEventListener("click",this.onClick,{passive:!1,capture:!1}),n.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let n=[];const{contentDim:o,viewportDim:s}=this;let c=this.option("slidesPerPage");c=(c==="auto"||o<=s)&&this.option("fill")!==!1?1/0:parseFloat(c+"");let f=0,m=0,h=0;for(const y of this.slides)(!n.length||m+y.dim-s>.05||h>=c)&&(n.push(Ll()),f=n.length-1,m=0,h=0),n[f].slides.push(y),m+=y.dim+y.gap,h++;return n}processPages(){const n=this.pages,{contentDim:o,viewportDim:s,isInfinite:c}=this,f=this.option("center"),m=this.option("fill"),h=m&&f&&o>s&&!c;if(n.forEach((S,u)=>{var d;S.index=u,S.pos=((d=S.slides[0])===null||d===void 0?void 0:d.pos)||0,S.dim=0;for(const[p,v]of S.slides.entries())S.dim+=v.dim,p<S.slides.length-1&&(S.dim+=v.gap);h&&S.pos+.5*S.dim<.5*s?S.pos=0:h&&S.pos+.5*S.dim>=o-.5*s?S.pos=o-s:f&&(S.pos+=-.5*(s-S.dim))}),n.forEach(S=>{m&&!c&&o>s&&(S.pos=Math.max(S.pos,0),S.pos=Math.min(S.pos,o-s)),S.pos=te(S.pos,1e3),S.dim=te(S.dim,1e3),Math.abs(S.pos)<=.1&&(S.pos=0)}),c)return n;const y=[];let C;return n.forEach(S=>{const u=Object.assign({},S);C&&u.pos===C.pos?(C.dim+=u.dim,C.slides=[...C.slides,...u.slides]):(u.index=y.length,C=u,y.push(u))}),y}getPageFromIndex(n=0){const o=this.pages.length;let s;return n=parseInt((n||0).toString())||0,s=this.isInfinite?(n%o+o)%o:Math.max(Math.min(n,o-1),0),s}getSlideMetrics(n){var o,s;const c=this.isHorizontal?"width":"height";let f=0,m=0,h=n.el;const y=!(!h||h.parentNode);if(h?f=parseFloat(h.dataset[c]||"")||0:(h=document.createElement("div"),h.style.visibility="hidden",(this.track||document.body).prepend(h)),pe(h,this.cn(ri)+" "+n.class+" "+n.customClass),f)h.style[c]=`${f}px`,h.style[c==="width"?"height":"width"]="";else{y&&(this.track||document.body).prepend(h),f=h.getBoundingClientRect()[c]*Math.max(1,((o=window.visualViewport)===null||o===void 0?void 0:o.scale)||1);let S=h[this.isHorizontal?"offsetWidth":"offsetHeight"];S-1>f&&(f=S)}const C=getComputedStyle(h);return C.boxSizing==="content-box"&&(this.isHorizontal?(f+=parseFloat(C.paddingLeft)||0,f+=parseFloat(C.paddingRight)||0):(f+=parseFloat(C.paddingTop)||0,f+=parseFloat(C.paddingBottom)||0)),m=parseFloat(C[this.isHorizontal?"marginRight":"marginBottom"])||0,y?(s=h.parentElement)===null||s===void 0||s.removeChild(h):n.el||h.remove(),{dim:te(f,1e3),gap:te(m,1e3)}}getBounds(){const{isInfinite:n,isRTL:o,isHorizontal:s,pages:c}=this;let f={min:0,max:0};if(n)f={min:-1/0,max:1/0};else if(c.length){const m=c[0].pos,h=c[c.length-1].pos;f=o&&s?{min:m,max:h}:{min:-1*h,max:-1*m}}return{x:s?f:{min:0,max:0},y:s?{min:0,max:0}:f}}repositionSlides(){let n,{isHorizontal:o,isRTL:s,isInfinite:c,viewport:f,viewportDim:m,contentDim:h,page:y,pages:C,slides:S,panzoom:u}=this,d=0,p=0,v=0,E=0;u?E=-1*u.current[this.axis]:C[y]&&(E=C[y].pos||0),n=o?s?"right":"left":"top",s&&o&&(E*=-1);for(const x of S){const A=x.el;A?(n==="top"?(A.style.right="",A.style.left=""):A.style.top="",x.index!==d?A.style[n]=p===0?"":`${te(p,1e3)}px`:A.style[n]="",v+=x.dim+x.gap,d++):p+=x.dim+x.gap}if(c&&v&&f){let x=getComputedStyle(f),A="padding",g=o?"Right":"Bottom",O=parseFloat(x[A+(o?"Left":"Top")]);E-=O,m+=O,m+=parseFloat(x[A+g]);for(const I of S)I.el&&(te(I.pos)<te(m)&&te(I.pos+I.dim+I.gap)<te(E)&&te(E)>te(h-m)&&(I.el.style[n]=`${te(p+v,1e3)}px`),te(I.pos+I.gap)>=te(h-m)&&te(I.pos)>te(E+m)&&te(E)<te(m)&&(I.el.style[n]=`-${te(v,1e3)}px`))}let b,k,M=[...this.inTransition];if(M.length>1&&(b=C[M[0]],k=C[M[1]]),b&&k){let x=0;for(const A of S)A.el?this.inTransition.has(A.index)&&b.slides.indexOf(A)<0&&(A.el.style[n]=`${te(x+(b.pos-k.pos),1e3)}px`):x+=A.dim+A.gap}}createSlideEl(n){const{track:o,slides:s}=this;if(!o||!n||n.el&&n.el.parentNode)return;const c=n.el||document.createElement("div");pe(c,this.cn(ri)),pe(c,n.class),pe(c,n.customClass);const f=n.html;f&&(f instanceof HTMLElement?c.appendChild(f):c.innerHTML=n.html+"");const m=[];s.forEach((S,u)=>{S.el&&m.push(u)});const h=n.index;let y=null;m.length&&(y=s[m.reduce((S,u)=>Math.abs(u-h)<Math.abs(S-h)?u:S)]);const C=y&&y.el&&y.el.parentNode?y.index<n.index?y.el.nextSibling:y.el:null;o.insertBefore(c,o.contains(C)?C:null),n.el=c,this.emit("createSlide",n)}removeSlideEl(n,o=!1){const s=n==null?void 0:n.el;if(!s||!s.parentNode)return;const c=this.cn(ha);if(s.classList.contains(c)&&(Pe(s,c),this.emit("unselectSlide",n)),n.isDom&&!o)return s.removeAttribute("aria-hidden"),s.removeAttribute("data-index"),void(s.style.left="");this.emit("removeSlide",n);const f=new CustomEvent(ii);s.dispatchEvent(f),n.el&&(n.el.remove(),n.el=null)}transitionTo(n=0,o=this.option("transition")){var s,c,f,m;if(!o)return!1;const h=this.page,{pages:y,panzoom:C}=this;n=parseInt((n||0).toString())||0;const S=this.getPageFromIndex(n);if(!C||!y[S]||y.length<2||Math.abs((((c=(s=y[h])===null||s===void 0?void 0:s.slides[0])===null||c===void 0?void 0:c.dim)||0)-this.viewportDim)>1)return!1;let u=n>h?1:-1;this.isInfinite&&(h===0&&n===y.length-1&&(u=-1),h===y.length-1&&n===0&&(u=1));const d=y[S].pos*(this.isRTL?1:-1);if(h===S&&Math.abs(d-C.target[this.axis])<1)return!1;this.clearTransitions();const p=C.isResting;pe(this.container,this.cn("inTransition"));const v=((f=y[h])===null||f===void 0?void 0:f.slides[0])||null,E=((m=y[S])===null||m===void 0?void 0:m.slides[0])||null;this.inTransition.add(E.index),this.createSlideEl(E);let b=v.el,k=E.el;p||o===ri||(o="fadeFast",b=null);const M=this.isRTL?"next":"prev",x=this.isRTL?"prev":"next";return b&&(this.inTransition.add(v.index),v.transition=o,b.addEventListener(ii,this.onAnimationEnd),b.classList.add(`f-${o}Out`,`to-${u>0?x:M}`)),k&&(E.transition=o,k.addEventListener(ii,this.onAnimationEnd),k.classList.add(`f-${o}In`,`from-${u>0?M:x}`)),C.current[this.axis]=d,C.target[this.axis]=d,C.requestTick(),this.onChange(S),!0}manageSlideVisiblity(){const n=new Set,o=new Set,s=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const c of this.slides)s.has(c)?n.add(c):o.add(c);for(const c of this.inTransition)n.add(this.slides[c]);for(const c of n)this.createSlideEl(c),this.lazyLoadSlide(c);for(const c of o)n.has(c)||this.removeSlideEl(c);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const n="aria-hidden";let o=this.cn(ha);if(o)for(const s of this.slides){const c=s.el;c&&(c.dataset.index=`${s.index}`,c.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(s)?c.removeAttribute(n):c.setAttribute(n,"true"):this.pages[this.page].slides.includes(s)?(c.classList.contains(o)||(pe(c,o),this.emit("selectSlide",s)),c.removeAttribute(n)):(c.classList.contains(o)&&(Pe(c,o),this.emit("unselectSlide",s)),c.setAttribute(n,"true")))}}flipInfiniteTrack(){const{axis:n,isHorizontal:o,isInfinite:s,isRTL:c,viewportDim:f,contentDim:m}=this,h=this.panzoom;if(!h||!s)return;let y=h.current[n],C=h.target[n]-y,S=0,u=.5*f;c&&o?(y<-u&&(S=-1,y+=m),y>m-u&&(S=1,y-=m)):(y>u&&(S=1,y-=m),y<-m+u&&(S=-1,y+=m)),S&&(h.current[n]=y,h.target[n]=y+C)}lazyLoadImg(n,o){const s=this,c="f-fadeIn",f="is-preloading";let m=!1,h=null;const y=()=>{m||(m=!0,h&&(h.remove(),h=null),Pe(o,f),o.complete&&(pe(o,c),setTimeout(()=>{Pe(o,c)},350)),this.option("adaptiveHeight")&&n.el&&this.pages[this.page].slides.indexOf(n)>-1&&(s.updateMetrics(),s.setViewportHeight()),this.emit("load",n))};pe(o,f),o.src=o.dataset.lazySrcset||o.dataset.lazySrc||"",delete o.dataset.lazySrc,delete o.dataset.lazySrcset,o.addEventListener("error",()=>{y()}),o.addEventListener("load",()=>{y()}),setTimeout(()=>{const C=o.parentNode;C&&n.el&&(o.complete?y():m||(h=At(gr),C.insertBefore(h,o)))},300)}lazyLoadSlide(n){const o=n&&n.el;if(!o)return;const s=new Set;let c=Array.from(o.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));o.dataset.lazySrc&&c.push(o),c.map(f=>{f instanceof HTMLImageElement?s.add(f):f instanceof HTMLElement&&f.dataset.lazySrc&&(f.style.backgroundImage=`url('${f.dataset.lazySrc}')`,delete f.dataset.lazySrc)});for(const f of s)this.lazyLoadImg(n,f)}onAnimationEnd(n){var o;const s=n.target,c=s?parseInt(s.dataset.index||"",10)||0:-1,f=this.slides[c],m=n.animationName;if(!s||!f||!m)return;const h=!!this.inTransition.has(c)&&f.transition;h&&m.substring(0,h.length+2)===`f-${h}`&&this.inTransition.delete(c),this.inTransition.size||this.clearTransitions(),c===this.page&&(!((o=this.panzoom)===null||o===void 0)&&o.isResting)&&this.emit("settle")}onDecel(n,o=0,s=0,c=0,f=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:m,isHorizontal:h,axis:y,pages:C}=this,S=C.length,u=Math.abs(Math.atan2(s,o)/(Math.PI/180));let d=0;if(d=u>45&&u<135?h?0:s:h?o:0,!S)return;let p=this.page,v=m&&h?1:-1;const E=n.current[y]*v;let{pageIndex:b}=this.getPageFromPosition(E);Math.abs(d)>5?(C[p].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(p=b),p=m&&h?d<0?p-1:p+1:d<0?p+1:p-1):p=c===0&&f===0?p:b,this.slideTo(p,{transition:!1,friction:n.option("decelFriction")})}onClick(n){const o=n.target,s=o&&ut(o)?o.dataset:null;let c,f;s&&(s.carouselPage!==void 0?(f="slideTo",c=s.carouselPage):s.carouselNext!==void 0?f="slideNext":s.carouselPrev!==void 0&&(f="slidePrev")),f?(n.preventDefault(),n.stopPropagation(),o&&!o.hasAttribute("disabled")&&this[f](c)):this.emit("click",n)}onSlideTo(n){const o=n.detail||0;this.slideTo(this.getPageForSlide(o),{friction:0})}onChange(n,o=0){const s=this.page;this.prevPage=s,this.page=n,this.option("adaptiveHeight")&&this.setViewportHeight(),n!==s&&(this.markSelectedSlides(),this.emit("change",n,s,o))}onRefresh(){let n=this.contentDim,o=this.viewportDim;this.updateMetrics(),this.contentDim===n&&this.viewportDim===o||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var n;(n=this.viewport)===null||n===void 0||n.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(n){this.lp!==n.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=n.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(n=null,o=null){this.destroy(),this.state=Ke.Init,this.prevPage=null,this.userOptions=n||this.userOptions,this.userPlugins=o||this.userPlugins,this.processOptions()}slideTo(n=0,{friction:o=this.option("friction"),transition:s=this.option("transition")}={}){if(this.state===Ke.Destroy)return;n=parseInt((n||0).toString())||0;const c=this.getPageFromIndex(n),{axis:f,isHorizontal:m,isRTL:h,pages:y,panzoom:C}=this,S=y.length,u=h&&m?1:-1;if(!C||!S)return;if(this.page!==c){const p=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",p,n),p.defaultPrevented)return}if(this.transitionTo(n,s))return;let d=y[c].pos;if(this.isInfinite){const p=this.contentDim,v=C.target[f]*u;S===2?d+=p*Math.floor(parseFloat(n+"")/2):d=[d,d-p,d+p].reduce(function(E,b){return Math.abs(b-v)<Math.abs(E-v)?b:E})}d*=u,Math.abs(C.target[f]-d)<1||(C.panTo({x:m?d:0,y:m?0:d,friction:o}),this.onChange(c))}slideToClosest(n){if(this.panzoom){const{pageIndex:o}=this.getPageFromPosition();this.slideTo(o,n)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),Pe(this.container,this.cn("inTransition"));const n=["to-prev","to-next","from-prev","from-next"];for(const o of this.slides){const s=o.el;if(s){s.removeEventListener(ii,this.onAnimationEnd),s.classList.remove(...n);const c=o.transition;c&&s.classList.remove(`f-${c}Out`,`f-${c}In`)}}this.manageSlideVisiblity()}addSlide(n,o){var s,c,f,m;const h=this.panzoom,y=((s=this.pages[this.page])===null||s===void 0?void 0:s.pos)||0,C=((c=this.pages[this.page])===null||c===void 0?void 0:c.dim)||0,S=this.contentDim<this.viewportDim;let u=Array.isArray(o)?o:[o];const d=[];for(const p of u)d.push(Ki(p));this.slides.splice(n,0,...d);for(let p=0;p<this.slides.length;p++)this.slides[p].index=p;for(const p of d)this.emit("beforeInitSlide",p,p.index);if(this.page>=n&&(this.page+=d.length),this.updateMetrics(),h){const p=((f=this.pages[this.page])===null||f===void 0?void 0:f.pos)||0,v=((m=this.pages[this.page])===null||m===void 0?void 0:m.dim)||0,E=this.pages.length||1,b=this.isRTL?C-v:v-C,k=this.isRTL?y-p:p-y;S&&E===1?(n<=this.page&&(h.current[this.axis]-=b,h.target[this.axis]-=b),h.panTo({[this.isHorizontal?"x":"y"]:-1*p})):k&&n<=this.page&&(h.target[this.axis]-=k,h.current[this.axis]-=k,h.requestTick())}for(const p of d)this.emit("initSlide",p,p.index)}prependSlide(n){this.addSlide(0,n)}appendSlide(n){this.addSlide(this.slides.length,n)}removeSlide(n){const o=this.slides.length;n=(n%o+o)%o;const s=this.slides[n];if(s){this.removeSlideEl(s,!0),this.slides.splice(n,1);for(let c=0;c<this.slides.length;c++)this.slides[c].index=c;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",s)}}updateMetrics(){const{panzoom:n,viewport:o,track:s,slides:c,isHorizontal:f,isInfinite:m}=this;if(!s)return;const h=f?"width":"height",y=f?"offsetWidth":"offsetHeight";if(o){let u=Math.max(o[y],te(o.getBoundingClientRect()[h],1e3)),d=getComputedStyle(o),p="padding",v=f?"Right":"Bottom";u-=parseFloat(d[p+(f?"Left":"Top")])+parseFloat(d[p+v]),this.viewportDim=u}let C,S=0;for(const[u,d]of c.entries()){let p=0,v=0;!d.el&&C?(p=C.dim,v=C.gap):({dim:p,gap:v}=this.getSlideMetrics(d),C=d),p=te(p,1e3),v=te(v,1e3),d.dim=p,d.gap=v,d.pos=S,S+=p,(m||u<c.length-1)&&(S+=v)}S=te(S,1e3),this.contentDim=S,n&&(n.contentRect[h]=S,n.contentRect[f?"fullWidth":"fullHeight"]=S),this.pages=this.createPages(),this.pages=this.processPages(),this.state===Ke.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(n,o=!1,s=!1){n===void 0&&(n=this.page);const c=this,f=c.panzoom,m=c.contentDim,h=c.pages[n]||0;if(!h||!f)return n>this.page?-1:1;let y=-1*f.current.e,C=te((y-h.pos)/(1*h.dim),1e3),S=C,u=C;this.isInfinite&&s!==!0&&(S=te((y-h.pos+m)/(1*h.dim),1e3),u=te((y-h.pos-m)/(1*h.dim),1e3));let d=[C,S,u].reduce(function(p,v){return Math.abs(v)<Math.abs(p)?v:p});return o?d:d>1?1:d<-1?-1:d}setViewportHeight(){const{page:n,pages:o,viewport:s,isHorizontal:c}=this;if(!s||!o[n])return;let f=0;c&&this.track&&(this.track.style.height="auto",o[n].slides.forEach(m=>{m.el&&(f=Math.max(f,m.el.offsetHeight))})),s.style.height=f?`${f}px`:""}getPageForSlide(n){for(const o of this.pages)for(const s of o.slides)if(s.index===n)return o.index;return-1}getVisibleSlides(n=0){var o;const s=new Set;let{panzoom:c,contentDim:f,viewportDim:m,pages:h,page:y}=this;if(m){f=f+((o=this.slides[this.slides.length-1])===null||o===void 0?void 0:o.gap)||0;let C=0;C=c&&c.state!==Re.Init&&c.state!==Re.Destroy?-1*c.current[this.axis]:h[y]&&h[y].pos||0,this.isInfinite&&(C-=Math.floor(C/f)*f),this.isRTL&&this.isHorizontal&&(C*=-1);const S=C-m*n,u=C+m*(n+1),d=this.isInfinite?[-1,0,1]:[0];for(const p of this.slides)for(const v of d){const E=p.pos+v*f,b=E+p.dim+p.gap;E<u&&b>S&&s.add(p)}}return s}getPageFromPosition(n){const{viewportDim:o,contentDim:s,slides:c,pages:f,panzoom:m}=this,h=f.length,y=c.length,C=c[0],S=c[y-1],u=this.option("center");let d=0,p=0,v=0,E=n===void 0?-1*((m==null?void 0:m.target[this.axis])||0):n;u&&(E+=.5*o),this.isInfinite?(E<C.pos-.5*S.gap&&(E-=s,v=-1),E>S.pos+S.dim+.5*S.gap&&(E-=s,v=1)):E=Math.max(C.pos||0,Math.min(E,S.pos));let b=S,k=c.find(M=>{const x=M.pos-.5*b.gap,A=M.pos+M.dim+.5*M.gap;return b=M,E>=x&&E<A});return k||(k=S),p=this.getPageForSlide(k.index),d=p+v*h,{page:d,pageIndex:p}}setPageFromPosition(){const{pageIndex:n}=this.getPageFromPosition();this.onChange(n)}destroy(){if([Ke.Destroy].includes(this.state))return;this.state=Ke.Destroy;const{container:n,viewport:o,track:s,slides:c,panzoom:f}=this,m=this.option("classes");n.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),n.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),f&&(f.destroy(),this.panzoom=null),c&&c.forEach(y=>{this.removeSlideEl(y)}),this.detachPlugins(),o&&(o.removeEventListener("scroll",this.onScroll),o.offsetParent&&s&&s.offsetParent&&o.replaceWith(...s.childNodes));for(const[y,C]of Object.entries(m))y!=="container"&&C&&n.classList.remove(C);this.track=null,this.viewport=null,this.page=0,this.slides=[];const h=this.events.get("ready");this.events=new Map,h&&this.events.set("ready",h)}}Object.defineProperty(rn,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:sn}),Object.defineProperty(rn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:_l}),Object.defineProperty(rn,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Dl});const Ya=function(T){if(!ut(T))return 0;const n=window.scrollY,o=window.innerHeight,s=n+o,c=T.getBoundingClientRect(),f=c.y+n,m=c.height,h=f+m;if(n>h||s<f)return 0;if(n<f&&s>h||f<n&&h>s)return 100;let y=m;f<n&&(y-=n-f),h>s&&(y-=h-s);const C=y/o*100;return Math.round(C)},Fn=!(typeof window>"u"||!window.document||!window.document.createElement);let Gi;const Zi=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),pa=T=>{if(T&&Fn){Gi===void 0&&document.createElement("div").focus({get preventScroll(){return Gi=!0,!1}});try{if(Gi)T.focus({preventScroll:!0});else{const n=window.scrollY||document.body.scrollTop,o=window.scrollX||document.body.scrollLeft;T.focus(),document.body.scrollTo({top:n,left:o,behavior:"auto"})}}catch{}}},Ka=()=>{const T=document;let n,o="",s="",c="";return T.fullscreenEnabled?(o="requestFullscreen",s="exitFullscreen",c="fullscreenElement"):T.webkitFullscreenEnabled&&(o="webkitRequestFullscreen",s="webkitExitFullscreen",c="webkitFullscreenElement"),o&&(n={request:function(f=T.documentElement){return o==="webkitRequestFullscreen"?f[o](Element.ALLOW_KEYBOARD_INPUT):f[o]()},exit:function(){return T[c]&&T[s]()},isFullscreen:function(){return T[c]}}),n},dr={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},Va),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"};var Qe,at;(function(T){T[T.Init=0]="Init",T[T.Ready=1]="Ready",T[T.Closing=2]="Closing",T[T.CustomClosing=3]="CustomClosing",T[T.Destroy=4]="Destroy"})(Qe||(Qe={})),function(T){T[T.Loading=0]="Loading",T[T.Opening=1]="Opening",T[T.Ready=2]="Ready",T[T.Closing=3]="Closing"}(at||(at={}));let ma="",Bn=!1,ai=!1,tn=null;const Ga=()=>{let T="",n="";const o=Ae.getInstance();if(o){const s=o.carousel,c=o.getSlide();if(s&&c){let f=c.slug||void 0,m=c.triggerEl||void 0;n=f||o.option("slug")||"",!n&&m&&m.dataset&&(n=m.dataset.fancybox||""),n&&n!=="true"&&(T="#"+n+(!f&&s.slides.length>1?"-"+(c.index+1):""))}}return{hash:T,slug:n,index:1}},gi=()=>{const T=new URL(document.URL).hash,n=T.slice(1).split("-"),o=n[n.length-1],s=o&&/^\+?\d+$/.test(o)&&parseInt(n.pop()||"1",10)||1;return{hash:T,slug:n.join("-"),index:s}},Za=()=>{const{slug:T,index:n}=gi();if(!T)return;let o=document.querySelector(`[data-slug="${T}"]`);if(o&&o.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),Ae.getInstance())return;const s=document.querySelectorAll(`[data-fancybox="${T}"]`);s.length&&(o=s[n-1],o&&o.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},Xa=()=>{if(Ae.defaults.Hash===!1)return;const T=Ae.getInstance();if((T==null?void 0:T.options.Hash)===!1)return;const{slug:n,index:o}=gi(),{slug:s}=Ga();T&&(n===s?T.jumpTo(o-1):(Bn=!0,T.close())),Za()},Ja=()=>{tn&&clearTimeout(tn),queueMicrotask(()=>{Xa()})},ga=()=>{window.addEventListener("hashchange",Ja,!1),setTimeout(()=>{Xa()},500)};Fn&&(/complete|interactive|loaded/.test(document.readyState)?ga():document.addEventListener("DOMContentLoaded",ga));const oi="is-zooming-in";class Qa extends Tt{onCreateSlide(n,o,s){const c=this.instance.optionFor(s,"src")||"";s.el&&s.type==="image"&&typeof c=="string"&&this.setImage(s,c)}onRemoveSlide(n,o,s){s.panzoom&&s.panzoom.destroy(),s.panzoom=void 0,s.imageEl=void 0}onChange(n,o,s,c){Pe(this.instance.container,oi);for(const f of o.slides){const m=f.panzoom;m&&f.index!==s&&m.reset(.35)}}onClose(){var n;const o=this.instance,s=o.container,c=o.getSlide();if(!s||!s.parentElement||!c)return;const{el:f,contentEl:m,panzoom:h,thumbElSrc:y}=c;if(!f||!y||!m||!h||h.isContentLoading||h.state===Re.Init||h.state===Re.Destroy)return;h.updateMetrics();let C=this.getZoomInfo(c);if(!C)return;this.instance.state=Qe.CustomClosing,s.classList.remove(oi),s.classList.add("is-zooming-out"),m.style.backgroundImage=`url('${y}')`;const S=s.getBoundingClientRect();(((n=window.visualViewport)===null||n===void 0?void 0:n.scale)||1)===1&&Object.assign(s.style,{position:"absolute",top:`${s.offsetTop+window.scrollY}px`,left:`${s.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${S.width}px`,height:`${S.height}px`,overflow:"hidden"});const{x:u,y:d,scale:p,opacity:v}=C;if(v){const E=((b,k,M,x)=>{const A=k-b,g=x-M;return O=>M+((O-b)/A*g||0)})(h.scale,p,1,0);h.on("afterTransform",()=>{m.style.opacity=E(h.scale)+""})}h.on("endAnimation",()=>{o.destroy()}),h.target.a=p,h.target.b=0,h.target.c=0,h.target.d=p,h.panTo({x:u,y:d,scale:p,friction:v?.2:.33,ignoreBounds:!0}),h.isResting&&o.destroy()}setImage(n,o){const s=this.instance;n.src=o,this.process(n,o).then(c=>{const{contentEl:f,imageEl:m,thumbElSrc:h,el:y}=n;if(s.isClosing()||!f||!m)return;f.offsetHeight;const C=!!s.isOpeningSlide(n)&&this.getZoomInfo(n);if(this.option("protected")&&y){y.addEventListener("contextmenu",d=>{d.preventDefault()});const u=document.createElement("div");pe(u,"fancybox-protected"),f.appendChild(u)}if(h&&C){const u=c.contentRect,d=Math.max(u.fullWidth,u.fullHeight);let p=null;!C.opacity&&d>1200&&(p=document.createElement("img"),pe(p,"fancybox-ghost"),p.src=h,f.appendChild(p));const v=()=>{p&&(pe(p,"f-fadeFastOut"),setTimeout(()=>{p&&(p.remove(),p=null)},200))};(S=h,new Promise((E,b)=>{const k=new Image;k.onload=E,k.onerror=b,k.src=S})).then(()=>{s.hideLoading(n),n.state=at.Opening,this.instance.emit("reveal",n),this.zoomIn(n).then(()=>{v(),this.instance.done(n)},()=>{}),p&&setTimeout(()=>{v()},d>2500?800:200)},()=>{s.hideLoading(n),s.revealContent(n)})}else{const u=this.optionFor(n,"initialSize"),d=this.optionFor(n,"zoom"),p={event:s.prevMouseMoveEvent||s.options.event,friction:d?.12:0};let v=s.optionFor(n,"showClass")||void 0,E=!0;s.isOpeningSlide(n)&&(u==="full"?c.zoomToFull(p):u==="cover"?c.zoomToCover(p):u==="max"?c.zoomToMax(p):E=!1,c.stop("current")),E&&v&&(v=c.isDragging?"f-fadeIn":""),s.hideLoading(n),s.revealContent(n,v)}var S},()=>{s.setError(n,"{{IMAGE_ERROR}}")})}process(n,o){return new Promise((s,c)=>{var f;const m=this.instance,h=n.el;m.clearContent(n),m.showLoading(n);let y=this.optionFor(n,"content");if(typeof y=="string"&&(y=At(y)),!y||!ut(y)){if(y=document.createElement("img"),y instanceof HTMLImageElement){let C="",S=n.caption;C=typeof S=="string"&&S?S.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${n.index+1} of ${((f=m.carousel)===null||f===void 0?void 0:f.pages.length)||1}`,y.src=o||"",y.alt=C,y.draggable=!1,n.srcset&&y.setAttribute("srcset",n.srcset),this.instance.isOpeningSlide(n)&&(y.fetchPriority="high")}n.sizes&&y.setAttribute("sizes",n.sizes)}pe(y,"fancybox-image"),n.imageEl=y,m.setContent(n,y,!1),n.panzoom=new sn(h,dt({transformParent:!0},this.option("Panzoom")||{},{content:y,width:(C,S)=>m.optionFor(n,"width","auto",S)||"auto",height:(C,S)=>m.optionFor(n,"height","auto",S)||"auto",wheel:()=>{const C=m.option("wheel");return(C==="zoom"||C=="pan")&&C},click:(C,S)=>{var u,d;if(m.isCompact||m.isClosing()||n.index!==((u=m.getSlide())===null||u===void 0?void 0:u.index))return!1;if(S){const v=S.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(v.nodeName))return!1}let p=!S||S.target&&((d=n.contentEl)===null||d===void 0?void 0:d.contains(S.target));return m.option(p?"contentClick":"backdropClick")||!1},dblClick:()=>m.isCompact?"toggleZoom":m.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:C=>{s(C)},error:()=>{c()},destroy:()=>{c()}}}))})}zoomIn(n){return new Promise((o,s)=>{const c=this.instance,f=c.container,{panzoom:m,contentEl:h,el:y}=n;m&&m.updateMetrics();const C=this.getZoomInfo(n);if(!(C&&y&&h&&m&&f))return void s();const{x:S,y:u,scale:d,opacity:p}=C,v=()=>{n.state!==at.Closing&&(p&&(h.style.opacity=Math.max(Math.min(1,1-(1-m.scale)/(1-d)),0)+""),m.scale>=1&&m.scale>m.targetScale-.1&&o(m))},E=M=>{(M.scale<.99||M.scale>1.01)&&!M.isDragging||(Pe(f,oi),h.style.opacity="",M.off("endAnimation",E),M.off("touchStart",E),M.off("afterTransform",v),o(M))};m.on("endAnimation",E),m.on("touchStart",E),m.on("afterTransform",v),m.on(["error","destroy"],()=>{s()}),m.panTo({x:S,y:u,scale:d,friction:0,ignoreBounds:!0}),m.stop("current");const b={event:m.panMode==="mousemove"?c.prevMouseMoveEvent||c.options.event:void 0},k=this.optionFor(n,"initialSize");pe(f,oi),c.hideLoading(n),k==="full"?m.zoomToFull(b):k==="cover"?m.zoomToCover(b):k==="max"?m.zoomToMax(b):m.reset(.172)})}getZoomInfo(n){const{el:o,imageEl:s,thumbEl:c,panzoom:f}=n,m=this.instance,h=m.container;if(!o||!s||!c||!f||Ya(c)<3||!this.optionFor(n,"zoom")||!h||m.state===Qe.Destroy||getComputedStyle(h).getPropertyValue("--f-images-zoom")==="0")return!1;const y=window.visualViewport||null;if((y?y.scale:1)!==1)return!1;let{top:C,left:S,width:u,height:d}=c.getBoundingClientRect(),{top:p,left:v,fitWidth:E,fitHeight:b}=f.contentRect;if(!(u&&d&&E&&b))return!1;const k=f.container.getBoundingClientRect();v+=k.left,p+=k.top;const M=-1*(v+.5*E-(S+.5*u)),x=-1*(p+.5*b-(C+.5*d)),A=u/E;let g=this.option("zoomOpacity")||!1;return g==="auto"&&(g=Math.abs(u/d-E/b)>.1),{x:M,y:x,scale:A,opacity:g}}attach(){const n=this,o=n.instance;o.on("Carousel.change",n.onChange),o.on("Carousel.createSlide",n.onCreateSlide),o.on("Carousel.removeSlide",n.onRemoveSlide),o.on("close",n.onClose)}detach(){const n=this,o=n.instance;o.off("Carousel.change",n.onChange),o.off("Carousel.createSlide",n.onCreateSlide),o.off("Carousel.removeSlide",n.onRemoveSlide),o.off("close",n.onClose)}}Object.defineProperty(Qa,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;const Xi="html",va="image",Ji="map",Nt="youtube",Xt="vimeo",Nn="html5video",ba=(T,n={})=>{const o=new URL(T),s=new URLSearchParams(o.search),c=new URLSearchParams;for(const[h,y]of[...s,...Object.entries(n)]){let C=y+"";if(h==="t"){let S=C.match(/((\d*)m)?(\d*)s?/);S&&c.set("start",60*parseInt(S[2]||"0")+parseInt(S[3]||"0")+"")}else c.set(h,C)}let f=c+"",m=T.match(/#t=((.*)?\d+s)/);return m&&(f+=`#t=${m[1]}`),f},Ol={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},Pl=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class eo extends Tt{onBeforeInitSlide(n,o,s){this.processType(s)}onCreateSlide(n,o,s){this.setContent(s)}onClearContent(n,o){o.xhr&&(o.xhr.abort(),o.xhr=null);const s=o.iframeEl;s&&(s.onload=s.onerror=null,s.src="//about:blank",o.iframeEl=null);const c=o.contentEl,f=o.placeholderEl;if(o.type==="inline"&&c&&f)c.classList.remove("fancybox__content"),getComputedStyle(c).getPropertyValue("display")!=="none"&&(c.style.display="none"),setTimeout(()=>{f&&(c&&f.parentNode&&f.parentNode.insertBefore(c,f),f.remove())},0),o.contentEl=void 0,o.placeholderEl=void 0;else for(;o.el&&o.el.firstChild;)o.el.removeChild(o.el.firstChild)}onSelectSlide(n,o,s){s.state===at.Ready&&this.playVideo()}onUnselectSlide(n,o,s){var c,f;if(s.type===Nn){try{(f=(c=s.el)===null||c===void 0?void 0:c.querySelector("video"))===null||f===void 0||f.pause()}catch{}return}let m;s.type===Xt?m={method:"pause",value:"true"}:s.type===Nt&&(m={event:"command",func:"pauseVideo"}),m&&s.iframeEl&&s.iframeEl.contentWindow&&s.iframeEl.contentWindow.postMessage(JSON.stringify(m),"*"),s.poller&&clearTimeout(s.poller)}onDone(n,o){n.isCurrentSlide(o)&&!n.isClosing()&&this.playVideo()}onRefresh(n,o){o.slides.forEach(s=>{s.el&&(this.resizeIframe(s),this.setAspectRatio(s))})}onMessage(n){try{let o=JSON.parse(n.data);if(n.origin==="https://player.vimeo.com"){if(o.event==="ready")for(let s of Array.from(document.getElementsByClassName("fancybox__iframe")))s instanceof HTMLIFrameElement&&s.contentWindow===n.source&&(s.dataset.ready="true")}else if(n.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&o.event==="onReady"){const s=document.getElementById(o.id);s&&(s.dataset.ready="true")}}catch{}}loadAjaxContent(n){const o=this.instance.optionFor(n,"src")||"";this.instance.showLoading(n);const s=this.instance,c=new XMLHttpRequest;s.showLoading(n),c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&s.state===Qe.Ready&&(s.hideLoading(n),c.status===200?s.setContent(n,c.responseText):s.setError(n,c.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const f=n.ajax||null;c.open(f?"POST":"GET",o+""),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(f),n.xhr=c}setInlineContent(n){let o=null;if(ut(n.src))o=n.src;else if(typeof n.src=="string"){const s=n.src.split("#",2).pop();o=s?document.getElementById(s):null}if(o){if(n.type==="clone"||o.closest(".fancybox__slide")){o=o.cloneNode(!0);const s=o.dataset.animationName;s&&(o.classList.remove(s),delete o.dataset.animationName);let c=o.getAttribute("id");c=c?`${c}--clone`:`clone-${this.instance.id}-${n.index}`,o.setAttribute("id",c)}else if(o.parentNode){const s=document.createElement("div");s.classList.add("fancybox-placeholder"),o.parentNode.insertBefore(s,o),n.placeholderEl=s}this.instance.setContent(n,o)}else this.instance.setError(n,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(n){const{src:o,el:s}=n;if(!o||typeof o!="string"||!s)return;s.classList.add("is-loading");const c=this.instance,f=document.createElement("iframe");f.className="fancybox__iframe",f.setAttribute("id",`fancybox__iframe_${c.id}_${n.index}`);for(const[h,y]of Object.entries(this.optionFor(n,"iframeAttr")||{}))f.setAttribute(h,y);f.onerror=()=>{c.setError(n,"{{IFRAME_ERROR}}")},n.iframeEl=f;const m=this.optionFor(n,"preload");if(n.type!=="iframe"||m===!1)return f.setAttribute("src",n.src+""),c.setContent(n,f,!1),this.resizeIframe(n),void c.revealContent(n);c.showLoading(n),f.onload=()=>{if(!f.src.length)return;const h=f.dataset.ready!=="true";f.dataset.ready="true",this.resizeIframe(n),h?c.revealContent(n):c.hideLoading(n)},f.setAttribute("src",o),c.setContent(n,f,!1)}resizeIframe(n){const{type:o,iframeEl:s}=n;if(o===Nt||o===Xt)return;const c=s==null?void 0:s.parentElement;if(!s||!c)return;let f=n.autoSize;f===void 0&&(f=this.optionFor(n,"autoSize"));let m=n.width||0,h=n.height||0;m&&h&&(f=!1);const y=c&&c.style;if(n.preload!==!1&&f!==!1&&y)try{const C=window.getComputedStyle(c),S=parseFloat(C.paddingLeft)+parseFloat(C.paddingRight),u=parseFloat(C.paddingTop)+parseFloat(C.paddingBottom),d=s.contentWindow;if(d){const p=d.document,v=p.getElementsByTagName(Xi)[0],E=p.body;y.width="",E.style.overflow="hidden",m=m||v.scrollWidth+S,y.width=`${m}px`,E.style.overflow="",y.flex="0 0 auto",y.height=`${E.scrollHeight}px`,h=v.scrollHeight+u}}catch{}if(m||h){const C={flex:"0 1 auto",width:"",height:""};m&&m!=="auto"&&(C.width=`${m}px`),h&&h!=="auto"&&(C.height=`${h}px`),Object.assign(y,C)}}playVideo(){const n=this.instance.getSlide();if(!n)return;const{el:o}=n;if(!o||!o.offsetParent||!this.optionFor(n,"videoAutoplay"))return;if(n.type===Nn)try{const c=o.querySelector("video");if(c){const f=c.play();f!==void 0&&f.then(()=>{}).catch(m=>{c.muted=!0,c.play()})}}catch{}if(n.type!==Nt&&n.type!==Xt)return;const s=()=>{if(n.iframeEl&&n.iframeEl.contentWindow){let c;if(n.iframeEl.dataset.ready==="true")return c=n.type===Nt?{event:"command",func:"playVideo"}:{method:"play",value:"true"},c&&n.iframeEl.contentWindow.postMessage(JSON.stringify(c),"*"),void(n.poller=void 0);n.type===Nt&&(c={event:"listening",id:n.iframeEl.getAttribute("id")},n.iframeEl.contentWindow.postMessage(JSON.stringify(c),"*"))}n.poller=setTimeout(s,250)};s()}processType(n){if(n.html)return n.type=Xi,n.src=n.html,void(n.html="");const o=this.instance.optionFor(n,"src","");if(!o||typeof o!="string")return;let s=n.type,c=null;if(c=o.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const f=this.optionFor(n,Nt),{nocookie:m}=f,h=function(u,d){var p={};for(var v in u)Object.prototype.hasOwnProperty.call(u,v)&&d.indexOf(v)<0&&(p[v]=u[v]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var E=0;for(v=Object.getOwnPropertySymbols(u);E<v.length;E++)d.indexOf(v[E])<0&&Object.prototype.propertyIsEnumerable.call(u,v[E])&&(p[v[E]]=u[v[E]])}return p}(f,["nocookie"]),y=`www.youtube${m?"-nocookie":""}.com`,C=ba(o,h),S=encodeURIComponent(c[2]);n.videoId=S,n.src=`https://${y}/embed/${S}?${C}`,n.thumbSrc=n.thumbSrc||`https://i.ytimg.com/vi/${S}/mqdefault.jpg`,s=Nt}else if(c=o.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const f=ba(o,this.optionFor(n,Xt)),m=encodeURIComponent(c[1]),h=c[4]||"";n.videoId=m,n.src=`https://player.vimeo.com/video/${m}?${h?`h=${h}${f?"&":""}`:""}${f}`,s=Xt}if(!s&&n.triggerEl){const f=n.triggerEl.dataset.type;Pl.includes(f)&&(s=f)}s||typeof o=="string"&&(o.charAt(0)==="#"?s="inline":(c=o.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(s=Nn,n.videoFormat=n.videoFormat||"video/"+(c[1]==="ogv"?"ogg":c[1])):o.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?s=va:o.match(/\.(pdf)((\?|#).*)?$/i)&&(s="pdf")),(c=o.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(n.src=`https://maps.google.${c[1]}/?ll=${(c[2]?c[2]+"&z="+Math.floor(parseFloat(c[3]))+(c[4]?c[4].replace(/^\//,"&"):""):c[4]+"").replace(/\?/,"&")}&output=${c[4]&&c[4].indexOf("layer=c")>0?"svembed":"embed"}`,s=Ji):(c=o.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(n.src=`https://maps.google.${c[1]}/maps?q=${c[2].replace("query=","q=").replace("api=1","")}&output=embed`,s=Ji),s=s||this.instance.option("defaultType"),n.type=s,s===va&&(n.thumbSrc=n.thumbSrc||n.src)}setContent(n){const o=this.instance.optionFor(n,"src")||"";if(n&&n.type&&o){switch(n.type){case Xi:this.instance.setContent(n,o);break;case Nn:const s=this.option("videoTpl");s&&this.instance.setContent(n,s.replace(/\{\{src\}\}/gi,o+"").replace(/\{\{format\}\}/gi,this.optionFor(n,"videoFormat")||"").replace(/\{\{poster\}\}/gi,n.poster||n.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(n);break;case"ajax":this.loadAjaxContent(n);break;case"pdf":case Ji:case Nt:case Xt:n.preload=!1;case"iframe":this.setIframeContent(n)}this.setAspectRatio(n)}}setAspectRatio(n){const o=n.contentEl;if(!(n.el&&o&&n.type&&[Nt,Xt,Nn].includes(n.type)))return;let s,c=n.width||"auto",f=n.height||"auto";if(c==="auto"||f==="auto"){s=this.optionFor(n,"videoRatio");const C=(s+"").match(/(\d+)\s*\/\s?(\d+)/);s=C&&C.length>2?parseFloat(C[1])/parseFloat(C[2]):parseFloat(s+"")}else c&&f&&(s=c/f);if(!s)return;o.style.aspectRatio="",o.style.width="",o.style.height="",o.offsetHeight;const m=o.getBoundingClientRect(),h=m.width||1,y=m.height||1;o.style.aspectRatio=s+"",s<h/y?(f=f==="auto"?y:Math.min(y,f),o.style.width="auto",o.style.height=`${f}px`):(c=c==="auto"?h:Math.min(h,c),o.style.width=`${c}px`,o.style.height="auto")}attach(){const n=this,o=n.instance;o.on("Carousel.beforeInitSlide",n.onBeforeInitSlide),o.on("Carousel.createSlide",n.onCreateSlide),o.on("Carousel.selectSlide",n.onSelectSlide),o.on("Carousel.unselectSlide",n.onUnselectSlide),o.on("Carousel.Panzoom.refresh",n.onRefresh),o.on("done",n.onDone),o.on("clearContent",n.onClearContent),window.addEventListener("message",n.onMessage)}detach(){const n=this,o=n.instance;o.off("Carousel.beforeInitSlide",n.onBeforeInitSlide),o.off("Carousel.createSlide",n.onCreateSlide),o.off("Carousel.selectSlide",n.onSelectSlide),o.off("Carousel.unselectSlide",n.onUnselectSlide),o.off("Carousel.Panzoom.refresh",n.onRefresh),o.off("done",n.onDone),o.off("clearContent",n.onClearContent),window.removeEventListener("message",n.onMessage)}}Object.defineProperty(eo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ol});const si="play",li="pause",jn="ready";class to extends Tt{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:jn}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==jn}onReady(n){this.option("autoStart")&&(n.isInfinite||n.page<n.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var n;this.inHover=!1,!((n=this.instance.panzoom)===null||n===void 0)&&n.isResting&&this.resume()}onTimerEnd(){const n=this.instance;this.state==="play"&&(n.isInfinite||n.page!==n.pages.length-1?n.slideNext():n.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var n;if(!this.option("showProgress"))return null;this.removeProgressBar();const o=this.instance,s=((n=o.pages[o.page])===null||n===void 0?void 0:n.slides)||[];let c=this.option("progressParentEl");if(c||(c=(s.length===1?s[0].el:null)||o.viewport),!c)return null;const f=document.createElement("div");return pe(f,"f-progress"),c.prepend(f),this.progressBar=f,f.offsetHeight,f}set(){const n=this,o=n.instance;if(o.pages.length<2||n.timer)return;const s=n.option("timeout");n.state=si,pe(o.container,"has-autoplay");let c=n.createProgressBar();c&&(c.style.transitionDuration=`${s}ms`,c.style.transform="scaleX(1)"),n.timer=setTimeout(()=>{n.timer=null,n.inHover||n.onTimerEnd()},s),n.emit("set")}clear(){const n=this;n.timer&&(clearTimeout(n.timer),n.timer=null),n.removeProgressBar()}start(){const n=this;if(n.set(),n.state!==jn){if(n.option("pauseOnHover")){const o=n.instance.container;o.addEventListener("mouseenter",n.onMouseEnter,!1),o.addEventListener("mouseleave",n.onMouseLeave,!1)}document.addEventListener("visibilitychange",n.onVisibilityChange,!1),n.emit("start")}}stop(){const n=this,o=n.state,s=n.instance.container;n.clear(),n.state=jn,s.removeEventListener("mouseenter",n.onMouseEnter,!1),s.removeEventListener("mouseleave",n.onMouseLeave,!1),document.removeEventListener("visibilitychange",n.onVisibilityChange,!1),Pe(s,"has-autoplay"),o!==jn&&n.emit("stop")}pause(){const n=this;n.state===si&&(n.state=li,n.clear(),n.emit(li))}resume(){const n=this,o=n.instance;if(o.isInfinite||o.page!==o.pages.length-1)if(n.state!==si){if(n.state===li&&!n.inHover){const s=new Event("resume",{bubbles:!0,cancelable:!0});n.emit("resume",s),s.defaultPrevented||n.set()}}else n.set();else n.stop()}toggle(){this.state===si||this.state===li?this.stop():this.start()}attach(){const n=this,o=n.instance;o.on("ready",n.onReady),o.on("Panzoom.startAnimation",n.onChange),o.on("Panzoom.endAnimation",n.onSettle),o.on("Panzoom.touchMove",n.onChange)}detach(){const n=this,o=n.instance;o.off("ready",n.onReady),o.off("Panzoom.startAnimation",n.onChange),o.off("Panzoom.endAnimation",n.onSettle),o.off("Panzoom.touchMove",n.onChange),n.stop()}}Object.defineProperty(to,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class no extends Tt{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(n){const o=n.carousel;if(!o)return;const s=n.container;s&&(o.options.Autoplay=dt({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{n.emit("startSlideshow")},set:c=>{var f;s.classList.add("has-slideshow"),((f=n.getSlide())===null||f===void 0?void 0:f.state)!==at.Ready&&c.pause()},stop:()=>{s.classList.remove("has-slideshow"),n.isCompact||n.endIdle(),n.emit("endSlideshow")},resume:(c,f)=>{var m,h,y;!f||!f.cancelable||((m=n.getSlide())===null||m===void 0?void 0:m.state)===at.Ready&&(!((y=(h=n.carousel)===null||h===void 0?void 0:h.panzoom)===null||y===void 0)&&y.isResting)||f.preventDefault()}}}),o.attachPlugins({Autoplay:to}),this.ref=o.plugins.Autoplay)}onReady(n){const o=n.carousel,s=this.ref;s&&o&&this.option("playOnStart")&&(o.isInfinite||o.page<o.pages.length-1)&&s.start()}onDone(n,o){const s=this.ref,c=n.carousel;if(!s||!c)return;const f=o.panzoom;f&&f.on("startAnimation",()=>{n.isCurrentSlide(o)&&s.stop()}),n.isCurrentSlide(o)&&s.resume()}onKeydown(n,o){var s;const c=this.ref;c&&o===this.option("key")&&((s=document.activeElement)===null||s===void 0?void 0:s.nodeName)!=="BUTTON"&&c.toggle()}attach(){const n=this,o=n.instance;o.on("Carousel.init",n.onPrepare),o.on("Carousel.ready",n.onReady),o.on("done",n.onDone),o.on("keydown",n.onKeydown)}detach(){const n=this,o=n.instance;o.off("Carousel.init",n.onPrepare),o.off("Carousel.ready",n.onReady),o.off("done",n.onDone),o.off("keydown",n.onKeydown)}}Object.defineProperty(no,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:T=>{var n;return((n=T.instance.container)===null||n===void 0?void 0:n.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||T.instance.container},timeout:3e3}});const io={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var jt;(function(T){T[T.Init=0]="Init",T[T.Ready=1]="Ready",T[T.Hidden=2]="Hidden"})(jt||(jt={}));const ya="isResting",ci="thumbWidth",yn="thumbHeight",xt="thumbClipWidth";let ro=class extends Tt{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:jt.Init})}get isModern(){return this.type==="modern"}onInitSlide(T,n){const o=n.el?n.el.dataset:void 0;o&&(n.thumbSrc=o.thumbSrc||n.thumbSrc||"",n[xt]=parseFloat(o[xt]||"")||n[xt]||0,n[yn]=parseFloat(o.thumbHeight||"")||n[yn]||0),this.addSlide(n)}onInitSlides(){this.build()}onChange(){var T;if(!this.isModern)return;const n=this.container,o=this.instance,s=o.panzoom,c=this.carousel,f=c?c.panzoom:null,m=o.page;if(s&&c&&f){if(s.isDragging){Pe(n,this.cn(ya));let h=((T=c.pages[m])===null||T===void 0?void 0:T.pos)||0;h+=o.getProgress(m)*(this[xt]+this.thumbGap);let y=f.getBounds();-1*h>y.x.min&&-1*h<y.x.max&&f.panTo({x:-1*h,friction:.12})}else Dt(n,this.cn(ya),s.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const T of this.instance.slides||[])this.resizeModernSlide(T);this.shiftModern()}isDisabled(){const T=this.option("minCount")||0;if(T){const o=this.instance;let s=0;for(const c of o.slides||[])c.thumbSrc&&s++;if(s<T)return!0}const n=this.option("type");return["modern","classic"].indexOf(n)<0}getThumb(T){const n=this.option("thumbTpl")||"";return{html:this.instance.localize(n,[["%i",T.index],["%d",T.index+1],["%s",T.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(T){const n=this.carousel;n&&n.addSlide(T.index,this.getThumb(T))}getSlides(){const T=[];for(const n of this.instance.slides||[])T.push(this.getThumb(n));return T}resizeModernSlide(T){this.isModern&&(T[ci]=T[xt]&&T[yn]?Math.round(this[yn]*(T[xt]/T[yn])):this[ci])}updateProps(){const T=this.container;if(!T)return;const n=o=>parseFloat(getComputedStyle(T).getPropertyValue("--f-thumb-"+o))||0;this.thumbGap=n("gap"),this.thumbExtraGap=n("extra-gap"),this[ci]=n("width")||40,this[xt]=n("clip-width")||40,this[yn]=n("height")||40}build(){const T=this;if(T.state!==jt.Init)return;if(T.isDisabled())return void T.emit("disabled");const n=T.instance,o=n.container,s=T.getSlides(),c=T.option("type");T.type=c;const f=T.option("parentEl"),m=T.cn("container"),h=T.cn("track");let y=f==null?void 0:f.querySelector("."+m);y||(y=document.createElement("div"),pe(y,m),f?f.appendChild(y):o.after(y)),pe(y,`is-${c}`),pe(o,T.cn("hasThumbs")),T.container=y,T.updateProps();let C=y.querySelector("."+h);C||(C=document.createElement("div"),pe(C,T.cn("track")),y.appendChild(C)),T.track=C;const S=dt({},{track:C,infinite:!1,center:!0,fill:c==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},T.option("Carousel")||{},{Sync:{target:n},slides:s}),u=new n.constructor(y,S);u.on("createSlide",(d,p)=>{T.setProps(p.index),T.emit("createSlide",p,p.el)}),u.on("ready",()=>{T.shiftModern(),T.emit("ready")}),u.on("refresh",()=>{T.shiftModern()}),u.on("Panzoom.click",(d,p,v)=>{T.onClick(v)}),T.carousel=u,T.state=jt.Ready}onClick(T){T.preventDefault(),T.stopPropagation();const n=this.instance,{pages:o,page:s}=n,c=E=>{if(E){const b=E.closest("[data-carousel-index]");if(b)return[parseInt(b.dataset.carouselIndex||"",10)||0,b]}return[-1,void 0]},f=(E,b)=>{const k=document.elementFromPoint(E,b);return k?c(k):[-1,void 0]};let[m,h]=c(T.target);if(m>-1)return;const y=this[xt],C=T.clientX,S=T.clientY;let[u,d]=f(C-y,S),[p,v]=f(C+y,S);d&&v?(m=Math.abs(C-d.getBoundingClientRect().right)<Math.abs(C-v.getBoundingClientRect().left)?u:p,m===s&&(m=m===u?p:u)):d?m=u:v&&(m=p),m>-1&&o[m]&&n.slideTo(m)}getShift(T){var n;const o=this,{instance:s}=o,c=o.carousel;if(!s||!c)return 0;const f=o[ci],m=o[xt],h=o.thumbGap,y=o.thumbExtraGap;if(!(!((n=c.slides[T])===null||n===void 0)&&n.el))return 0;const C=.5*(f-m),S=s.pages.length-1;let u=s.getProgress(0),d=s.getProgress(S),p=s.getProgress(T,!1,!0),v=0,E=C+y+h;const b=u<0&&u>-1,k=d>0&&d<1;return T===0?(v=E*Math.abs(u),k&&u===1&&(v-=E*Math.abs(d))):T===S?(v=E*Math.abs(d)*-1,b&&d===-1&&(v+=E*Math.abs(u))):b||k?(v=-1*E,v+=E*Math.abs(u),v+=E*(1-Math.abs(d))):v=E*p,v}setProps(T){var n;const o=this;if(!o.isModern)return;const{instance:s}=o,c=o.carousel;if(s&&c){const f=(n=c.slides[T])===null||n===void 0?void 0:n.el;if(f&&f.childNodes.length){let m=te(1-Math.abs(s.getProgress(T))),h=te(o.getShift(T));f.style.setProperty("--progress",m?m+"":""),f.style.setProperty("--shift",h+"")}}}shiftModern(){const T=this;if(!T.isModern)return;const{instance:n,track:o}=T,s=n.panzoom,c=T.carousel;if(!(n&&o&&s&&c)||s.state===Re.Init||s.state===Re.Destroy)return;for(const m of n.slides)T.setProps(m.index);let f=(T[xt]+T.thumbGap)*(c.slides.length||0);o.style.setProperty("--width",f+"")}cleanup(){const T=this;T.carousel&&T.carousel.destroy(),T.carousel=null,T.container&&T.container.remove(),T.container=null,T.track&&T.track.remove(),T.track=null,T.state=jt.Init,Pe(T.instance.container,T.cn("hasThumbs"))}attach(){const T=this,n=T.instance;n.on("initSlide",T.onInitSlide),n.state===Ke.Init?n.on("initSlides",T.onInitSlides):T.onInitSlides(),n.on(["change","Panzoom.afterTransform"],T.onChange),n.on("Panzoom.refresh",T.onRefresh)}detach(){const T=this,n=T.instance;n.off("initSlide",T.onInitSlide),n.off("initSlides",T.onInitSlides),n.off(["change","Panzoom.afterTransform"],T.onChange),n.off("Panzoom.refresh",T.onRefresh),T.cleanup()}};Object.defineProperty(ro,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:io});const Rl=Object.assign(Object.assign({},io),{key:"t",showOnStart:!0,parentEl:null}),wa="is-masked",Ea="aria-hidden";class ao extends Tt{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const n=this.ref;return n&&!n.isDisabled()}get isHidden(){return this.hidden}onClick(n,o){o.stopPropagation()}onCreateSlide(n,o){var s,c,f;const m=((f=(c=(s=this.instance)===null||s===void 0?void 0:s.carousel)===null||c===void 0?void 0:c.slides[o.index])===null||f===void 0?void 0:f.type)||"",h=o.el;if(h&&m){let y=`for-${m}`;["video","youtube","vimeo","html5video"].includes(m)&&(y+=" for-video"),pe(h,y)}}onInit(){var n;const o=this,s=o.instance,c=s.carousel;if(o.ref||!c)return;const f=o.option("parentEl")||s.footer||s.container;if(!f)return;const m=dt({},o.options,{parentEl:f,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:s.option("Carousel.friction")||0}},on:{ready:h=>{const y=h.container;y&&this.hidden&&(o.refresh(),y.style.transition="none",o.hide(),y.offsetHeight,queueMicrotask(()=>{y.style.transition="",o.show()}))}}});m.Carousel=m.Carousel||{},m.Carousel.on=dt(((n=o.options.Carousel)===null||n===void 0?void 0:n.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),c.options.Thumbs=m,c.attachPlugins({Thumbs:ro}),o.ref=c.plugins.Thumbs,o.option("showOnStart")||(o.ref.state=jt.Hidden,o.hidden=!0)}onResize(){var n;const o=(n=this.ref)===null||n===void 0?void 0:n.container;o&&(o.style.maxHeight="")}onKeydown(n,o){const s=this.option("key");s&&s===o&&this.toggle()}toggle(){const n=this.ref;if(n&&!n.isDisabled())return n.state===jt.Hidden?(n.state=jt.Init,void n.build()):void(this.hidden?this.show():this.hide())}show(){const n=this.ref;if(!n||n.isDisabled())return;const o=n.container;o&&(this.refresh(),o.offsetHeight,o.removeAttribute(Ea),o.classList.remove(wa),this.hidden=!1)}hide(){const n=this.ref,o=n&&n.container;o&&(this.refresh(),o.offsetHeight,o.classList.add(wa),o.setAttribute(Ea,"true")),this.hidden=!0}refresh(){const n=this.ref;if(!n||!n.state)return;const o=n.container,s=(o==null?void 0:o.firstChild)||null;o&&s&&s.childNodes.length&&(o.style.maxHeight=`${s.getBoundingClientRect().height}px`)}attach(){const n=this,o=n.instance;o.state===Qe.Init?o.on("Carousel.init",n.onInit):n.onInit(),o.on("resize",n.onResize),o.on("keydown",n.onKeydown)}detach(){var n;const o=this,s=o.instance;s.off("Carousel.init",o.onInit),s.off("resize",o.onResize),s.off("keydown",o.onKeydown),(n=s.carousel)===null||n===void 0||n.detachPlugins(["Thumbs"]),o.ref=null}}Object.defineProperty(ao,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Rl});const Qi={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var nn;(function(T){T[T.Init=0]="Init",T[T.Ready=1]="Ready",T[T.Disabled=2]="Disabled"})(nn||(nn={}));const Hl={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},Il={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Sa="has-toolbar",er="fancybox__toolbar";class oo extends Tt{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:nn.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(n){var o;if(!n.carousel)return;let s=this.option("display"),c=this.option("absolute"),f=this.option("enabled");if(f==="auto"){const C=this.instance.carousel;let S=0;if(C)for(const u of C.slides)(u.panzoom||u.type==="image")&&S++;S||(f=!1)}f||(s=void 0);let m=0;const h={left:[],middle:[],right:[]};if(s)for(const C of["left","middle","right"])for(const S of s[C]){const u=this.createEl(S);u&&((o=h[C])===null||o===void 0||o.push(u),m++)}let y=null;if(m&&(y=this.createContainer()),y){for(const[C,S]of Object.entries(h)){const u=document.createElement("div");pe(u,er+"__column is-"+C);for(const d of S)u.appendChild(d);c!=="auto"||C!=="middle"||S.length||(c=!0),y.appendChild(u)}c===!0&&pe(y,"is-absolute"),this.state=nn.Ready,this.onRefresh()}else this.state=nn.Disabled}onClick(n){var o,s;const c=this.instance,f=c.getSlide(),m=f==null?void 0:f.panzoom,h=n.target,y=h&&ut(h)?h.dataset:null;if(!y)return;if(y.fancyboxToggleThumbs!==void 0)return n.preventDefault(),n.stopPropagation(),void((o=c.plugins.Thumbs)===null||o===void 0||o.toggle());if(y.fancyboxToggleFullscreen!==void 0)return n.preventDefault(),n.stopPropagation(),void this.instance.toggleFullscreen();if(y.fancyboxToggleSlideshow!==void 0){n.preventDefault(),n.stopPropagation();const u=(s=c.carousel)===null||s===void 0?void 0:s.plugins.Autoplay;let d=u.isActive;return m&&m.panMode==="mousemove"&&!d&&m.reset(),void(d?u.stop():u.start())}const C=y.panzoomAction,S=y.panzoomChange;if((S||C)&&(n.preventDefault(),n.stopPropagation()),S){let u={};try{u=JSON.parse(S)}catch{}m&&m.applyChange(u)}else C&&m&&m[C]&&m[C]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const n=this.container;if(!n)return;const o=this.instance.getSlide();if(!o||o.state!==at.Ready)return;const s=o&&!o.error&&o.panzoom;for(const m of n.querySelectorAll("[data-panzoom-action]"))s?(m.removeAttribute("disabled"),m.removeAttribute("tabindex")):(m.setAttribute("disabled",""),m.setAttribute("tabindex","-1"));let c=s&&s.canZoomIn(),f=s&&s.canZoomOut();for(const m of n.querySelectorAll('[data-panzoom-action="zoomIn"]'))c?(m.removeAttribute("disabled"),m.removeAttribute("tabindex")):(m.setAttribute("disabled",""),m.setAttribute("tabindex","-1"));for(const m of n.querySelectorAll('[data-panzoom-action="zoomOut"]'))f?(m.removeAttribute("disabled"),m.removeAttribute("tabindex")):(m.setAttribute("disabled",""),m.setAttribute("tabindex","-1"));for(const m of n.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){f||c?(m.removeAttribute("disabled"),m.removeAttribute("tabindex")):(m.setAttribute("disabled",""),m.setAttribute("tabindex","-1"));const h=m.querySelector("g");h&&(h.style.display=c?"":"none")}}onDone(n,o){var s;(s=o.panzoom)===null||s===void 0||s.on("afterTransform",()=>{this.instance.isCurrentSlide(o)&&this.onRefresh()}),this.instance.isCurrentSlide(o)&&this.onRefresh()}createContainer(){const n=this.instance.container;if(!n)return null;const o=this.option("parentEl")||n;let s=o.querySelector("."+er);return s||(s=document.createElement("div"),pe(s,er),o.prepend(s)),s.addEventListener("click",this.onClick,{passive:!1,capture:!0}),n&&pe(n,Sa),this.container=s,s}createEl(n){const o=this.instance,s=o.carousel;if(!s||n==="toggleFS"||n==="fullscreen"&&!Ka())return null;let c=null;const f=s.slides.length||0;let m=0,h=0;for(const C of s.slides)(C.panzoom||C.type==="image")&&m++,(C.type==="image"||C.downloadSrc)&&h++;if(f<2&&["infobar","prev","next"].includes(n))return c;if(Qi[n]!==void 0&&!m||n==="download"&&!h)return null;if(n==="thumbs"){const C=o.plugins.Thumbs;if(!C||!C.isEnabled)return null}if(n==="slideshow"&&(!s.plugins.Autoplay||f<2))return null;if(Qi[n]!==void 0){const C=Qi[n];c=document.createElement("button"),c.setAttribute("title",this.instance.localize(`{{${n.toUpperCase()}}}`)),pe(c,"f-button"),C.action&&(c.dataset.panzoomAction=C.action),C.change&&(c.dataset.panzoomChange=JSON.stringify(C.change)),c.appendChild(At(this.instance.localize(C.icon)))}else{const C=(this.option("items")||[])[n];C&&(c=At(this.instance.localize(C.tpl)),typeof C.click=="function"&&c.addEventListener("click",S=>{S.preventDefault(),S.stopPropagation(),typeof C.click=="function"&&C.click.call(this,this,S)}))}const y=c==null?void 0:c.querySelector("svg");if(y)for(const[C,S]of Object.entries(Il))y.getAttribute(C)||y.setAttribute(C,String(S));return c}removeContainer(){const n=this.container;n&&n.remove(),this.container=null,this.state=nn.Disabled;const o=this.instance.container;o&&Pe(o,Sa)}attach(){const n=this,o=n.instance;o.on("Carousel.initSlides",n.onReady),o.on("done",n.onDone),o.on(["reveal","Carousel.change"],n.onChange),n.onReady(n.instance)}detach(){const n=this,o=n.instance;o.off("Carousel.initSlides",n.onReady),o.off("done",n.onDone),o.off(["reveal","Carousel.change"],n.onChange),n.removeContainer()}}Object.defineProperty(oo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Hl});const Nl={Hash:class extends Tt{onReady(){Bn=!1}onChange(T){tn&&clearTimeout(tn);const{hash:n}=Ga(),{hash:o}=gi(),s=T.isOpeningSlide(T.getSlide());s&&(ma=o===n?"":o),n&&n!==o&&(tn=setTimeout(()=>{try{if(T.state===Qe.Ready){let c="replaceState";s&&!ai&&(c="pushState",ai=!0),window.history[c]({},document.title,window.location.pathname+window.location.search+n)}}catch{}},300))}onClose(T){if(tn&&clearTimeout(tn),!Bn&&ai)return ai=!1,Bn=!1,void window.history.back();if(!Bn)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(ma||""))}catch{}}attach(){const T=this.instance;T.on("ready",this.onReady),T.on(["Carousel.ready","Carousel.change"],this.onChange),T.on("close",this.onClose)}detach(){const T=this.instance;T.off("ready",this.onReady),T.off(["Carousel.ready","Carousel.change"],this.onChange),T.off("close",this.onClose)}static parseURL(){return gi()}static startFromUrl(){Za()}static destroy(){window.removeEventListener("hashchange",Ja,!1)}},Html:eo,Images:Qa,Slideshow:no,Thumbs:ao,Toolbar:oo},Ca="with-fancybox",tr="hide-scrollbar",Ta="--fancybox-scrollbar-compensate",ka="--fancybox-body-margin",nr="aria-hidden",ir="is-using-tab",rr="is-animated",Ma="is-compact",xa="is-loading",ar="is-opening",ui="has-caption",wn="disabled",Jt="tabindex",_a="download",or="href",En="src",$t=T=>typeof T=="string",La=function(){var T=window.getSelection();return!!T&&T.type==="Range"};let vt,bt=null,Qt=null,Aa=0,Da=0,Oa=0,Pa=0;const Sn=new Map;let jl=0;class Ae extends mr{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(n=[],o={},s={}){super(o),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Qe.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),vt||(vt=Ka()),this.id=o.id||++jl,Sn.set(this.id,this),this.userSlides=n,this.userPlugins=s,queueMicrotask(()=>{this.init()})}init(){if(this.state===Qe.Destroy)return;this.state=Qe.Init,this.attachPlugins(Object.assign(Object.assign({},Ae.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!Fn)return;const o=document,s=o.body,c=o.documentElement;if(s.classList.contains(tr))return;let f=window.innerWidth-c.getBoundingClientRect().width;const m=parseFloat(window.getComputedStyle(s).marginRight);f<0&&(f=0),c.style.setProperty(Ta,`${f}px`),m&&s.style.setProperty(ka,`${m}px`),s.classList.add(tr)})(),this.initLayout(),this.scale();const n=()=>{this.initCarousel(this.userSlides),this.state=Qe.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(nr,"false")},16)};this.option("Fullscreen.autoStart")&&vt&&!vt.isFullscreen()?vt.request().then(()=>{this.startedFs=!0,n()}).catch(()=>n()):n()}initLayout(){var n,o;const s=this.option("parentEl")||document.body,c=At(this.localize(this.option("tpl.main")||""));if(c){if(c.setAttribute("id",`fancybox-${this.id}`),c.setAttribute("aria-label",this.localize("{{MODAL}}")),c.classList.toggle(Ma,this.isCompact),pe(c,this.option("mainClass")||""),pe(c,ar),this.container=c,this.footer=c.querySelector(".fancybox__footer"),s.appendChild(c),pe(document.documentElement,Ca),bt&&Qt||(bt=document.createElement("span"),pe(bt,"fancybox-focus-guard"),bt.setAttribute(Jt,"0"),bt.setAttribute(nr,"true"),bt.setAttribute("aria-label","Focus guard"),Qt=bt.cloneNode(),(n=c.parentElement)===null||n===void 0||n.insertBefore(bt,c),(o=c.parentElement)===null||o===void 0||o.append(Qt)),c.addEventListener("mousedown",f=>{Aa=f.pageX,Da=f.pageY,Pe(c,ir)}),this.option("closeExisting"))for(const f of Sn.values())f.id!==this.id&&f.close();else this.option("animated")&&(pe(c,rr),setTimeout(()=>{this.isClosing()||Pe(c,rr)},350));this.emit("initLayout")}}initCarousel(n){const o=this.container;if(!o)return;const s=o.querySelector(".fancybox__carousel");if(!s)return;const c=this.carousel=new rn(s,dt({},{slides:n,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));c.on("*",(f,m,...h)=>{this.emit(`Carousel.${m}`,f,...h)}),c.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(f,m,h)=>{this.clearContent(h),h.state=void 0}),c.on("Panzoom.touchStart",()=>{var f,m;this.isCompact||this.endIdle(),!((f=document.activeElement)===null||f===void 0)&&f.closest(".f-thumbs")&&((m=this.container)===null||m===void 0||m.focus())}),c.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(c.on("Panzoom.afterTransform",(f,m)=>{const h=this.getSlide();if(h&&cr(h.el))return;const y=this.container;if(y){const C=Math.abs(m.current.f),S=C<1?"":Math.max(.5,Math.min(1,1-C/m.contentRect.fitHeight*1.5));y.style.setProperty("--fancybox-ts",S?"0s":""),y.style.setProperty("--fancybox-opacity",S+"")}}),c.on("Panzoom.touchEnd",(f,m,h)=>{var y;const C=this.getSlide();if(C&&cr(C.el)||m.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((y=document.activeElement)===null||y===void 0?void 0:y.nodeName)!==-1)return;const S=Math.abs(m.dragOffset.y);m.lockedAxis==="y"&&(S>=200||S>=50&&m.dragOffset.time<300)&&(h&&h.cancelable&&h.preventDefault(),this.close(h,"f-throwOut"+(m.current.f<0?"Up":"Down")))})),c.on("change",f=>{var m;let h=(m=this.getSlide())===null||m===void 0?void 0:m.triggerEl;if(h){const y=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:f.page});h.dispatchEvent(y)}}),c.on(["refresh","change"],f=>{const m=this.container;if(!m)return;for(const C of m.querySelectorAll("[data-fancybox-current-index]"))C.innerHTML=f.page+1;for(const C of m.querySelectorAll("[data-fancybox-count]"))C.innerHTML=f.pages.length;if(!f.isInfinite){for(const C of m.querySelectorAll("[data-fancybox-next]"))f.page<f.pages.length-1?(C.removeAttribute(wn),C.removeAttribute(Jt)):(C.setAttribute(wn,""),C.setAttribute(Jt,"-1"));for(const C of m.querySelectorAll("[data-fancybox-prev]"))f.page>0?(C.removeAttribute(wn),C.removeAttribute(Jt)):(C.setAttribute(wn,""),C.setAttribute(Jt,"-1"))}const h=this.getSlide();if(!h)return;let y=h.downloadSrc||"";y||h.type!=="image"||h.error||!$t(h[En])||(y=h[En]);for(const C of m.querySelectorAll("[data-fancybox-download]")){const S=h.downloadFilename;y?(C.removeAttribute(wn),C.removeAttribute(Jt),C.setAttribute(or,y),C.setAttribute(_a,S||y),C.setAttribute("target","_blank")):(C.setAttribute(wn,""),C.setAttribute(Jt,"-1"),C.removeAttribute(or),C.removeAttribute(_a))}}),this.emit("initCarousel")}attachEvents(){const n=this,o=n.container;if(!o)return;o.addEventListener("click",n.onClick,{passive:!1,capture:!1}),o.addEventListener("wheel",n.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",n.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",n.onVisibilityChange,!1),document.addEventListener("mousemove",n.onMousemove),n.option("trapFocus")&&document.addEventListener("focus",n.onFocus,!0),window.addEventListener("resize",n.onResize);const s=window.visualViewport;s&&(s.addEventListener("scroll",n.onResize),s.addEventListener("resize",n.onResize))}detachEvents(){const n=this,o=n.container;if(!o)return;document.removeEventListener("keydown",n.onKeydown,{passive:!1,capture:!0}),o.removeEventListener("wheel",n.onWheel,{passive:!1,capture:!1}),o.removeEventListener("click",n.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",n.onMousemove),window.removeEventListener("resize",n.onResize);const s=window.visualViewport;s&&(s.removeEventListener("resize",n.onResize),s.removeEventListener("scroll",n.onResize)),document.removeEventListener("visibilitychange",n.onVisibilityChange,!1),document.removeEventListener("focus",n.onFocus,!0)}scale(){const n=this.container;if(!n)return;const o=window.visualViewport,s=Math.max(1,(o==null?void 0:o.scale)||1);let c="",f="",m="";if(o&&s>1){let h=`${o.offsetLeft}px`,y=`${o.offsetTop}px`;c=o.width*s+"px",f=o.height*s+"px",m=`translate3d(${h}, ${y}, 0) scale(${1/s})`}n.style.transform=m,n.style.width=c,n.style.height=f}onClick(n){var o;const{container:s,isCompact:c}=this;if(!s||this.isClosing())return;!c&&this.option("idle")&&this.resetIdle();const f=n.composedPath()[0];if(f.closest(".fancybox-spinner")||f.closest("[data-fancybox-close]"))return n.preventDefault(),void this.close(n);if(f.closest("[data-fancybox-prev]"))return n.preventDefault(),void this.prev();if(f.closest("[data-fancybox-next]"))return n.preventDefault(),void this.next();if(n.type==="click"&&n.detail===0||Math.abs(n.pageX-Aa)>30||Math.abs(n.pageY-Da)>30)return;const m=document.activeElement;if(La()&&m&&s.contains(m))return;if(c&&((o=this.getSlide())===null||o===void 0?void 0:o.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",n),n.defaultPrevented)return;let h=!1;if(f.closest(".fancybox__content")){if(m){if(m.closest("[contenteditable]"))return;f.matches(Zi)||m.blur()}if(La())return;h=this.option("contentClick")}else f.closest(".fancybox__carousel")&&!f.matches(Zi)&&(h=this.option("backdropClick"));h==="close"?(n.preventDefault(),this.close(n)):h==="next"?(n.preventDefault(),this.next()):h==="prev"&&(n.preventDefault(),this.prev())}onWheel(n){const o=n.target;let s=this.option("wheel",n);o.closest(".fancybox__thumbs")&&(s="slide");const c=s==="slide",f=[-n.deltaX||0,-n.deltaY||0,-n.detail||0].reduce(function(y,C){return Math.abs(C)>Math.abs(y)?C:y}),m=Math.max(-1,Math.min(1,f)),h=Date.now();this.pwt&&h-this.pwt<300?c&&n.preventDefault():(this.pwt=h,this.emit("wheel",n,m),n.defaultPrevented||(s==="close"?(n.preventDefault(),this.close(n)):s==="slide"&&(pi(o)||(n.preventDefault(),this[m>0?"prev":"next"]()))))}onScroll(){window.scrollTo(Oa,Pa)}onKeydown(n){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const o=n.key,s=this.option("keyboard");if(!s)return;const c=n.composedPath()[0],f=document.activeElement&&document.activeElement.classList,m=f&&f.contains("f-button")||c.dataset.carouselPage||c.dataset.carouselIndex;if(o!=="Escape"&&!m&&ut(c)&&(c.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(c.nodeName)!==-1)||(n.key==="Tab"?pe(this.container,ir):Pe(this.container,ir),n.ctrlKey||n.altKey||n.shiftKey))return;this.emit("keydown",o,n);const h=s[o];h&&typeof this[h]=="function"&&(n.preventDefault(),this[h]())}onResize(){const n=this.container;if(!n)return;const o=this.isCompact;n.classList.toggle(Ma,o),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(n){this.isTopmost()&&this.checkFocus(n)}onMousemove(n){this.prevMouseMoveEvent=n,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(n){const o=this.optionFor(n,"closeButton")||!1;if(o==="auto"){const c=this.plugins.Toolbar;if(c&&c.state===nn.Ready)return}if(!o||!n.contentEl||n.closeBtnEl)return;const s=this.option("tpl.closeButton");if(s){const c=At(this.localize(s));n.closeBtnEl=n.contentEl.appendChild(c),n.el&&pe(n.el,"has-close-btn")}}manageCaption(n=void 0){var o,s;const c="fancybox__caption",f=this.container;if(!f)return;Pe(f,ui);const m=this.isCompact||this.option("commonCaption"),h=!m;if(this.caption&&this.stop(this.caption),h&&this.caption&&(this.caption.remove(),this.caption=null),m&&!this.caption)for(const u of((o=this.carousel)===null||o===void 0?void 0:o.slides)||[])u.captionEl&&(u.captionEl.remove(),u.captionEl=void 0,Pe(u.el,ui),(s=u.el)===null||s===void 0||s.removeAttribute("aria-labelledby"));if(n||(n=this.getSlide()),!n||m&&!this.isCurrentSlide(n))return;const y=n.el;let C=this.optionFor(n,"caption","");if(!C)return void(m&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let S=null;if(h){if(S=n.captionEl||null,y&&!S){const u=c+`_${this.id}_${n.index}`;S=document.createElement("div"),pe(S,c),S.setAttribute("id",u),n.captionEl=y.appendChild(S),pe(y,ui),y.setAttribute("aria-labelledby",u)}}else S=this.caption,S||(S=f.querySelector("."+c)),!S&&(S=document.createElement("div"),S.dataset.fancyboxCaption="",pe(S,c),(this.footer||f).prepend(S)),pe(f,ui),this.caption=S;S&&(S.innerHTML="",$t(C)||typeof C=="number"?S.innerHTML=C+"":C instanceof HTMLElement&&S.appendChild(C))}checkFocus(n){this.focus(n)}focus(n){var o;if(this.ignoreFocusChange)return;const s=document.activeElement||null,c=(n==null?void 0:n.target)||null,f=this.container,m=(o=this.carousel)===null||o===void 0?void 0:o.viewport;if(!f||!m||!n&&s&&f.contains(s))return;const h=this.getSlide(),y=h&&h.state===at.Ready?h.el:null;if(!y||y.contains(s)||f===s)return;n&&n.cancelable&&n.preventDefault(),this.ignoreFocusChange=!0;const C=Array.from(f.querySelectorAll(Zi));let S=[],u=null;for(let p of C){const v=!p.offsetParent||!!p.closest('[aria-hidden="true"]'),E=y&&y.contains(p),b=!m.contains(p);if(p===f||(E||b)&&!v){S.push(p);const k=p.dataset.origTabindex;k!==void 0&&k&&(p.tabIndex=parseFloat(k)),p.removeAttribute("data-orig-tabindex"),!p.hasAttribute("autoFocus")&&u||(u=p)}else{const k=p.dataset.origTabindex===void 0?p.getAttribute("tabindex")||"":p.dataset.origTabindex;k&&(p.dataset.origTabindex=k),p.tabIndex=-1}}let d=null;n?(!c||S.indexOf(c)<0)&&(d=u||f,S.length&&(s===Qt?d=S[0]:this.lastFocus!==f&&s!==bt||(d=S[S.length-1]))):d=h&&h.type==="image"?f:u||f,d&&pa(d),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const n=this.carousel;n&&n.pages.length>1&&n.slideNext()}prev(){const n=this.carousel;n&&n.pages.length>1&&n.slidePrev()}jumpTo(...n){this.carousel&&this.carousel.slideTo(...n)}isTopmost(){var n;return((n=Ae.getInstance())===null||n===void 0?void 0:n.id)==this.id}animate(n=null,o="",s){if(!n||!o)return void(s&&s());this.stop(n);const c=f=>{f.target===n&&n.dataset.animationName&&(n.removeEventListener("animationend",c),delete n.dataset.animationName,s&&s(),Pe(n,o))};n.dataset.animationName=o,n.addEventListener("animationend",c),pe(n,o)}stop(n){n&&n.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:n}))}setContent(n,o="",s=!0){if(this.isClosing())return;const c=n.el;if(!c)return;let f=null;if(ut(o)?f=o:(f=At(o+""),ut(f)||(f=document.createElement("div"),f.innerHTML=o+"")),["img","picture","iframe","video","audio"].includes(f.nodeName.toLowerCase())){const m=document.createElement("div");m.appendChild(f),f=m}ut(f)&&n.filter&&!n.error&&(f=f.querySelector(n.filter)),f&&ut(f)?(pe(f,"fancybox__content"),n.id&&f.setAttribute("id",n.id),c.classList.add(`has-${n.error?"error":n.type||"unknown"}`),c.prepend(f),f.style.display==="none"&&(f.style.display=""),getComputedStyle(f).getPropertyValue("display")==="none"&&(f.style.display=n.display||this.option("defaultDisplay")||"flex"),n.contentEl=f,s&&this.revealContent(n),this.manageCloseBtn(n),this.manageCaption(n)):this.setError(n,"{{ELEMENT_NOT_FOUND}}")}revealContent(n,o){const s=n.el,c=n.contentEl;s&&c&&(this.emit("reveal",n),this.hideLoading(n),n.state=at.Opening,(o=this.isOpeningSlide(n)?o===void 0?this.optionFor(n,"showClass"):o:"f-fadeIn")?this.animate(c,o,()=>{this.done(n)}):this.done(n))}done(n){this.isClosing()||(n.state=at.Ready,this.emit("done",n),pe(n.el,"is-done"),this.isCurrentSlide(n)&&this.option("autoFocus")&&queueMicrotask(()=>{var o;(o=n.panzoom)===null||o===void 0||o.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(n)&&(Pe(this.container,ar),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(n){const o=this.getSlide();return!(!n||!o)&&o.index===n.index}isOpeningSlide(n){var o,s;return((o=this.carousel)===null||o===void 0?void 0:o.prevPage)===null&&n&&n.index===((s=this.getSlide())===null||s===void 0?void 0:s.index)}showLoading(n){n.state=at.Loading;const o=n.el;o&&(pe(o,xa),this.emit("loading",n),n.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!n.spinnerEl&&n.state===at.Loading){let s=At(gr);pe(s,"fancybox-spinner"),n.spinnerEl=s,o.prepend(s),this.animate(s,"f-fadeIn")}},250))}hideLoading(n){const o=n.el;if(!o)return;const s=n.spinnerEl;this.isClosing()?s==null||s.remove():(Pe(o,xa),s&&this.animate(s,"f-fadeOut",()=>{s.remove()}),n.state===at.Loading&&(this.emit("loaded",n),n.state=at.Ready))}setError(n,o){if(this.isClosing())return;const s=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",s,n),s.defaultPrevented)return;n.error=o,this.hideLoading(n),this.clearContent(n);const c=document.createElement("div");c.classList.add("fancybox-error"),c.innerHTML=this.localize(o||"<p>{{ERROR}}</p>"),this.setContent(n,c)}clearContent(n){if(n.state===void 0)return;this.emit("clearContent",n),n.contentEl&&(n.contentEl.remove(),n.contentEl=void 0);const o=n.el;o&&(Pe(o,"has-error"),Pe(o,"has-unknown"),Pe(o,`has-${n.type||"unknown"}`)),n.closeBtnEl&&n.closeBtnEl.remove(),n.closeBtnEl=void 0,n.captionEl&&n.captionEl.remove(),n.captionEl=void 0,n.spinnerEl&&n.spinnerEl.remove(),n.spinnerEl=void 0}getSlide(){var n;const o=this.carousel;return((n=o==null?void 0:o.pages[o==null?void 0:o.page])===null||n===void 0?void 0:n.slides[0])||void 0}close(n,o){if(this.isClosing())return;const s=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",s,n),s.defaultPrevented)return;n&&n.cancelable&&(n.preventDefault(),n.stopPropagation());const c=()=>{this.proceedClose(n,o)};this.startedFs&&vt&&vt.isFullscreen()?Promise.resolve(vt.exit()).then(()=>c()):c()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(n=!1){const o=()=>{this.clearIdle(),this.idle=!0,pe(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(n)o();else{const s=this.option("idle");s&&(this.idleTimer=setTimeout(o,s))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,Pe(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){vt&&(vt.isFullscreen()?vt.exit():vt.request().then(()=>{this.startedFs=!0}))}isClosing(){return[Qe.Closing,Qe.CustomClosing,Qe.Destroy].includes(this.state)}proceedClose(n,o){var s,c;this.state=Qe.Closing,this.clearIdle(),this.detachEvents();const f=this.container,m=this.carousel,h=this.getSlide(),y=h&&this.option("placeFocusBack")?h.triggerEl||this.option("triggerEl"):null;if(y&&(Ya(y)?pa(y):y.focus()),f&&(Pe(f,ar),pe(f,"is-closing"),f.setAttribute(nr,"true"),this.option("animated")&&pe(f,rr),f.style.pointerEvents="none"),m){m.clearTransitions(),(s=m.panzoom)===null||s===void 0||s.destroy(),(c=m.plugins.Navigation)===null||c===void 0||c.detach();for(const C of m.slides){C.state=at.Closing,this.hideLoading(C);const S=C.contentEl;S&&this.stop(S);const u=C==null?void 0:C.panzoom;u&&(u.stop(),u.detachEvents(),u.detachObserver()),this.isCurrentSlide(C)||m.emit("removeSlide",C)}}Oa=window.scrollX,Pa=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",n),this.state!==Qe.CustomClosing?(o===void 0&&h&&(o=this.optionFor(h,"hideClass")),o&&h?(this.animate(h.contentEl,o,()=>{m&&m.emit("removeSlide",h)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var n;if(this.state===Qe.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=Qe.Destroy,(n=this.carousel)===null||n===void 0||n.destroy();const o=this.container;o&&o.remove(),Sn.delete(this.id);const s=Ae.getInstance();s?s.focus():(bt&&(bt.remove(),bt=null),Qt&&(Qt.remove(),Qt=null),Pe(document.documentElement,Ca),(()=>{if(!Fn)return;const c=document,f=c.body;f.classList.remove(tr),f.style.setProperty(ka,""),c.documentElement.style.setProperty(Ta,"")})(),this.emit("destroy"))}static bind(n,o,s){if(!Fn)return;let c,f="",m={};if(n===void 0?c=document.body:$t(n)?(c=document.body,f=n,typeof o=="object"&&(m=o||{})):(c=n,$t(o)&&(f=o),typeof s=="object"&&(m=s||{})),!c||!ut(c))return;f=f||"[data-fancybox]";const h=Ae.openers.get(c)||new Map;h.set(f,m),Ae.openers.set(c,h),h.size===1&&c.addEventListener("click",Ae.fromEvent)}static unbind(n,o){let s,c="";if($t(n)?(s=document.body,c=n):(s=n,$t(o)&&(c=o)),!s)return;const f=Ae.openers.get(s);f&&c&&f.delete(c),c&&f||(Ae.openers.delete(s),s.removeEventListener("click",Ae.fromEvent))}static destroy(){let n;for(;n=Ae.getInstance();)n.destroy();for(const o of Ae.openers.keys())o.removeEventListener("click",Ae.fromEvent);Ae.openers=new Map}static fromEvent(n){if(n.defaultPrevented||n.button&&n.button!==0||n.ctrlKey||n.metaKey||n.shiftKey)return;let o=n.composedPath()[0];const s=o.closest("[data-fancybox-trigger]");if(s){const v=s.dataset.fancyboxTrigger||"",E=document.querySelectorAll(`[data-fancybox="${v}"]`),b=parseInt(s.dataset.fancyboxIndex||"",10)||0;o=E[b]||o}if(!(o&&o instanceof Element))return;let c,f,m,h;if([...Ae.openers].reverse().find(([v,E])=>!(!v.contains(o)||![...E].reverse().find(([b,k])=>{let M=o.closest(b);return!!M&&(c=v,f=b,m=M,h=k,!0)}))),!c||!f||!m)return;h=h||{},n.preventDefault(),o=m;let y=[],C=dt({},dr,h);C.event=n,C.triggerEl=o,C.delegate=s;const S=C.groupAll,u=C.groupAttr,d=u&&o?o.getAttribute(`${u}`):"";if((!o||d||S)&&(y=[].slice.call(c.querySelectorAll(f))),o&&!S&&(y=d?y.filter(v=>v.getAttribute(`${u}`)===d):[o]),!y.length)return;const p=Ae.getInstance();return p&&p.options.triggerEl&&y.indexOf(p.options.triggerEl)>-1?void 0:(o&&(C.startIndex=y.indexOf(o)),Ae.fromNodes(y,C))}static fromSelector(n,o,s){let c=null,f="",m={};if($t(n)?(c=document.body,f=n,typeof o=="object"&&(m=o||{})):n instanceof HTMLElement&&$t(o)&&(c=n,f=o,typeof s=="object"&&(m=s||{})),!c||!f)return!1;const h=Ae.openers.get(c);return!!h&&(m=dt({},h.get(f)||{},m),!!m&&Ae.fromNodes(Array.from(c.querySelectorAll(f)),m))}static fromNodes(n,o){o=dt({},dr,o||{});const s=[];for(const c of n){const f=c.dataset||{},m=f[En]||c.getAttribute(or)||c.getAttribute("currentSrc")||c.getAttribute(En)||void 0;let h;const y=o.delegate;let C;y&&s.length===o.startIndex&&(h=y instanceof HTMLImageElement?y:y.querySelector("img:not([aria-hidden])")),h||(h=c instanceof HTMLImageElement?c:c.querySelector("img:not([aria-hidden])")),h&&(C=h.currentSrc||h[En]||void 0,!C&&h.dataset&&(C=h.dataset.lazySrc||h.dataset[En]||void 0));const S={src:m,triggerEl:c,thumbEl:h,thumbElSrc:C,thumbSrc:C};for(const u in f){let d=f[u]+"";d=d!=="false"&&(d==="true"||d),S[u]=d}s.push(S)}return new Ae(s,o)}static getInstance(n){return n?Sn.get(n):Array.from(Sn.values()).reverse().find(o=>!o.isClosing()&&o)||null}static getSlide(){var n;return((n=Ae.getInstance())===null||n===void 0?void 0:n.getSlide())||null}static show(n=[],o={}){return new Ae(n,o)}static next(){const n=Ae.getInstance();n&&n.next()}static prev(){const n=Ae.getInstance();n&&n.prev()}static close(n=!0,...o){if(n)for(const s of Sn.values())s.close(...o);else{const s=Ae.getInstance();s&&s.close(...o)}}}Object.defineProperty(Ae,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Ae,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:dr}),Object.defineProperty(Ae,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Nl}),Object.defineProperty(Ae,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});function Bl(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}var hi={exports:{}};/*!
 * Vditor v3.10.9 - A markdown editor written in TypeScript.
 *
 * MIT License
 *
 * Copyright (c) 2018-present B3log 开源, b3log.org
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */var zl=hi.exports,Ra;function Fl(){return Ra||(Ra=1,function(T,n){(function(s,c){T.exports=c()})(zl,()=>(()=>{var o={192:m=>{var h=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},y=-1,C=1,S=0;h.Diff=function(u,d){return[u,d]},h.prototype.diff_main=function(u,d,p,v){typeof v>"u"&&(this.Diff_Timeout<=0?v=Number.MAX_VALUE:v=new Date().getTime()+this.Diff_Timeout*1e3);var E=v;if(u==null||d==null)throw new Error("Null input. (diff_main)");if(u==d)return u?[new h.Diff(S,u)]:[];typeof p>"u"&&(p=!0);var b=p,k=this.diff_commonPrefix(u,d),M=u.substring(0,k);u=u.substring(k),d=d.substring(k),k=this.diff_commonSuffix(u,d);var x=u.substring(u.length-k);u=u.substring(0,u.length-k),d=d.substring(0,d.length-k);var A=this.diff_compute_(u,d,b,E);return M&&A.unshift(new h.Diff(S,M)),x&&A.push(new h.Diff(S,x)),this.diff_cleanupMerge(A),A},h.prototype.diff_compute_=function(u,d,p,v){var E;if(!u)return[new h.Diff(C,d)];if(!d)return[new h.Diff(y,u)];var b=u.length>d.length?u:d,k=u.length>d.length?d:u,M=b.indexOf(k);if(M!=-1)return E=[new h.Diff(C,b.substring(0,M)),new h.Diff(S,k),new h.Diff(C,b.substring(M+k.length))],u.length>d.length&&(E[0][0]=E[2][0]=y),E;if(k.length==1)return[new h.Diff(y,u),new h.Diff(C,d)];var x=this.diff_halfMatch_(u,d);if(x){var A=x[0],g=x[1],O=x[2],I=x[3],R=x[4],P=this.diff_main(A,O,p,v),B=this.diff_main(g,I,p,v);return P.concat([new h.Diff(S,R)],B)}return p&&u.length>100&&d.length>100?this.diff_lineMode_(u,d,v):this.diff_bisect_(u,d,v)},h.prototype.diff_lineMode_=function(u,d,p){var v=this.diff_linesToChars_(u,d);u=v.chars1,d=v.chars2;var E=v.lineArray,b=this.diff_main(u,d,!1,p);this.diff_charsToLines_(b,E),this.diff_cleanupSemantic(b),b.push(new h.Diff(S,""));for(var k=0,M=0,x=0,A="",g="";k<b.length;){switch(b[k][0]){case C:x++,g+=b[k][1];break;case y:M++,A+=b[k][1];break;case S:if(M>=1&&x>=1){b.splice(k-M-x,M+x),k=k-M-x;for(var O=this.diff_main(A,g,!1,p),I=O.length-1;I>=0;I--)b.splice(k,0,O[I]);k=k+O.length}x=0,M=0,A="",g="";break}k++}return b.pop(),b},h.prototype.diff_bisect_=function(u,d,p){for(var v=u.length,E=d.length,b=Math.ceil((v+E)/2),k=b,M=2*b,x=new Array(M),A=new Array(M),g=0;g<M;g++)x[g]=-1,A[g]=-1;x[k+1]=0,A[k+1]=0;for(var O=v-E,I=O%2!=0,R=0,P=0,B=0,Y=0,G=0;G<b&&!(new Date().getTime()>p);G++){for(var re=-G+R;re<=G-P;re+=2){var he=k+re,me;re==-G||re!=G&&x[he-1]<x[he+1]?me=x[he+1]:me=x[he-1]+1;for(var Me=me-re;me<v&&Me<E&&u.charAt(me)==d.charAt(Me);)me++,Me++;if(x[he]=me,me>v)P+=2;else if(Me>E)R+=2;else if(I){var Se=k+O-re;if(Se>=0&&Se<M&&A[Se]!=-1){var ke=v-A[Se];if(me>=ke)return this.diff_bisectSplit_(u,d,me,Me,p)}}}for(var De=-G+B;De<=G-Y;De+=2){var Se=k+De,ke;De==-G||De!=G&&A[Se-1]<A[Se+1]?ke=A[Se+1]:ke=A[Se-1]+1;for(var we=ke-De;ke<v&&we<E&&u.charAt(v-ke-1)==d.charAt(E-we-1);)ke++,we++;if(A[Se]=ke,ke>v)Y+=2;else if(we>E)B+=2;else if(!I){var he=k+O-De;if(he>=0&&he<M&&x[he]!=-1){var me=x[he],Me=k+me-he;if(ke=v-ke,me>=ke)return this.diff_bisectSplit_(u,d,me,Me,p)}}}}return[new h.Diff(y,u),new h.Diff(C,d)]},h.prototype.diff_bisectSplit_=function(u,d,p,v,E){var b=u.substring(0,p),k=d.substring(0,v),M=u.substring(p),x=d.substring(v),A=this.diff_main(b,k,!1,E),g=this.diff_main(M,x,!1,E);return A.concat(g)},h.prototype.diff_linesToChars_=function(u,d){var p=[],v={};p[0]="";function E(x){for(var A="",g=0,O=-1,I=p.length;O<x.length-1;){O=x.indexOf(`
`,g),O==-1&&(O=x.length-1);var R=x.substring(g,O+1);(v.hasOwnProperty?v.hasOwnProperty(R):v[R]!==void 0)?A+=String.fromCharCode(v[R]):(I==b&&(R=x.substring(g),O=x.length),A+=String.fromCharCode(I),v[R]=I,p[I++]=R),g=O+1}return A}var b=4e4,k=E(u);b=65535;var M=E(d);return{chars1:k,chars2:M,lineArray:p}},h.prototype.diff_charsToLines_=function(u,d){for(var p=0;p<u.length;p++){for(var v=u[p][1],E=[],b=0;b<v.length;b++)E[b]=d[v.charCodeAt(b)];u[p][1]=E.join("")}},h.prototype.diff_commonPrefix=function(u,d){if(!u||!d||u.charAt(0)!=d.charAt(0))return 0;for(var p=0,v=Math.min(u.length,d.length),E=v,b=0;p<E;)u.substring(b,E)==d.substring(b,E)?(p=E,b=p):v=E,E=Math.floor((v-p)/2+p);return E},h.prototype.diff_commonSuffix=function(u,d){if(!u||!d||u.charAt(u.length-1)!=d.charAt(d.length-1))return 0;for(var p=0,v=Math.min(u.length,d.length),E=v,b=0;p<E;)u.substring(u.length-E,u.length-b)==d.substring(d.length-E,d.length-b)?(p=E,b=p):v=E,E=Math.floor((v-p)/2+p);return E},h.prototype.diff_commonOverlap_=function(u,d){var p=u.length,v=d.length;if(p==0||v==0)return 0;p>v?u=u.substring(p-v):p<v&&(d=d.substring(0,p));var E=Math.min(p,v);if(u==d)return E;for(var b=0,k=1;;){var M=u.substring(E-k),x=d.indexOf(M);if(x==-1)return b;k+=x,(x==0||u.substring(E-k)==d.substring(0,k))&&(b=k,k++)}},h.prototype.diff_halfMatch_=function(u,d){if(this.Diff_Timeout<=0)return null;var p=u.length>d.length?u:d,v=u.length>d.length?d:u;if(p.length<4||v.length*2<p.length)return null;var E=this;function b(P,B,Y){for(var G=P.substring(Y,Y+Math.floor(P.length/4)),re=-1,he="",me,Me,Se,ke;(re=B.indexOf(G,re+1))!=-1;){var De=E.diff_commonPrefix(P.substring(Y),B.substring(re)),we=E.diff_commonSuffix(P.substring(0,Y),B.substring(0,re));he.length<we+De&&(he=B.substring(re-we,re)+B.substring(re,re+De),me=P.substring(0,Y-we),Me=P.substring(Y+De),Se=B.substring(0,re-we),ke=B.substring(re+De))}return he.length*2>=P.length?[me,Me,Se,ke,he]:null}var k=b(p,v,Math.ceil(p.length/4)),M=b(p,v,Math.ceil(p.length/2)),x;if(!k&&!M)return null;M?k?x=k[4].length>M[4].length?k:M:x=M:x=k;var A,g,O,I;u.length>d.length?(A=x[0],g=x[1],O=x[2],I=x[3]):(O=x[0],I=x[1],A=x[2],g=x[3]);var R=x[4];return[A,g,O,I,R]},h.prototype.diff_cleanupSemantic=function(u){for(var d=!1,p=[],v=0,E=null,b=0,k=0,M=0,x=0,A=0;b<u.length;)u[b][0]==S?(p[v++]=b,k=x,M=A,x=0,A=0,E=u[b][1]):(u[b][0]==C?x+=u[b][1].length:A+=u[b][1].length,E&&E.length<=Math.max(k,M)&&E.length<=Math.max(x,A)&&(u.splice(p[v-1],0,new h.Diff(y,E)),u[p[v-1]+1][0]=C,v--,v--,b=v>0?p[v-1]:-1,k=0,M=0,x=0,A=0,E=null,d=!0)),b++;for(d&&this.diff_cleanupMerge(u),this.diff_cleanupSemanticLossless(u),b=1;b<u.length;){if(u[b-1][0]==y&&u[b][0]==C){var g=u[b-1][1],O=u[b][1],I=this.diff_commonOverlap_(g,O),R=this.diff_commonOverlap_(O,g);I>=R?(I>=g.length/2||I>=O.length/2)&&(u.splice(b,0,new h.Diff(S,O.substring(0,I))),u[b-1][1]=g.substring(0,g.length-I),u[b+1][1]=O.substring(I),b++):(R>=g.length/2||R>=O.length/2)&&(u.splice(b,0,new h.Diff(S,g.substring(0,R))),u[b-1][0]=C,u[b-1][1]=O.substring(0,O.length-R),u[b+1][0]=y,u[b+1][1]=g.substring(R),b++),b++}b++}},h.prototype.diff_cleanupSemanticLossless=function(u){function d(R,P){if(!R||!P)return 6;var B=R.charAt(R.length-1),Y=P.charAt(0),G=B.match(h.nonAlphaNumericRegex_),re=Y.match(h.nonAlphaNumericRegex_),he=G&&B.match(h.whitespaceRegex_),me=re&&Y.match(h.whitespaceRegex_),Me=he&&B.match(h.linebreakRegex_),Se=me&&Y.match(h.linebreakRegex_),ke=Me&&R.match(h.blanklineEndRegex_),De=Se&&P.match(h.blanklineStartRegex_);return ke||De?5:Me||Se?4:G&&!he&&me?3:he||me?2:G||re?1:0}for(var p=1;p<u.length-1;){if(u[p-1][0]==S&&u[p+1][0]==S){var v=u[p-1][1],E=u[p][1],b=u[p+1][1],k=this.diff_commonSuffix(v,E);if(k){var M=E.substring(E.length-k);v=v.substring(0,v.length-k),E=M+E.substring(0,E.length-k),b=M+b}for(var x=v,A=E,g=b,O=d(v,E)+d(E,b);E.charAt(0)===b.charAt(0);){v+=E.charAt(0),E=E.substring(1)+b.charAt(0),b=b.substring(1);var I=d(v,E)+d(E,b);I>=O&&(O=I,x=v,A=E,g=b)}u[p-1][1]!=x&&(x?u[p-1][1]=x:(u.splice(p-1,1),p--),u[p][1]=A,g?u[p+1][1]=g:(u.splice(p+1,1),p--))}p++}},h.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,h.whitespaceRegex_=/\s/,h.linebreakRegex_=/[\r\n]/,h.blanklineEndRegex_=/\n\r?\n$/,h.blanklineStartRegex_=/^\r?\n\r?\n/,h.prototype.diff_cleanupEfficiency=function(u){for(var d=!1,p=[],v=0,E=null,b=0,k=!1,M=!1,x=!1,A=!1;b<u.length;)u[b][0]==S?(u[b][1].length<this.Diff_EditCost&&(x||A)?(p[v++]=b,k=x,M=A,E=u[b][1]):(v=0,E=null),x=A=!1):(u[b][0]==y?A=!0:x=!0,E&&(k&&M&&x&&A||E.length<this.Diff_EditCost/2&&k+M+x+A==3)&&(u.splice(p[v-1],0,new h.Diff(y,E)),u[p[v-1]+1][0]=C,v--,E=null,k&&M?(x=A=!0,v=0):(v--,b=v>0?p[v-1]:-1,x=A=!1),d=!0)),b++;d&&this.diff_cleanupMerge(u)},h.prototype.diff_cleanupMerge=function(u){u.push(new h.Diff(S,""));for(var d=0,p=0,v=0,E="",b="",k;d<u.length;)switch(u[d][0]){case C:v++,b+=u[d][1],d++;break;case y:p++,E+=u[d][1],d++;break;case S:p+v>1?(p!==0&&v!==0&&(k=this.diff_commonPrefix(b,E),k!==0&&(d-p-v>0&&u[d-p-v-1][0]==S?u[d-p-v-1][1]+=b.substring(0,k):(u.splice(0,0,new h.Diff(S,b.substring(0,k))),d++),b=b.substring(k),E=E.substring(k)),k=this.diff_commonSuffix(b,E),k!==0&&(u[d][1]=b.substring(b.length-k)+u[d][1],b=b.substring(0,b.length-k),E=E.substring(0,E.length-k))),d-=p+v,u.splice(d,p+v),E.length&&(u.splice(d,0,new h.Diff(y,E)),d++),b.length&&(u.splice(d,0,new h.Diff(C,b)),d++),d++):d!==0&&u[d-1][0]==S?(u[d-1][1]+=u[d][1],u.splice(d,1)):d++,v=0,p=0,E="",b="";break}u[u.length-1][1]===""&&u.pop();var M=!1;for(d=1;d<u.length-1;)u[d-1][0]==S&&u[d+1][0]==S&&(u[d][1].substring(u[d][1].length-u[d-1][1].length)==u[d-1][1]?(u[d][1]=u[d-1][1]+u[d][1].substring(0,u[d][1].length-u[d-1][1].length),u[d+1][1]=u[d-1][1]+u[d+1][1],u.splice(d-1,1),M=!0):u[d][1].substring(0,u[d+1][1].length)==u[d+1][1]&&(u[d-1][1]+=u[d+1][1],u[d][1]=u[d][1].substring(u[d+1][1].length)+u[d+1][1],u.splice(d+1,1),M=!0)),d++;M&&this.diff_cleanupMerge(u)},h.prototype.diff_xIndex=function(u,d){var p=0,v=0,E=0,b=0,k;for(k=0;k<u.length&&(u[k][0]!==C&&(p+=u[k][1].length),u[k][0]!==y&&(v+=u[k][1].length),!(p>d));k++)E=p,b=v;return u.length!=k&&u[k][0]===y?b:b+(d-E)},h.prototype.diff_prettyHtml=function(u){for(var d=[],p=/&/g,v=/</g,E=/>/g,b=/\n/g,k=0;k<u.length;k++){var M=u[k][0],x=u[k][1],A=x.replace(p,"&amp;").replace(v,"&lt;").replace(E,"&gt;").replace(b,"&para;<br>");switch(M){case C:d[k]='<ins style="background:#e6ffe6;">'+A+"</ins>";break;case y:d[k]='<del style="background:#ffe6e6;">'+A+"</del>";break;case S:d[k]="<span>"+A+"</span>";break}}return d.join("")},h.prototype.diff_text1=function(u){for(var d=[],p=0;p<u.length;p++)u[p][0]!==C&&(d[p]=u[p][1]);return d.join("")},h.prototype.diff_text2=function(u){for(var d=[],p=0;p<u.length;p++)u[p][0]!==y&&(d[p]=u[p][1]);return d.join("")},h.prototype.diff_levenshtein=function(u){for(var d=0,p=0,v=0,E=0;E<u.length;E++){var b=u[E][0],k=u[E][1];switch(b){case C:p+=k.length;break;case y:v+=k.length;break;case S:d+=Math.max(p,v),p=0,v=0;break}}return d+=Math.max(p,v),d},h.prototype.diff_toDelta=function(u){for(var d=[],p=0;p<u.length;p++)switch(u[p][0]){case C:d[p]="+"+encodeURI(u[p][1]);break;case y:d[p]="-"+u[p][1].length;break;case S:d[p]="="+u[p][1].length;break}return d.join("	").replace(/%20/g," ")},h.prototype.diff_fromDelta=function(u,d){for(var p=[],v=0,E=0,b=d.split(/\t/g),k=0;k<b.length;k++){var M=b[k].substring(1);switch(b[k].charAt(0)){case"+":try{p[v++]=new h.Diff(C,decodeURI(M))}catch{throw new Error("Illegal escape in diff_fromDelta: "+M)}break;case"-":case"=":var x=parseInt(M,10);if(isNaN(x)||x<0)throw new Error("Invalid number in diff_fromDelta: "+M);var A=u.substring(E,E+=x);b[k].charAt(0)=="="?p[v++]=new h.Diff(S,A):p[v++]=new h.Diff(y,A);break;default:if(b[k])throw new Error("Invalid diff operation in diff_fromDelta: "+b[k])}}if(E!=u.length)throw new Error("Delta length ("+E+") does not equal source text length ("+u.length+").");return p},h.prototype.match_main=function(u,d,p){if(u==null||d==null||p==null)throw new Error("Null input. (match_main)");return p=Math.max(0,Math.min(p,u.length)),u==d?0:u.length?u.substring(p,p+d.length)==d?p:this.match_bitap_(u,d,p):-1},h.prototype.match_bitap_=function(u,d,p){if(d.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var v=this.match_alphabet_(d),E=this;function b(me,Me){var Se=me/d.length,ke=Math.abs(p-Me);return E.Match_Distance?Se+ke/E.Match_Distance:ke?1:Se}var k=this.Match_Threshold,M=u.indexOf(d,p);M!=-1&&(k=Math.min(b(0,M),k),M=u.lastIndexOf(d,p+d.length),M!=-1&&(k=Math.min(b(0,M),k)));var x=1<<d.length-1;M=-1;for(var A,g,O=d.length+u.length,I,R=0;R<d.length;R++){for(A=0,g=O;A<g;)b(R,p+g)<=k?A=g:O=g,g=Math.floor((O-A)/2+A);O=g;var P=Math.max(1,p-g+1),B=Math.min(p+g,u.length)+d.length,Y=Array(B+2);Y[B+1]=(1<<R)-1;for(var G=B;G>=P;G--){var re=v[u.charAt(G-1)];if(R===0?Y[G]=(Y[G+1]<<1|1)&re:Y[G]=(Y[G+1]<<1|1)&re|((I[G+1]|I[G])<<1|1)|I[G+1],Y[G]&x){var he=b(R,G-1);if(he<=k)if(k=he,M=G-1,M>p)P=Math.max(1,2*p-M);else break}}if(b(R+1,p)>k)break;I=Y}return M},h.prototype.match_alphabet_=function(u){for(var d={},p=0;p<u.length;p++)d[u.charAt(p)]=0;for(var p=0;p<u.length;p++)d[u.charAt(p)]|=1<<u.length-p-1;return d},h.prototype.patch_addContext_=function(u,d){if(d.length!=0){if(u.start2===null)throw Error("patch not initialized");for(var p=d.substring(u.start2,u.start2+u.length1),v=0;d.indexOf(p)!=d.lastIndexOf(p)&&p.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)v+=this.Patch_Margin,p=d.substring(u.start2-v,u.start2+u.length1+v);v+=this.Patch_Margin;var E=d.substring(u.start2-v,u.start2);E&&u.diffs.unshift(new h.Diff(S,E));var b=d.substring(u.start2+u.length1,u.start2+u.length1+v);b&&u.diffs.push(new h.Diff(S,b)),u.start1-=E.length,u.start2-=E.length,u.length1+=E.length+b.length,u.length2+=E.length+b.length}},h.prototype.patch_make=function(u,d,p){var v,E;if(typeof u=="string"&&typeof d=="string"&&typeof p>"u")v=u,E=this.diff_main(v,d,!0),E.length>2&&(this.diff_cleanupSemantic(E),this.diff_cleanupEfficiency(E));else if(u&&typeof u=="object"&&typeof d>"u"&&typeof p>"u")E=u,v=this.diff_text1(E);else if(typeof u=="string"&&d&&typeof d=="object"&&typeof p>"u")v=u,E=d;else if(typeof u=="string"&&typeof d=="string"&&p&&typeof p=="object")v=u,E=p;else throw new Error("Unknown call format to patch_make.");if(E.length===0)return[];for(var b=[],k=new h.patch_obj,M=0,x=0,A=0,g=v,O=v,I=0;I<E.length;I++){var R=E[I][0],P=E[I][1];switch(!M&&R!==S&&(k.start1=x,k.start2=A),R){case C:k.diffs[M++]=E[I],k.length2+=P.length,O=O.substring(0,A)+P+O.substring(A);break;case y:k.length1+=P.length,k.diffs[M++]=E[I],O=O.substring(0,A)+O.substring(A+P.length);break;case S:P.length<=2*this.Patch_Margin&&M&&E.length!=I+1?(k.diffs[M++]=E[I],k.length1+=P.length,k.length2+=P.length):P.length>=2*this.Patch_Margin&&M&&(this.patch_addContext_(k,g),b.push(k),k=new h.patch_obj,M=0,g=O,x=A);break}R!==C&&(x+=P.length),R!==y&&(A+=P.length)}return M&&(this.patch_addContext_(k,g),b.push(k)),b},h.prototype.patch_deepCopy=function(u){for(var d=[],p=0;p<u.length;p++){var v=u[p],E=new h.patch_obj;E.diffs=[];for(var b=0;b<v.diffs.length;b++)E.diffs[b]=new h.Diff(v.diffs[b][0],v.diffs[b][1]);E.start1=v.start1,E.start2=v.start2,E.length1=v.length1,E.length2=v.length2,d[p]=E}return d},h.prototype.patch_apply=function(u,d){if(u.length==0)return[d,[]];u=this.patch_deepCopy(u);var p=this.patch_addPadding(u);d=p+d+p,this.patch_splitMax(u);for(var v=0,E=[],b=0;b<u.length;b++){var k=u[b].start2+v,M=this.diff_text1(u[b].diffs),x,A=-1;if(M.length>this.Match_MaxBits?(x=this.match_main(d,M.substring(0,this.Match_MaxBits),k),x!=-1&&(A=this.match_main(d,M.substring(M.length-this.Match_MaxBits),k+M.length-this.Match_MaxBits),(A==-1||x>=A)&&(x=-1))):x=this.match_main(d,M,k),x==-1)E[b]=!1,v-=u[b].length2-u[b].length1;else{E[b]=!0,v=x-k;var g;if(A==-1?g=d.substring(x,x+M.length):g=d.substring(x,A+this.Match_MaxBits),M==g)d=d.substring(0,x)+this.diff_text2(u[b].diffs)+d.substring(x+M.length);else{var O=this.diff_main(M,g,!1);if(M.length>this.Match_MaxBits&&this.diff_levenshtein(O)/M.length>this.Patch_DeleteThreshold)E[b]=!1;else{this.diff_cleanupSemanticLossless(O);for(var I=0,R,P=0;P<u[b].diffs.length;P++){var B=u[b].diffs[P];B[0]!==S&&(R=this.diff_xIndex(O,I)),B[0]===C?d=d.substring(0,x+R)+B[1]+d.substring(x+R):B[0]===y&&(d=d.substring(0,x+R)+d.substring(x+this.diff_xIndex(O,I+B[1].length))),B[0]!==y&&(I+=B[1].length)}}}}}return d=d.substring(p.length,d.length-p.length),[d,E]},h.prototype.patch_addPadding=function(u){for(var d=this.Patch_Margin,p="",v=1;v<=d;v++)p+=String.fromCharCode(v);for(var v=0;v<u.length;v++)u[v].start1+=d,u[v].start2+=d;var E=u[0],b=E.diffs;if(b.length==0||b[0][0]!=S)b.unshift(new h.Diff(S,p)),E.start1-=d,E.start2-=d,E.length1+=d,E.length2+=d;else if(d>b[0][1].length){var k=d-b[0][1].length;b[0][1]=p.substring(b[0][1].length)+b[0][1],E.start1-=k,E.start2-=k,E.length1+=k,E.length2+=k}if(E=u[u.length-1],b=E.diffs,b.length==0||b[b.length-1][0]!=S)b.push(new h.Diff(S,p)),E.length1+=d,E.length2+=d;else if(d>b[b.length-1][1].length){var k=d-b[b.length-1][1].length;b[b.length-1][1]+=p.substring(0,k),E.length1+=k,E.length2+=k}return p},h.prototype.patch_splitMax=function(u){for(var d=this.Match_MaxBits,p=0;p<u.length;p++)if(!(u[p].length1<=d)){var v=u[p];u.splice(p--,1);for(var E=v.start1,b=v.start2,k="";v.diffs.length!==0;){var M=new h.patch_obj,x=!0;for(M.start1=E-k.length,M.start2=b-k.length,k!==""&&(M.length1=M.length2=k.length,M.diffs.push(new h.Diff(S,k)));v.diffs.length!==0&&M.length1<d-this.Patch_Margin;){var A=v.diffs[0][0],g=v.diffs[0][1];A===C?(M.length2+=g.length,b+=g.length,M.diffs.push(v.diffs.shift()),x=!1):A===y&&M.diffs.length==1&&M.diffs[0][0]==S&&g.length>2*d?(M.length1+=g.length,E+=g.length,x=!1,M.diffs.push(new h.Diff(A,g)),v.diffs.shift()):(g=g.substring(0,d-M.length1-this.Patch_Margin),M.length1+=g.length,E+=g.length,A===S?(M.length2+=g.length,b+=g.length):x=!1,M.diffs.push(new h.Diff(A,g)),g==v.diffs[0][1]?v.diffs.shift():v.diffs[0][1]=v.diffs[0][1].substring(g.length))}k=this.diff_text2(M.diffs),k=k.substring(k.length-this.Patch_Margin);var O=this.diff_text1(v.diffs).substring(0,this.Patch_Margin);O!==""&&(M.length1+=O.length,M.length2+=O.length,M.diffs.length!==0&&M.diffs[M.diffs.length-1][0]===S?M.diffs[M.diffs.length-1][1]+=O:M.diffs.push(new h.Diff(S,O))),x||u.splice(++p,0,M)}}},h.prototype.patch_toText=function(u){for(var d=[],p=0;p<u.length;p++)d[p]=u[p];return d.join("")},h.prototype.patch_fromText=function(u){var d=[];if(!u)return d;for(var p=u.split(`
`),v=0,E=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;v<p.length;){var b=p[v].match(E);if(!b)throw new Error("Invalid patch string: "+p[v]);var k=new h.patch_obj;for(d.push(k),k.start1=parseInt(b[1],10),b[2]===""?(k.start1--,k.length1=1):b[2]=="0"?k.length1=0:(k.start1--,k.length1=parseInt(b[2],10)),k.start2=parseInt(b[3],10),b[4]===""?(k.start2--,k.length2=1):b[4]=="0"?k.length2=0:(k.start2--,k.length2=parseInt(b[4],10)),v++;v<p.length;){var M=p[v].charAt(0);try{var x=decodeURI(p[v].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+x)}if(M=="-")k.diffs.push(new h.Diff(y,x));else if(M=="+")k.diffs.push(new h.Diff(C,x));else if(M==" ")k.diffs.push(new h.Diff(S,x));else{if(M=="@")break;if(M!=="")throw new Error('Invalid patch mode "'+M+'" in: '+x)}v++}}return d},h.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},h.patch_obj.prototype.toString=function(){var u,d;this.length1===0?u=this.start1+",0":this.length1==1?u=this.start1+1:u=this.start1+1+","+this.length1,this.length2===0?d=this.start2+",0":this.length2==1?d=this.start2+1:d=this.start2+1+","+this.length2;for(var p=["@@ -"+u+" +"+d+` @@
`],v,E=0;E<this.diffs.length;E++){switch(this.diffs[E][0]){case C:v="+";break;case y:v="-";break;case S:v=" ";break}p[E+1]=v+encodeURI(this.diffs[E][1])+`
`}return p.join("").replace(/%20/g," ")},m.exports=h,m.exports.diff_match_patch=h,m.exports.DIFF_DELETE=y,m.exports.DIFF_INSERT=C,m.exports.DIFF_EQUAL=S},923:(m,h,y)=>{y.d(h,{default:()=>V});var C=y(288),S=y(59),u=y(784),d=y(51),p=y(500),v=y(339),E=y(108),b=function(N){N===void 0&&(N=document);var q=function(U){var F=document.createElement("img");F.src=U.getAttribute("data-src"),F.addEventListener("load",function(){!U.getAttribute("style")&&!U.getAttribute("class")&&!U.getAttribute("width")&&!U.getAttribute("height")&&F.naturalHeight>F.naturalWidth&&F.naturalWidth/F.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&F.naturalHeight>window.innerHeight-40&&(U.style.height=window.innerHeight-40+"px"),U.src=F.src}),U.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return N.querySelectorAll("img").forEach(function(U){U.getAttribute("data-src")&&q(U)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),N.querySelectorAll("img").forEach(function(U){window.vditorImageIntersectionObserver.observe(U)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(U){U.forEach(function(F){(typeof F.isIntersecting>"u"?F.intersectionRatio!==0:F.isIntersecting)&&F.target.getAttribute("data-src")&&q(F.target)})}),N.querySelectorAll("img").forEach(function(U){window.vditorImageIntersectionObserver.observe(U)}))},k=y(960),M=y(0),x=y(975),A=y(931),g=y(597),O=y(162),I=y(70),R=y(591),P=y(913),B=y(873),Y=y(161),G=y(598),re=y(905),he=function(N){document.querySelectorAll(".vditor-anchor").forEach(function(q){N===1&&q.classList.add("vditor-anchor--left"),q.onclick=function(){var U=q.getAttribute("href").substr(1),F=document.getElementById("vditorAnchor-"+U).offsetTop;document.querySelector("html").scrollTop=F}}),window.onhashchange=function(){var q=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));q&&(document.querySelector("html").scrollTop=q.offsetTop)}},me=y(796),Me=y(827),Se=function(N,q){if(q===void 0&&(q="zh_CN"),!(typeof speechSynthesis>"u"||typeof SpeechSynthesisUtterance>"u")){var U=function(){var Ue=speechSynthesis.getVoices(),ue,Oe;return Ue.forEach(function(Xe){Xe.lang===q.replace("_","-")&&(ue=Xe),Xe.default&&(Oe=Xe)}),ue||(ue=Oe),ue},F='<svg><use xlink:href="#vditor-icon-play"></use></svg>',ye='<svg><use xlink:href="#vditor-icon-pause"></use></svg>';document.getElementById("vditorIconScript")||(F='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',ye='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>');var Q=document.querySelector(".vditor-speech");Q||(Q=document.createElement("button"),Q.className="vditor-speech",N.insertAdjacentElement("beforeend",Q),speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=U));var Fe=U(),se=new SpeechSynthesisUtterance;se.voice=Fe,se.onend=se.onerror=function(){Q.style.display="none",speechSynthesis.cancel(),Q.classList.remove("vditor-speech--current"),Q.innerHTML=F},N.addEventListener(window.ontouchstart!==void 0?"touchend":"click",function(Ue){var ue=Ue.target;if(ue.classList.contains("vditor-speech")||ue.parentElement.classList.contains("vditor-speech")){Q.classList.contains("vditor-speech--current")?speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),Q.innerHTML=ye):(speechSynthesis.pause(),Q.innerHTML=F)):(se.text=Q.getAttribute("data-text"),speechSynthesis.speak(se),Q.classList.add("vditor-speech--current"),Q.innerHTML=ye),(0,Me.jl)(window.vditorSpeechRange),N.focus();return}if(Q.style.display="none",speechSynthesis.cancel(),Q.classList.remove("vditor-speech--current"),Q.innerHTML=F,getSelection().rangeCount!==0){var Oe=getSelection().getRangeAt(0),Xe=Oe.toString().trim();if(Xe){window.vditorSpeechRange=Oe.cloneRange();var it=Oe.getBoundingClientRect();Q.innerHTML=F,Q.style.display="block",Q.style.top=it.top+it.height+document.querySelector("html").scrollTop-20+"px",window.ontouchstart!==void 0?Q.style.left=Ue.changedTouches[Ue.changedTouches.length-1].pageX+2+"px":Q.style.left=Ue.clientX+2+"px",Q.setAttribute("data-text",Xe)}}})}},ke=function(N,q,U,F){function ye(Q){return Q instanceof U?Q:new U(function(Fe){Fe(Q)})}return new(U||(U=Promise))(function(Q,Fe){function se(Oe){try{ue(F.next(Oe))}catch(Xe){Fe(Xe)}}function Ue(Oe){try{ue(F.throw(Oe))}catch(Xe){Fe(Xe)}}function ue(Oe){Oe.done?Q(Oe.value):ye(Oe.value).then(se,Ue)}ue((F=F.apply(N,q||[])).next())})},De=function(N,q){var U={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},F,ye,Q,Fe;return Fe={next:se(0),throw:se(1),return:se(2)},typeof Symbol=="function"&&(Fe[Symbol.iterator]=function(){return this}),Fe;function se(ue){return function(Oe){return Ue([ue,Oe])}}function Ue(ue){if(F)throw new TypeError("Generator is already executing.");for(;Fe&&(Fe=0,ue[0]&&(U=0)),U;)try{if(F=1,ye&&(Q=ue[0]&2?ye.return:ue[0]?ye.throw||((Q=ye.return)&&Q.call(ye),0):ye.next)&&!(Q=Q.call(ye,ue[1])).done)return Q;switch(ye=0,Q&&(ue=[ue[0]&2,Q.value]),ue[0]){case 0:case 1:Q=ue;break;case 4:return U.label++,{value:ue[1],done:!1};case 5:U.label++,ye=ue[1],ue=[0];continue;case 7:ue=U.ops.pop(),U.trys.pop();continue;default:if(Q=U.trys,!(Q=Q.length>0&&Q[Q.length-1])&&(ue[0]===6||ue[0]===2)){U=0;continue}if(ue[0]===3&&(!Q||ue[1]>Q[0]&&ue[1]<Q[3])){U.label=ue[1];break}if(ue[0]===6&&U.label<Q[1]){U.label=Q[1],Q=ue;break}if(Q&&U.label<Q[2]){U.label=Q[2],U.ops.push(ue);break}Q[2]&&U.ops.pop(),U.trys.pop();continue}ue=q.call(N,U)}catch(Oe){ue=[6,Oe],ye=0}finally{F=Q=0}if(ue[0]&5)throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}},we=function(N){var q,U={anchor:0,cdn:P.Y.CDN,customEmoji:{},emojiPath:"".concat(P.Y.CDN,"/dist/images/emoji"),hljs:P.Y.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:P.Y.MARKDOWN_OPTIONS,math:P.Y.MATH_OPTIONS,mode:"light",speech:{enable:!1},render:{media:{enable:!0}},theme:P.Y.THEME_OPTIONS};return N.cdn&&(!((q=N.theme)===null||q===void 0)&&q.path||(U.theme.path="".concat(N.cdn,"/dist/css/content-theme")),N.emojiPath||(U.emojiPath="".concat(N.cdn,"/dist/images/emoji"))),(0,re.h)(U,N)},ce=function(N,q){var U=we(q);return(0,Y.Z)("".concat(U.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){var F=(0,me.X)({autoSpace:U.markdown.autoSpace,gfmAutoLink:U.markdown.gfmAutoLink,codeBlockPreview:U.markdown.codeBlockPreview,emojiSite:U.emojiPath,emojis:U.customEmoji,fixTermTypo:U.markdown.fixTermTypo,footnotes:U.markdown.footnotes,headingAnchor:U.anchor!==0,inlineMathDigit:U.math.inlineDigit,lazyLoadImage:U.lazyLoadImage,linkBase:U.markdown.linkBase,linkPrefix:U.markdown.linkPrefix,listStyle:U.markdown.listStyle,mark:U.markdown.mark,mathBlockPreview:U.markdown.mathBlockPreview,paragraphBeginningSpace:U.markdown.paragraphBeginningSpace,sanitize:U.markdown.sanitize,toc:U.markdown.toc});return q!=null&&q.renderers&&F.SetJSRenderers({renderers:{Md2HTML:q.renderers}}),F.SetHeadingID(!0),F.Md2HTML(N)})},j=function(N,q,U){return ke(void 0,void 0,void 0,function(){var F,ye,Q,Fe;return De(this,function(se){switch(se.label){case 0:return F=we(U),[4,ce(q,F)];case 1:if(ye=se.sent(),F.transform&&(ye=F.transform(ye)),N.innerHTML=ye,N.classList.add("vditor-reset"),F.i18n)return[3,5];if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(F.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return Q="vditorI18nScript",Fe=Q+F.lang,document.querySelectorAll('head script[id^="'.concat(Q,'"]')).forEach(function(Ue){Ue.id!==Fe&&document.head.removeChild(Ue)}),[4,(0,Y.Z)("".concat(F.cdn,"/dist/js/i18n/").concat(F.lang,".js"),Fe)];case 3:se.sent(),se.label=4;case 4:return[3,6];case 5:window.VditorI18n=F.i18n,se.label=6;case 6:return F.icon?[4,(0,Y.Z)("".concat(F.cdn,"/dist/js/icons/").concat(F.icon,".js"),"vditorIconScript")]:[3,8];case 7:se.sent(),se.label=8;case 8:return(0,B.H)(F.theme.current,F.theme.path),F.anchor===1&&N.classList.add("vditor-reset--anchor"),(0,d.o)(N,F.hljs),(0,E.$)(F.hljs,N,F.cdn),(0,k.T)(N,{cdn:F.cdn,math:F.math}),(0,x.e)(N,F.cdn,F.mode),(0,A.Y)(N,F.cdn,F.mode),(0,g.K)(N,F.cdn),(0,p.D)(N,F.cdn),(0,v.m)(N,F.cdn),(0,u.v)(N,F.cdn,F.mode),(0,O.l)(N,F.cdn,F.mode),(0,R.M)(N,F.cdn),(0,C.$)(N,F.cdn),F.render.media.enable&&(0,M.l)(N),F.speech.enable&&Se(N),F.anchor!==0&&he(F.anchor),F.after&&F.after(),F.lazyLoadImage&&b(N),N.addEventListener("click",function(Ue){var ue=(0,G._Y)(Ue.target,"SPAN");if(ue&&(0,G.KJ)(ue,"vditor-toc")){var Oe=N.querySelector("#"+ue.getAttribute("data-target-id"));Oe&&window.scrollTo(window.scrollX,Oe.offsetTop);return}}),[2]}})})},ne=y(726),J=y(13),Ce=function(){function N(){}return N.adapterRender=S,N.previewImage=ne.o,N.codeRender=d.o,N.graphvizRender=v.m,N.highlightRender=E.$,N.mathRender=k.T,N.mermaidRender=x.e,N.SMILESRender=A.Y,N.markmapRender=g.K,N.flowchartRender=p.D,N.chartRender=u.v,N.abcRender=C.$,N.mindmapRender=O.l,N.plantumlRender=R.M,N.outlineRender=I.N,N.mediaRender=M.l,N.speechRender=Se,N.lazyLoadImageRender=b,N.md2html=ce,N.preview=j,N.setCodeTheme=J.h,N.setContentTheme=B.H,N}();const V=Ce},913:(m,h,y)=>{y.d(h,{Y:()=>S,g:()=>C});var C="3.10.9",S=function(){function u(){}return u.ZWSP="​",u.DROP_EDITOR="application/editor",u.MOBILE_WIDTH=520,u.CLASS_MENU_DISABLED="vditor-menu--disabled",u.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],u.CODE_THEME=["a11y-dark","agate","an-old-hope","androidstudio","arta","atom-one-dark","atom-one-dark-reasonable","base16/3024","base16/apathy","base16/apprentice","base16/ashes","base16/atelier-cave","base16/atelier-dune","base16/atelier-estuary","base16/atelier-forest","base16/atelier-heath","base16/atelier-lakeside","base16/atelier-plateau","base16/atelier-savanna","base16/atelier-seaside","base16/atelier-sulphurpool","base16/atlas","base16/bespin","base16/black-metal","base16/black-metal-bathory","base16/black-metal-burzum","base16/black-metal-dark-funeral","base16/black-metal-gorgoroth","base16/black-metal-immortal","base16/black-metal-khold","base16/black-metal-marduk","base16/black-metal-mayhem","base16/black-metal-nile","base16/black-metal-venom","base16/brewer","base16/bright","base16/brogrammer","base16/brush-trees-dark","base16/chalk","base16/circus","base16/classic-dark","base16/codeschool","base16/colors","base16/danqing","base16/darcula","base16/dark-violet","base16/darkmoss","base16/darktooth","base16/decaf","base16/default-dark","base16/dracula","base16/edge-dark","base16/eighties","base16/embers","base16/equilibrium-dark","base16/equilibrium-gray-dark","base16/espresso","base16/eva","base16/eva-dim","base16/flat","base16/framer","base16/gigavolt","base16/google-dark","base16/grayscale-dark","base16/green-screen","base16/gruvbox-dark-hard","base16/gruvbox-dark-medium","base16/gruvbox-dark-pale","base16/gruvbox-dark-soft","base16/hardcore","base16/harmonic16-dark","base16/heetch-dark","base16/helios","base16/hopscotch","base16/horizon-dark","base16/humanoid-dark","base16/ia-dark","base16/icy-dark","base16/ir-black","base16/isotope","base16/kimber","base16/london-tube","base16/macintosh","base16/marrakesh","base16/materia","base16/material","base16/material-darker","base16/material-palenight","base16/material-vivid","base16/mellow-purple","base16/mocha","base16/monokai","base16/nebula","base16/nord","base16/nova","base16/ocean","base16/oceanicnext","base16/onedark","base16/outrun-dark","base16/papercolor-dark","base16/paraiso","base16/pasque","base16/phd","base16/pico","base16/pop","base16/porple","base16/qualia","base16/railscasts","base16/rebecca","base16/ros-pine","base16/ros-pine-moon","base16/sandcastle","base16/seti-ui","base16/silk-dark","base16/snazzy","base16/solar-flare","base16/solarized-dark","base16/spacemacs","base16/summercamp","base16/summerfruit-dark","base16/synth-midnight-terminal-dark","base16/tango","base16/tender","base16/tomorrow-night","base16/twilight","base16/unikitty-dark","base16/vulcan","base16/windows-10","base16/windows-95","base16/windows-high-contrast","base16/windows-nt","base16/woodland","base16/xcode-dusk","base16/zenburn","codepen-embed","dark","devibeans","far","felipec","github-dark","github-dark-dimmed","gml","gradient-dark","hybrid","ir-black","isbl-editor-dark","kimbie-dark","lioshi","monokai","monokai-sublime","night-owl","nnfx-dark","nord","obsidian","panda-syntax-dark","paraiso-dark","pojoaque","qtcreator-dark","rainbow","shades-of-purple","srcery","stackoverflow-dark","sunburst","tomorrow-night-blue","tomorrow-night-bright","tokyo-night-dark","vs2015","xt256","ant-design","a11y-light","arduino-light","ascetic","atom-one-light","base16/atelier-cave-light","base16/atelier-dune-light","base16/atelier-estuary-light","base16/atelier-forest-light","base16/atelier-heath-light","base16/atelier-lakeside-light","base16/atelier-plateau-light","base16/atelier-savanna-light","base16/atelier-seaside-light","base16/atelier-sulphurpool-light","base16/brush-trees","base16/classic-light","base16/cupcake","base16/cupertino","base16/default-light","base16/dirtysea","base16/edge-light","base16/equilibrium-gray-light","base16/equilibrium-light","base16/fruit-soda","base16/github","base16/google-light","base16/grayscale-light","base16/gruvbox-light-hard","base16/gruvbox-light-medium","base16/gruvbox-light-soft","base16/harmonic16-light","base16/heetch-light","base16/humanoid-light","base16/horizon-light","base16/ia-light","base16/material-lighter","base16/mexico-light","base16/one-light","base16/papercolor-light","base16/ros-pine-dawn","base16/sagelight","base16/shapeshifter","base16/silk-light","base16/solar-flare-light","base16/solarized-light","base16/summerfruit-light","base16/synth-midnight-terminal-light","base16/tomorrow","base16/unikitty-light","base16/windows-10-light","base16/windows-95-light","base16/windows-high-contrast-light","brown-paper","base16/windows-nt-light","color-brewer","docco","foundation","github","googlecode","gradient-light","grayscale","idea","intellij-light","isbl-editor-light","kimbie-light","lightfair","magula","mono-blue","nnfx-light","panda-syntax-light","paraiso-light","purebasic","qtcreator-light","routeros","school-book","stackoverflow-light","tokyo-night-light","vs","xcode","default"],u.ALIAS_CODE_LANGUAGES=["abc","plantuml","mermaid","flowchart","echarts","mindmap","graphviz","math","markmap","smiles","js","ts","html","toml","c#","bat"],u.CDN="https://unpkg.com/vditor@".concat("3.10.9"),u.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},u.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},u.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},u.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:"".concat(u.CDN,"/dist/css/content-theme")},u}()},931:(m,h,y)=>{y.d(h,{Y:()=>p});var C=y(913),S=y(161),u=y(59),d=y(933),p=function(v,E,b){v===void 0&&(v=document),E===void 0&&(E=C.Y.CDN);var k=u.SMILESRenderAdapter.getElements(v);k.length>0&&(0,S.Z)("".concat(E,"/dist/js/smiles-drawer/smiles-drawer.min.js?v=2.1.7"),"vditorAbcjsScript").then(function(){var M=new SmiDrawer({},{});k.forEach(function(x){var A=u.SMILESRenderAdapter.getCode(x).trim();if(!(x.getAttribute("data-processed")==="true"||A.trim()==="")){var g="smiles"+(0,d.Ee)();x.innerHTML='<svg id="'.concat(g,'"></svg>'),M.draw(A,"#"+g,b==="dark"?"dark":void 0),x.setAttribute("data-processed","true")}})})}},288:(m,h,y)=>{y.d(h,{$:()=>d});var C=y(913),S=y(161),u=y(59),d=function(p,v){p===void 0&&(p=document),v===void 0&&(v=C.Y.CDN);var E=u.abcRenderAdapter.getElements(p);E.length>0&&(0,S.Z)("".concat(v,"/dist/js/abcjs/abcjs_basic.min.js"),"vditorAbcjsScript").then(function(){E.forEach(function(b){b.parentElement.classList.contains("vditor-wysiwyg__pre")||b.parentElement.classList.contains("vditor-ir__marker--pre")||b.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(b,u.abcRenderAdapter.getCode(b).trim()),b.style.overflowX="auto",b.setAttribute("data-processed","true"))})})}},59:(m,h,y)=>{y.r(h),y.d(h,{SMILESRenderAdapter:()=>S,abcRenderAdapter:()=>E,chartRenderAdapter:()=>v,flowchartRenderAdapter:()=>k,graphvizRenderAdapter:()=>b,markmapRenderAdapter:()=>d,mathRenderAdapter:()=>C,mermaidRenderAdapter:()=>u,mindmapRenderAdapter:()=>p,plantumlRenderAdapter:()=>M});var C={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-math")}},S={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-smiles")}},u={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-mermaid")}},d={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-markmap")}},p={getCode:function(x){return x.getAttribute("data-code")},getElements:function(x){return x.querySelectorAll(".language-mindmap")}},v={getCode:function(x){return x.innerText},getElements:function(x){return x.querySelectorAll(".language-echarts")}},E={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-abc")}},b={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-graphviz")}},k={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-flowchart")}},M={getCode:function(x){return x.textContent},getElements:function(x){return x.querySelectorAll(".language-plantuml")}}},784:(m,h,y)=>{y.d(h,{v:()=>E});var C=y(913),S=y(161),u=y(59),d=y(933),p=function(b,k,M,x){function A(g){return g instanceof M?g:new M(function(O){O(g)})}return new(M||(M=Promise))(function(g,O){function I(B){try{P(x.next(B))}catch(Y){O(Y)}}function R(B){try{P(x.throw(B))}catch(Y){O(Y)}}function P(B){B.done?g(B.value):A(B.value).then(I,R)}P((x=x.apply(b,k||[])).next())})},v=function(b,k){var M={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,A,g,O;return O={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function I(P){return function(B){return R([P,B])}}function R(P){if(x)throw new TypeError("Generator is already executing.");for(;O&&(O=0,P[0]&&(M=0)),M;)try{if(x=1,A&&(g=P[0]&2?A.return:P[0]?A.throw||((g=A.return)&&g.call(A),0):A.next)&&!(g=g.call(A,P[1])).done)return g;switch(A=0,g&&(P=[P[0]&2,g.value]),P[0]){case 0:case 1:g=P;break;case 4:return M.label++,{value:P[1],done:!1};case 5:M.label++,A=P[1],P=[0];continue;case 7:P=M.ops.pop(),M.trys.pop();continue;default:if(g=M.trys,!(g=g.length>0&&g[g.length-1])&&(P[0]===6||P[0]===2)){M=0;continue}if(P[0]===3&&(!g||P[1]>g[0]&&P[1]<g[3])){M.label=P[1];break}if(P[0]===6&&M.label<g[1]){M.label=g[1],g=P;break}if(g&&M.label<g[2]){M.label=g[2],M.ops.push(P);break}g[2]&&M.ops.pop(),M.trys.pop();continue}P=k.call(b,M)}catch(B){P=[6,B],A=0}finally{x=g=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},E=function(b,k,M){b===void 0&&(b=document),k===void 0&&(k=C.Y.CDN);var x=u.chartRenderAdapter.getElements(b);x.length>0&&(0,S.Z)("".concat(k,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){x.forEach(function(A){return p(void 0,void 0,void 0,function(){var g,O,I;return v(this,function(R){switch(R.label){case 0:if(A.parentElement.classList.contains("vditor-wysiwyg__pre")||A.parentElement.classList.contains("vditor-ir__marker--pre"))return[2];if(g=u.chartRenderAdapter.getCode(A).trim(),!g)return[2];R.label=1;case 1:return R.trys.push([1,3,,4]),A.getAttribute("data-processed")==="true"?[2]:[4,(0,d.kY)(g)];case 2:return O=R.sent(),echarts.init(A,M==="dark"?"dark":void 0).setOption(O),A.setAttribute("data-processed","true"),[3,4];case 3:return I=R.sent(),A.className="vditor-reset--error",A.innerHTML="echarts render error: <br>".concat(I),[3,4];case 4:return[2]}})})})})}},51:(m,h,y)=>{y.d(h,{o:()=>u});var C=y(695),S=y(913),u=function(d,p){Array.from(d.querySelectorAll("pre > code")).filter(function(v,E){return!(v.parentElement.classList.contains("vditor-wysiwyg__pre")||v.parentElement.classList.contains("vditor-ir__marker--pre")||v.classList.contains("language-mermaid")||v.classList.contains("language-flowchart")||v.classList.contains("language-echarts")||v.classList.contains("language-mindmap")||v.classList.contains("language-plantuml")||v.classList.contains("language-markmap")||v.classList.contains("language-abc")||v.classList.contains("language-graphviz")||v.classList.contains("language-math")||v.classList.contains("language-smiles")||v.style.maxHeight.indexOf("px")>-1||d.classList.contains("vditor-preview")&&E>5)}).forEach(function(v){var E,b,k,M=v.innerText;if(v.classList.contains("highlight-chroma")){var x=v.cloneNode(!0);x.querySelectorAll(".highlight-ln").forEach(function(I){I.remove()}),M=x.innerText}else M.endsWith(`
`)&&(M=M.substr(0,M.length-1));var A='<svg><use xlink:href="#vditor-icon-copy"></use></svg>';document.getElementById("vditorIconScript")||(A='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>');var g=document.createElement("div");g.className="vditor-copy",g.innerHTML='<span aria-label="'.concat(((E=window.VditorI18n)===null||E===void 0?void 0:E.copy)||"复制",`"
onmouseover="this.setAttribute('aria-label', '`).concat(((b=window.VditorI18n)===null||b===void 0?void 0:b.copy)||"复制",`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`).concat(((k=window.VditorI18n)===null||k===void 0?void 0:k.copied)||"已复制",`');this.previousElementSibling.blur()">`).concat(A,"</span>");var O=document.createElement("textarea");O.value=(0,C.p)(M),g.insertAdjacentElement("afterbegin",O),p&&p.renderMenu&&p.renderMenu(v,g),v.before(g),v.style.maxHeight=window.outerHeight-40+"px",v.insertAdjacentHTML("afterend",'<span style="position: absolute">'.concat(S.Y.ZWSP,"</span>"))})}},500:(m,h,y)=>{y.d(h,{D:()=>d});var C=y(913),S=y(161),u=y(59),d=function(p,v){v===void 0&&(v=C.Y.CDN);var E=u.flowchartRenderAdapter.getElements(p);E.length!==0&&(0,S.Z)("".concat(v,"/dist/js/flowchart.js/flowchart.min.js"),"vditorFlowchartScript").then(function(){E.forEach(function(b){if(b.getAttribute("data-processed")!=="true"){var k=flowchart.parse(u.flowchartRenderAdapter.getCode(b));b.innerHTML="",k.drawSVG(b),b.setAttribute("data-processed","true")}})})}},339:(m,h,y)=>{y.d(h,{m:()=>d});var C=y(913),S=y(161),u=y(59),d=function(p,v){v===void 0&&(v=C.Y.CDN);var E=u.graphvizRenderAdapter.getElements(p);E.length!==0&&(0,S.Z)("".concat(v,"/dist/js/graphviz/viz.js"),"vditorGraphVizScript").then(function(){E.forEach(function(b){var k=u.graphvizRenderAdapter.getCode(b);if(!(b.parentElement.classList.contains("vditor-wysiwyg__pre")||b.parentElement.classList.contains("vditor-ir__marker--pre"))&&!(b.getAttribute("data-processed")==="true"||k.trim()==="")){try{var M=new Blob(["importScripts('".concat(document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js"),"');")],{type:"application/javascript"}),x=window.URL||window.webkitURL,A=x.createObjectURL(M),g=new Worker(A);new Viz({worker:g}).renderSVGElement(k).then(function(O){b.innerHTML=O.outerHTML}).catch(function(O){b.innerHTML="graphviz render error: <br>".concat(O),b.className="vditor-reset--error"})}catch(O){console.error("graphviz error",O)}b.setAttribute("data-processed","true")}})})}},108:(m,h,y)=>{y.d(h,{$:()=>d});var C=y(913),S=y(161),u=y(505),d=function(p,v,E){v===void 0&&(v=document),E===void 0&&(E=C.Y.CDN);var b=p.style;C.Y.CODE_THEME.includes(b)||(b="github");var k=document.getElementById("vditorHljsStyle"),M="".concat(E,"/dist/js/highlight.js/styles/").concat(b,".min.css");if(k&&k.getAttribute("href")!==M&&k.remove(),(0,u.T)("".concat(E,"/dist/js/highlight.js/styles/").concat(b,".min.css"),"vditorHljsStyle"),p.enable!==!1){var x=v.querySelectorAll("pre > code");x.length!==0&&(0,S.Z)("".concat(E,"/dist/js/highlight.js/highlight.min.js?v=11.7.0"),"vditorHljsScript").then(function(){(0,S.Z)("".concat(E,"/dist/js/highlight.js/third-languages.js?v=1.0.1"),"vditorHljsThirdScript").then(function(){v.querySelectorAll("pre > code").forEach(function(A){if(!(A.parentElement.classList.contains("vditor-ir__marker--pre")||A.parentElement.classList.contains("vditor-wysiwyg__pre"))&&!(A.classList.contains("language-mermaid")||A.classList.contains("language-flowchart")||A.classList.contains("language-echarts")||A.classList.contains("language-mindmap")||A.classList.contains("language-plantuml")||A.classList.contains("language-smiles")||A.classList.contains("language-abc")||A.classList.contains("language-graphviz")||A.classList.contains("language-math"))){p.defaultLang!==""&&A.className.indexOf("language-")===-1&&A.classList.add("language-"+p.defaultLang);var g=A.className.replace("language-","");if(window.hljs.getLanguage(g)||(g="plaintext"),A.innerHTML=window.hljs.highlight(A.textContent,{language:g,ignoreIllegals:!0}).value,A.classList.add("hljs"),!!p.lineNumber){A.classList.add("vditor-linenumber");var O=A.querySelector(".vditor-linenumber__temp");O||(O=document.createElement("div"),O.className="vditor-linenumber__temp",A.insertAdjacentElement("beforeend",O));var I=getComputedStyle(A).whiteSpace,R=!1;(I==="pre-wrap"||I==="pre-line")&&(R=!0);var P="",B=A.textContent.split(/\r\n|\r|\n/g);B.pop(),B.map(function(Y){var G="";R&&(O.textContent=Y||`
`,G=' style="height:'.concat(O.getBoundingClientRect().height,'px"')),P+="<span".concat(G,"></span>")}),O.style.display="none",P='<span class="vditor-linenumber__rows">'.concat(P,"</span>"),A.insertAdjacentHTML("beforeend",P)}}})})})}}},597:(m,h,y)=>{y.d(h,{K:()=>E});var C=y(913),S=y(161),u=y(59),d={},p=function(b,k){var M=b.transform(k),x=Object.keys(M.features).filter(function(R){return!d[R]});x.forEach(function(R){d[R]=!0});var A=b.getAssets(x),g=A.styles,O=A.scripts,I=window.markmap;return g&&I.loadCSS(g),O&&I.loadJS(O),M},v=function(b,k){var M=window.markmap,x=M.Transformer,A=M.Markmap,g=M.deriveOptions;M.globalCSS;var O=new x;b.innerHTML='<svg style="width:100%"></svg>';var I=b.firstChild,R=A.create(I,null),P=p(O,k),B=P.root,Y=P.frontmatter,G=Y==null?void 0:Y.markmap,re=g(G);R.setData(B,re),R.fit()},E=function(b,k){b===void 0&&(b=document),k===void 0&&(k=C.Y.CDN);var M=u.markmapRenderAdapter.getElements(b);M.length!==0&&(0,S.Z)("".concat(k,"/dist/js/markmap/markmap.min.js"),"vditorMarkerScript").then(function(){M.forEach(function(x){var A=u.markmapRenderAdapter.getCode(x);if(!(x.getAttribute("data-processed")==="true"||A.trim()==="")){var g=document.createElement("div");g.className="language-markmap",x.parentNode.appendChild(g),v(g,A),x.parentNode.childNodes[0].nodeName=="CODE"&&x.parentNode.removeChild(x.parentNode.childNodes[0])}})})}},960:(m,h,y)=>{y.d(h,{T:()=>v});var C=y(913),S=y(161),u=y(505),d=y(695),p=y(59),v=function(E,b){E===void 0&&(E=document);var k=p.mathRenderAdapter.getElements(E);if(k.length!==0){var M={cdn:C.Y.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(b&&b.math&&(b.math=Object.assign({},M.math,b.math)),b=Object.assign({},M,b),b.math.engine==="KaTeX")(0,u.T)("".concat(b.cdn,"/dist/js/katex/katex.min.css?v=0.16.9"),"vditorKatexStyle"),(0,S.Z)("".concat(b.cdn,"/dist/js/katex/katex.min.js?v=0.16.9"),"vditorKatexScript").then(function(){(0,S.Z)("".concat(b.cdn,"/dist/js/katex/mhchem.min.js?v=0.16.9"),"vditorKatexChemScript").then(function(){k.forEach(function(g){if(!(g.parentElement.classList.contains("vditor-wysiwyg__pre")||g.parentElement.classList.contains("vditor-ir__marker--pre"))&&!g.getAttribute("data-math")){var O=(0,d.p)(p.mathRenderAdapter.getCode(g));g.setAttribute("data-math",O);try{g.innerHTML=katex.renderToString(O,{displayMode:g.tagName==="DIV",output:"html",macros:b.math.macros})}catch(I){g.innerHTML=I.message,g.className="language-math vditor-reset--error"}g.addEventListener("copy",function(I){I.stopPropagation(),I.preventDefault();var R=I.currentTarget.closest(".language-math");I.clipboardData.setData("text/html",R.innerHTML),I.clipboardData.setData("text/plain",R.getAttribute("data-math"))})}})})});else if(b.math.engine==="MathJax"){var x=function(g){if(g.length!==0){var O=0,I=g[g.length-1],R=function(){var P=g[O++];P===I?P():P(R)};R()}};window.MathJax||(window.MathJax={loader:{paths:{mathjax:"".concat(b.cdn,"/dist/js/mathjax")}},startup:{typeset:!1},tex:{macros:b.math.macros}},Object.assign(window.MathJax,b.math.mathJaxOptions)),(0,S.U)("".concat(b.cdn,"/dist/js/mathjax/tex-svg-full.js"),"protyleMathJaxScript");var A=function(g,O){var I=(0,d.p)(g.textContent).trim(),R=window.MathJax.getMetricsFor(g);R.display=g.tagName==="DIV",window.MathJax.tex2svgPromise(I,R).then(function(P){g.innerHTML="",g.setAttribute("data-math",I),g.append(P),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var B=P.querySelector('[data-mml-node="merror"]');B&&B.textContent.trim()!==""&&(g.innerHTML=B.textContent.trim(),g.className="vditor-reset--error"),O&&O()})};window.MathJax.startup.promise.then(function(){for(var g=[],O=function(R){var P=k[R];!P.parentElement.classList.contains("vditor-wysiwyg__pre")&&!P.parentElement.classList.contains("vditor-ir__marker--pre")&&!P.getAttribute("data-math")&&(0,d.p)(P.textContent).trim()&&g.push(function(B){R===k.length-1?A(P):A(P,B)})},I=0;I<k.length;I++)O(I);x(g)})}}}},0:(m,h,y)=>{y.d(h,{l:()=>p});var C=y(933),S=function(v,E){v.insertAdjacentHTML("afterend",'<video controls="controls" src="'.concat(E,'"></video>')),v.remove()},u=function(v,E){v.insertAdjacentHTML("afterend",'<audio controls="controls" src="'.concat(E,'"></audio>')),v.remove()},d=function(v,E){var b=E.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),k=E.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),M=E.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),x=E.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),A=E.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),g=E.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),O=E.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),I=E.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);if(b&&b[1].length===11)v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'.concat(b[1]+(b[2]?"?start="+b[2]:""),'"></iframe>')),v.remove();else if(k&&k[1])v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'.concat(k[1],'"></iframe>')),v.remove();else if(M&&M[1])v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='.concat(M[1],'"></iframe>')),v.remove();else if(x&&x[1])v.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`.concat(x[1],'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>')),v.remove();else if(A&&A[0])v.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`.concat(encodeURIComponent(A[0]),'"></iframe>')),v.remove();else if(g&&g[2])v.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`.concat(g[2],'"></iframe>')),v.remove();else if(E.indexOf("bilibili.com")>-1&&(E.indexOf("bvid=")>-1||O&&O[1])){var R={bvid:(0,C.TK)("bvid",E)||O&&O[1],page:"1",high_quality:"1",as_wide:"1",allowfullscreen:"true",autoplay:"0"};new URL(E.startsWith("http")?E:"https:"+E).search.split("&").forEach(function(Y,G){if(Y){G===0&&(Y=Y.substr(1));var re=Y.split("=");R[re[0]]=re[1]}});var P="https://player.bilibili.com/player.html?",B=Object.keys(R);B.forEach(function(Y,G){P+="".concat(Y,"=").concat(R[Y]),G<B.length-1&&(P+="&")}),v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="'.concat(P,'"></iframe>')),v.remove()}else I&&I[1]&&(v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'.concat(I[1],'"></iframe>')),v.remove())},p=function(v){v&&v.querySelectorAll("a").forEach(function(E){var b=E.getAttribute("href");b&&(b.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?S(E,b):b.match(/^.+.(mp3|wav|flac)$/)?u(E,b):d(E,b))})}},975:(m,h,y)=>{y.d(h,{e:()=>E});var C=y(913),S=y(161),u=y(59),d=y(933),p=function(b,k,M,x){function A(g){return g instanceof M?g:new M(function(O){O(g)})}return new(M||(M=Promise))(function(g,O){function I(B){try{P(x.next(B))}catch(Y){O(Y)}}function R(B){try{P(x.throw(B))}catch(Y){O(Y)}}function P(B){B.done?g(B.value):A(B.value).then(I,R)}P((x=x.apply(b,k||[])).next())})},v=function(b,k){var M={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,A,g,O;return O={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function I(P){return function(B){return R([P,B])}}function R(P){if(x)throw new TypeError("Generator is already executing.");for(;O&&(O=0,P[0]&&(M=0)),M;)try{if(x=1,A&&(g=P[0]&2?A.return:P[0]?A.throw||((g=A.return)&&g.call(A),0):A.next)&&!(g=g.call(A,P[1])).done)return g;switch(A=0,g&&(P=[P[0]&2,g.value]),P[0]){case 0:case 1:g=P;break;case 4:return M.label++,{value:P[1],done:!1};case 5:M.label++,A=P[1],P=[0];continue;case 7:P=M.ops.pop(),M.trys.pop();continue;default:if(g=M.trys,!(g=g.length>0&&g[g.length-1])&&(P[0]===6||P[0]===2)){M=0;continue}if(P[0]===3&&(!g||P[1]>g[0]&&P[1]<g[3])){M.label=P[1];break}if(P[0]===6&&M.label<g[1]){M.label=g[1],g=P;break}if(g&&M.label<g[2]){M.label=g[2],M.ops.push(P);break}g[2]&&M.ops.pop(),M.trys.pop();continue}P=k.call(b,M)}catch(B){P=[6,B],A=0}finally{x=g=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},E=function(b,k,M){b===void 0&&(b=document),k===void 0&&(k=C.Y.CDN);var x=u.mermaidRenderAdapter.getElements(b);x.length!==0&&(0,S.Z)("".concat(k,"/dist/js/mermaid/mermaid.min.js"),"vditorMermaidScript").then(function(){var A={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8,showSequenceNumbers:!0},gantt:{leftPadding:75,rightPadding:20}};M==="dark"&&(A.theme="dark"),mermaid.initialize(A),x.forEach(function(g){return p(void 0,void 0,void 0,function(){var O,I,R,P,B;return v(this,function(Y){switch(Y.label){case 0:if(O=u.mermaidRenderAdapter.getCode(g),g.getAttribute("data-processed")==="true"||O.trim()==="")return[2];I="mermaid"+(0,d.Ee)(),Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,mermaid.render(I,g.textContent)];case 2:return R=Y.sent(),g.innerHTML=R.svg,[3,4];case 3:return P=Y.sent(),B=document.querySelector("#"+I),g.innerHTML="".concat(B.outerHTML,`<br>
<div style="text-align: left"><small>`).concat(P.message.replace(/\n/,"<br>"),"</small></div>"),B.parentElement.remove(),[3,4];case 4:return g.setAttribute("data-processed","true"),[2]}})})})})}},162:(m,h,y)=>{y.d(h,{l:()=>d});var C=y(913),S=y(161),u=y(59),d=function(p,v,E){p===void 0&&(p=document),v===void 0&&(v=C.Y.CDN);var b=u.mindmapRenderAdapter.getElements(p);b.length>0&&(0,S.Z)("".concat(v,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){b.forEach(function(k){if(!(k.parentElement.classList.contains("vditor-wysiwyg__pre")||k.parentElement.classList.contains("vditor-ir__marker--pre"))){var M=u.mindmapRenderAdapter.getCode(k);if(M)try{if(k.getAttribute("data-processed")==="true")return;echarts.init(k,E==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(M))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(x,A){var g;return!((g=A==null?void 0:A.data)===null||g===void 0)&&g.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),k.setAttribute("data-processed","true")}catch(x){k.className="vditor-reset--error",k.innerHTML="mindmap render error: <br>".concat(x)}}})})}},70:(m,h,y)=>{y.d(h,{N:()=>u});var C=y(164),S=y(960),u=function(d,p,v){var E="",b=[];if(Array.from(d.children).forEach(function(A,g){if((0,C.c)(A)){if(v){var O=A.id.lastIndexOf("_");A.id=A.id.substring(0,O===-1?void 0:O)+"_"+g}b.push(A.id),E+=A.outerHTML.replace("<wbr>","")}}),E==="")return p.innerHTML="","";var k=document.createElement("div");if(v)v.lute.SetToC(!0),v.currentMode==="wysiwyg"&&!v.preview.element.contains(d)?k.innerHTML=v.lute.SpinVditorDOM("<p>[ToC]</p>"+E):v.currentMode==="ir"&&!v.preview.element.contains(d)?k.innerHTML=v.lute.SpinVditorIRDOM("<p>[ToC]</p>"+E):k.innerHTML=v.lute.HTML2VditorDOM("<p>[ToC]</p>"+E),v.lute.SetToC(v.options.preview.markdown.toc);else{p.classList.add("vditor-outline");var M=Lute.New();M.SetToC(!0),k.innerHTML=M.HTML2VditorDOM("<p>[ToC]</p>"+E)}var x=k.firstElementChild.querySelectorAll("li > span[data-target-id]");return x.forEach(function(A,g){if(A.nextElementSibling&&A.nextElementSibling.tagName==="UL"){var O="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>";document.getElementById("vditorIconScript")||(O='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),A.innerHTML="".concat(O,"<span>").concat(A.innerHTML,"</span>")}else A.innerHTML="<svg></svg><span>".concat(A.innerHTML,"</span>");A.setAttribute("data-target-id",b[g])}),E=k.firstElementChild.innerHTML,x.length===0?(p.innerHTML="",E):(p.innerHTML=E,v&&(0,S.T)(p,{cdn:v.options.cdn,math:v.options.preview.math}),p.firstElementChild.addEventListener("click",function(A){for(var g=A.target;g&&!g.isEqualNode(p);){if(g.classList.contains("vditor-outline__action")){g.classList.contains("vditor-outline__action--close")?(g.classList.remove("vditor-outline__action--close"),g.parentElement.nextElementSibling.setAttribute("style","display:block")):(g.classList.add("vditor-outline__action--close"),g.parentElement.nextElementSibling.setAttribute("style","display:none")),A.preventDefault(),A.stopPropagation();break}else if(g.getAttribute("data-target-id")){A.preventDefault(),A.stopPropagation();var O=document.getElementById(g.getAttribute("data-target-id"));if(!O)return;if(v)if(v.options.height==="auto"){var I=O.offsetTop+v.element.offsetTop;v.options.toolbarConfig.pin||(I+=v.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,I)}else v.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,v.element.offsetTop),v.preview.element.contains(d)?d.parentElement.scrollTop=O.offsetTop:d.scrollTop=O.offsetTop;else window.scrollTo(window.scrollX,O.offsetTop);break}g=g.parentElement}}),E)}},591:(m,h,y)=>{y.d(h,{M:()=>d});var C=y(913),S=y(161),u=y(59),d=function(p,v){p===void 0&&(p=document),v===void 0&&(v=C.Y.CDN);var E=u.plantumlRenderAdapter.getElements(p);E.length!==0&&(0,S.Z)("".concat(v,"/dist/js/plantuml/plantuml-encoder.min.js"),"vditorPlantumlScript").then(function(){E.forEach(function(b){if(!(b.parentElement.classList.contains("vditor-wysiwyg__pre")||b.parentElement.classList.contains("vditor-ir__marker--pre"))){var k=u.plantumlRenderAdapter.getCode(b).trim();if(k)try{b.innerHTML='<object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/~1'.concat(plantumlEncoder.encode(k),'"/>')}catch(M){b.className="vditor-reset--error",b.innerHTML="plantuml render error: <br>".concat(M)}}})})}},796:(m,h,y)=>{y.d(h,{X:()=>C});var C=function(S){var u=Lute.New();return u.PutEmojis(S.emojis),u.SetEmojiSite(S.emojiSite),u.SetHeadingAnchor(S.headingAnchor),u.SetInlineMathAllowDigitAfterOpenMarker(S.inlineMathDigit),u.SetAutoSpace(S.autoSpace),u.SetToC(S.toc),u.SetFootnotes(S.footnotes),u.SetFixTermTypo(S.fixTermTypo),u.SetVditorCodeBlockPreview(S.codeBlockPreview),u.SetVditorMathBlockPreview(S.mathBlockPreview),u.SetSanitize(S.sanitize),u.SetChineseParagraphBeginningSpace(S.paragraphBeginningSpace),u.SetRenderListStyle(S.listStyle),u.SetLinkBase(S.linkBase),u.SetLinkPrefix(S.linkPrefix),u.SetMark(S.mark),u.SetGFMAutoLink(S.gfmAutoLink),S.lazyLoadImage&&u.SetImageLazyLoading(S.lazyLoadImage),u}},726:(m,h,y)=>{y.d(h,{o:()=>C});var C=function(S,u,d){d===void 0&&(d="classic");var p=S.getBoundingClientRect(),v=36;document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'.concat(d==="dark"?" vditor--dark":"",`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `).concat(window.VditorI18n.spin,`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`).concat(window.VditorI18n.close,`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `).concat(S.width,"px;height:").concat(S.height,"px;transform: translate3d(").concat(p.left,"px, ").concat(p.top-v,'px, 0)" src="').concat(S.getAttribute("src"),`">
    </div>
</div>`)),document.body.style.overflow="hidden";var E=document.querySelector(".vditor-img img"),b="translate3d(".concat(Math.max(0,window.innerWidth-S.naturalWidth)/2,"px, ").concat(Math.max(0,window.innerHeight-v-S.naturalHeight)/2,"px, 0)");setTimeout(function(){E.setAttribute("style","transition: transform .3s ease-in-out;transform: ".concat(b)),setTimeout(function(){E.parentElement.scrollTo((E.parentElement.scrollWidth-E.parentElement.clientWidth)/2,(E.parentElement.scrollHeight-E.parentElement.clientHeight)/2)},400)});var k=document.querySelector(".vditor-img__btn");k.addEventListener("click",function(){var M=parseInt(k.getAttribute("data-deg"),10)+90;M/90%2===1&&S.naturalWidth>E.parentElement.clientHeight?E.style.transform="translate3d(".concat(Math.max(0,window.innerWidth-S.naturalWidth)/2,"px, ").concat(S.naturalWidth/2-S.naturalHeight/2,"px, 0) rotateZ(").concat(M,"deg)"):E.style.transform="".concat(b," rotateZ(").concat(M,"deg)"),k.setAttribute("data-deg",M.toString()),setTimeout(function(){E.parentElement.scrollTo((E.parentElement.scrollWidth-E.parentElement.clientWidth)/2,(E.parentElement.scrollHeight-E.parentElement.clientHeight)/2)},400)})}},13:(m,h,y)=>{y.d(h,{h:()=>u});var C=y(913),S=y(505),u=function(d,p){p===void 0&&(p=C.Y.CDN),C.Y.CODE_THEME.includes(d)||(d="github");var v=document.getElementById("vditorHljsStyle"),E="".concat(p,"/dist/js/highlight.js/styles/").concat(d,".min.css");v?v.getAttribute("href")!==E&&(v.remove(),(0,S.T)(E,"vditorHljsStyle")):(0,S.T)(E,"vditorHljsStyle")}},873:(m,h,y)=>{y.d(h,{H:()=>S});var C=y(505),S=function(u,d){if(!(!u||!d)){var p=document.getElementById("vditorContentTheme"),v="".concat(d,"/").concat(u,".css");p?p.getAttribute("href")!==v&&(p.remove(),(0,C.T)(v,"vditorContentTheme")):(0,C.T)(v,"vditorContentTheme")}}},161:(m,h,y)=>{y.d(h,{U:()=>C,Z:()=>S});var C=function(u,d){if(document.getElementById(d))return!1;var p=new XMLHttpRequest;p.open("GET",u,!1),p.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),p.send("");var v=document.createElement("script");v.type="text/javascript",v.text=p.responseText,v.id=d,document.head.appendChild(v)},S=function(u,d){return new Promise(function(p,v){if(document.getElementById(d))return p(!0),!1;var E=document.createElement("script");E.src=u,E.async=!0,document.head.appendChild(E),E.onerror=function(b){v(b)},E.onload=function(){if(document.getElementById(d))return E.remove(),p(!0),!1;E.id=d,p(!0)}})}},505:(m,h,y)=>{y.d(h,{T:()=>C});var C=function(S,u){if(!document.getElementById(u)){var d=document.createElement("link");d.id=u,d.rel="stylesheet",d.type="text/css",d.href=S,document.getElementsByTagName("head")[0].appendChild(d)}}},695:(m,h,y)=>{y.d(h,{p:()=>C});var C=function(S){return S.replace(/\u00a0/g," ")}},629:(m,h,y)=>{y.d(h,{D:()=>u,H8:()=>E,_0:()=>p,fG:()=>v,gm:()=>S,nr:()=>C,y3:()=>d});var C=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},S=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},u=function(){try{return typeof localStorage<"u"}catch{return!1}},d=function(){return navigator.userAgent.indexOf("iPhone")>-1?"touchstart":"click"},p=function(b){return navigator.platform.toUpperCase().indexOf("MAC")>=0?!!(b.metaKey&&!b.ctrlKey):!!(!b.metaKey&&b.ctrlKey)},v=function(b){return/Mac/.test(navigator.platform)||navigator.platform==="iPhone"?b.indexOf("⇧")>-1&&S()&&(b=b.replace(";",":").replace("=","+").replace("-","_")):(b.startsWith("⌘")?b=b.replace("⌘","⌘+"):b.startsWith("⌥")&&b.substr(1,1)!=="⌘"?b=b.replace("⌥","⌥+"):b=b.replace("⇧⌘","⌘+⇧+").replace("⌥⌘","⌥+⌘+"),b=b.replace("⌘","Ctrl").replace("⇧","Shift").replace("⌥","Alt"),b.indexOf("Shift")>-1&&(b=b.replace(";",":").replace("=","+").replace("-","_"))),b},E=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},933:(m,h,y)=>{y.d(h,{Ee:()=>C,TK:()=>S,kY:()=>u});var C=function(){return([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(d){return(parseInt(d,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt(d,10)/4).toString(16)})},S=function(d,p){p===void 0&&(p=window.location.search);var v=p.substring(p.indexOf("?")),E=v.indexOf("#"),b=new URLSearchParams(v.substring(0,E>=0?E:void 0));return b.get(d)},u=function(d){return Function('"use strict";return ('.concat(d,")"))()}},598:(m,h,y)=>{y.d(h,{Ab:()=>u,KJ:()=>b,KR:()=>d,Rp:()=>k,Th:()=>p,XW:()=>S,_Y:()=>E,pt:()=>v});var C=y(164),S=function(M,x){for(var A=b(M,x),g=!1,O=!1;A&&!A.classList.contains("vditor-reset")&&!O;)g=b(A.parentElement,x),g?A=g:O=!0;return A||!1},u=function(M,x){for(var A=(0,C.f)(M,x),g=!1,O=!1;A&&!A.classList.contains("vditor-reset")&&!O;)g=(0,C.f)(A.parentElement,x),g?A=g:O=!0;return A||!1},d=function(M){var x=u(M,"UL"),A=u(M,"OL"),g=x;return A&&(!x||x&&A.contains(x))&&(g=A),g},p=function(M,x,A){if(!M)return!1;M.nodeType===3&&(M=M.parentElement);for(var g=M,O=!1;g&&!O&&!g.classList.contains("vditor-reset");)g.getAttribute(x)===A?O=!0:g=g.parentElement;return O&&g},v=function(M){if(!M)return!1;M.nodeType===3&&(M=M.parentElement);var x=M,A=!1,g=p(M,"data-block","0");if(g)return g;for(;x&&!A&&!x.classList.contains("vditor-reset");)x.tagName==="H1"||x.tagName==="H2"||x.tagName==="H3"||x.tagName==="H4"||x.tagName==="H5"||x.tagName==="H6"||x.tagName==="P"||x.tagName==="BLOCKQUOTE"||x.tagName==="OL"||x.tagName==="UL"?A=!0:x=x.parentElement;return A&&x},E=function(M,x){if(!M)return!1;M.nodeType===3&&(M=M.parentElement);for(var A=M,g=!1;A&&!g&&!A.classList.contains("vditor-reset");)A.nodeName===x?g=!0:A=A.parentElement;return g&&A},b=function(M,x){if(!M)return!1;M.nodeType===3&&(M=M.parentElement);for(var A=M,g=!1;A&&!g&&!A.classList.contains("vditor-reset");)A.classList.contains(x)?g=!0:A=A.parentElement;return g&&A},k=function(M){for(;M&&M.lastChild;)M=M.lastChild;return M}},164:(m,h,y)=>{y.d(h,{c:()=>S,f:()=>C});var C=function(u,d){if(!u)return!1;u.nodeType===3&&(u=u.parentElement);for(var p=u,v=!1;p&&!v&&!p.classList.contains("vditor-reset");)p.nodeName.indexOf(d)===0?v=!0:p=p.parentElement;return v&&p},S=function(u){var d=C(u,"H");return d&&d.tagName.length===2&&d.tagName!=="HR"?d:!1}},905:(m,h,y)=>{y.d(h,{h:()=>C});var C=function(){for(var S=[],u=0;u<arguments.length;u++)S[u]=arguments[u];for(var d={},p=function(E){for(var b in E)E.hasOwnProperty(b)&&(Object.prototype.toString.call(E[b])==="[object Object]"?d[b]=C(d[b],E[b]):d[b]=E[b])},v=0;v<S.length;v++)p(S[v]);return d}},827:(m,h,y)=>{y.d(h,{Co:()=>v,ED:()=>b,Ey:()=>p,Fm:()=>k,RN:()=>d,Z2:()=>x,ir:()=>M,jl:()=>E});var C=y(913),S=y(629),u=y(598),d=function(A){var g,O=A[A.currentMode].element;return getSelection().rangeCount>0&&(g=getSelection().getRangeAt(0),O.isEqualNode(g.startContainer)||O.contains(g.startContainer))?g:A[A.currentMode].range?A[A.currentMode].range:(O.focus(),g=O.ownerDocument.createRange(),g.setStart(O,0),g.collapse(!0),g)},p=function(A){var g=window.getSelection().getRangeAt(0);if(!A.contains(g.startContainer)&&!(0,u.KJ)(g.startContainer,"vditor-panel--none"))return{left:0,top:0};var O=A.parentElement.getBoundingClientRect(),I;if(g.getClientRects().length===0)if(g.startContainer.nodeType===3){var R=g.startContainer.parentElement;if(R&&R.getClientRects().length>0)I=R.getClientRects()[0];else return{left:0,top:0}}else{var P=g.startContainer.children;if(P[g.startOffset]&&P[g.startOffset].getClientRects().length>0)I=P[g.startOffset].getClientRects()[0];else if(g.startContainer.childNodes.length>0){var B=g.cloneRange();g.selectNode(g.startContainer.childNodes[Math.max(0,g.startOffset-1)]),I=g.getClientRects()[0],g.setEnd(B.endContainer,B.endOffset),g.setStart(B.startContainer,B.startOffset)}else I=g.startContainer.getClientRects()[0];if(!I){for(var Y=g.startContainer.childNodes[g.startOffset];!Y.getClientRects||Y.getClientRects&&Y.getClientRects().length===0;)Y=Y.parentElement;I=Y.getClientRects()[0]}}else I=g.getClientRects()[0];return{left:I.left-O.left,top:I.top-O.top}},v=function(A,g){if(!g){if(getSelection().rangeCount===0)return!1;g=getSelection().getRangeAt(0)}var O=g.commonAncestorContainer;return A.isEqualNode(O)||A.contains(O)},E=function(A){var g=window.getSelection();g.removeAllRanges(),g.addRange(A)},b=function(A,g,O){var I={end:0,start:0};if(!O){if(getSelection().rangeCount===0)return I;O=window.getSelection().getRangeAt(0)}if(v(g,O)){var R=O.cloneRange();A.childNodes[0]&&A.childNodes[0].childNodes[0]?R.setStart(A.childNodes[0].childNodes[0],0):R.selectNodeContents(A),R.setEnd(O.startContainer,O.startOffset),I.start=R.toString().length,I.end=I.start+O.toString().length}return I},k=function(A,g,O){var I=0,R=0,P=O.childNodes[R],B=!1,Y=!1;A=Math.max(0,A),g=Math.max(0,g);var G=O.ownerDocument.createRange();for(G.setStart(P||O,0),G.collapse(!0);!Y&&P;){var re=I+P.textContent.length;if(!B&&A>=I&&A<=re&&(A===0?G.setStart(P,0):P.childNodes[0].nodeType===3?G.setStart(P.childNodes[0],A-I):P.nextSibling?G.setStartBefore(P.nextSibling):G.setStartAfter(P),B=!0,A===g)){Y=!0;break}B&&g>=I&&g<=re&&(g===0?G.setEnd(P,0):P.childNodes[0].nodeType===3?G.setEnd(P.childNodes[0],g-I):P.nextSibling?G.setEndBefore(P.nextSibling):G.setEndAfter(P),Y=!0),I=re,P=O.childNodes[++R]}return!Y&&O.childNodes[R-1]&&G.setStartBefore(O.childNodes[R-1]),E(G),G},M=function(A,g){var O=A.querySelector("wbr");if(O){if(!O.previousElementSibling)O.previousSibling?g.setStart(O.previousSibling,O.previousSibling.textContent.length):O.nextSibling?O.nextSibling.nodeType===3?g.setStart(O.nextSibling,0):g.setStartBefore(O.nextSibling):g.setStart(O.parentElement,0);else if(O.previousElementSibling.isSameNode(O.previousSibling))if(O.previousElementSibling.lastChild){g.setStartBefore(O),g.collapse(!0),E(g),(0,S.H8)()&&(O.previousElementSibling.tagName==="EM"||O.previousElementSibling.tagName==="STRONG"||O.previousElementSibling.tagName==="S")&&(g.insertNode(document.createTextNode(C.Y.ZWSP)),g.collapse(!1)),O.remove();return}else g.setStartAfter(O.previousElementSibling);else g.setStart(O.previousSibling,O.previousSibling.textContent.length);g.collapse(!0),O.remove(),E(g)}},x=function(A,g){var O=document.createElement("div");O.innerHTML=A;var I=O.querySelectorAll("p");I.length===1&&!I[0].previousSibling&&!I[0].nextSibling&&g[g.currentMode].element.children.length>0&&O.firstElementChild.tagName==="P"&&(A=I[0].innerHTML.trim());var R=document.createElement("div");R.innerHTML=A;var P=d(g);if(P.toString()!==""&&(g[g.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),R.firstElementChild&&R.firstElementChild.getAttribute("data-block")==="0"){R.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var B=(0,u.pt)(P.startContainer);B?B.insertAdjacentHTML("afterend",R.innerHTML):g[g.currentMode].element.insertAdjacentHTML("beforeend",R.innerHTML),M(g[g.currentMode].element,P)}else{var Y=document.createElement("template");Y.innerHTML=A,P.insertNode(Y.content.cloneNode(!0)),P.collapse(!1),E(P)}}}},s={};function c(m){var h=s[m];if(h!==void 0)return h.exports;var y=s[m]={exports:{}};return o[m](y,y.exports,c),y.exports}c.d=(m,h)=>{for(var y in h)c.o(h,y)&&!c.o(m,y)&&Object.defineProperty(m,y,{enumerable:!0,get:h[y]})},c.o=(m,h)=>Object.prototype.hasOwnProperty.call(m,h),c.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var f={};return(()=>{c.d(f,{default:()=>Fs});var m=c(923),h=c(913),y=c(695),C=function(e){return e.currentMode==="sv"?(0,y.p)("".concat(e.sv.element.textContent,`
`).replace(/\n\n$/,`
`)):e.currentMode==="wysiwyg"?e.lute.VditorDOM2Md(e.wysiwyg.element.innerHTML):e.currentMode==="ir"?e.lute.VditorIRDOM2Md(e.ir.element.innerHTML):""},S=c(161),u=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return e.prototype.renderEchart=function(t){var i=this;t.devtools.element.style.display==="block"&&(0,S.Z)("".concat(t.options.cdn,"/dist/js/echarts/echarts.min.js?v=5.5.1"),"vditorEchartsScript").then(function(){i.ASTChart||(i.ASTChart=echarts.init(t.devtools.element.lastElementChild));try{i.element.lastElementChild.style.display="block",i.element.firstElementChild.innerHTML="",i.ASTChart.setOption({series:[{data:JSON.parse(t.lute.RenderEChartsJSON(C(t))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),i.ASTChart.resize()}catch(r){i.element.lastElementChild.style.display="none",i.element.firstElementChild.innerHTML=r}})},e}(),d=c(629),p=function(e,t){t.forEach(function(i){if(e[i]){var r=e[i].children[0];r&&r.classList.contains("vditor-menu--current")&&r.classList.remove("vditor-menu--current")}})},v=function(e,t){t.forEach(function(i){if(e[i]){var r=e[i].children[0];r&&!r.classList.contains("vditor-menu--current")&&r.classList.add("vditor-menu--current")}})},E=function(e,t){t.forEach(function(i){if(e[i]){var r=e[i].children[0];r&&r.classList.contains(h.Y.CLASS_MENU_DISABLED)&&r.classList.remove(h.Y.CLASS_MENU_DISABLED)}})},b=function(e,t){t.forEach(function(i){if(e[i]){var r=e[i].children[0];r&&!r.classList.contains(h.Y.CLASS_MENU_DISABLED)&&r.classList.add(h.Y.CLASS_MENU_DISABLED)}})},k=function(e,t){t.forEach(function(i){e[i]&&e[i]&&(e[i].style.display="none")})},M=function(e,t){t.forEach(function(i){e[i]&&e[i]&&(e[i].style.display="block")})},x=function(e,t,i){t.includes("subToolbar")&&(e.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(r){i&&r.isEqualNode(i)||(r.style.display="none")}),e.toolbar.elements.emoji&&(e.toolbar.elements.emoji.lastElementChild.style.display="none")),t.includes("hint")&&(e.hint.element.style.display="none"),e.wysiwyg.popover&&t.includes("popover")&&(e.wysiwyg.popover.style.display="none")},A=function(e,t,i,r){i.addEventListener((0,d.y3)(),function(a){a.preventDefault(),a.stopPropagation(),!i.classList.contains(h.Y.CLASS_MENU_DISABLED)&&(e.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(l){l.classList.remove("vditor-hint--current")}),t.style.display==="block"?t.style.display="none":(x(e,["subToolbar","hint","popover"],i.parentElement.parentElement),i.classList.contains("vditor-tooltipped")||i.classList.add("vditor-hint--current"),t.style.display="block",e.toolbar.element.getBoundingClientRect().right-i.getBoundingClientRect().right<250?t.classList.add("vditor-panel--left"):t.classList.remove("vditor-panel--left")))})},g=c(598),O=c(164),I=function(e,t,i,r){r&&console.log("".concat(e," - ").concat(i,": ").concat(t))},R=c(288),P=c(784),B=c(51),Y=c(500),G=c(339),re=c(108),he=c(960),me=c(975),Me=c(597),Se=c(162),ke=c(591),De=c(931),we=function(e,t,i){i===void 0&&(i="sv");var r=document.createElement("div");r.innerHTML=e;var a=!1;r.childElementCount===1&&r.lastElementChild.style.fontFamily.indexOf("monospace")>-1&&(a=!0);var l=r.querySelectorAll("pre");if(r.childElementCount===1&&l.length===1&&l[0].className!=="vditor-wysiwyg"&&l[0].className!=="vditor-sv"&&(a=!0),e.indexOf(`
<p class="p1">`)===0&&(a=!0),r.childElementCount===1&&r.firstElementChild.tagName==="TABLE"&&r.querySelector(".line-number")&&r.querySelector(".line-content")&&(a=!0),a){var w=t||e;return/\n/.test(w)||l.length===1?i==="wysiwyg"?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'.concat(w.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"<wbr></code></pre></div>"):"\n```\n"+w.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":i==="wysiwyg"?"<code>".concat(w.replace(/&/g,"&amp;").replace(/</g,"&lt;"),"</code><wbr>"):"`".concat(w,"`")}return!1},ce=function(e,t){if(e){if(e.parentElement.getAttribute("data-type")==="html-block"){e.setAttribute("data-render","1");return}var i=e.firstElementChild.className.replace("language-","");if(i==="abc")(0,R.$)(e,t.options.cdn);else if(i==="mermaid")(0,me.e)(e,t.options.cdn,t.options.theme);else if(i==="smiles")(0,De.Y)(e,t.options.cdn,t.options.theme);else if(i==="markmap")(0,Me.K)(e,t.options.cdn);else if(i==="flowchart")(0,Y.D)(e,t.options.cdn);else if(i==="echarts")(0,P.v)(e,t.options.cdn,t.options.theme);else if(i==="mindmap")(0,Se.l)(e,t.options.cdn,t.options.theme);else if(i==="plantuml")(0,ke.M)(e,t.options.cdn);else if(i==="graphviz")(0,G.m)(e,t.options.cdn);else if(i==="math")(0,he.T)(e,{cdn:t.options.cdn,math:t.options.preview.math});else{var r=t.options.customRenders.find(function(a){if(a.language===i)return a.render(e,t),!0});r||((0,re.$)(Object.assign({},t.options.preview.hljs),e,t.options.cdn),(0,B.o)(e,t.options.preview.hljs))}e.setAttribute("data-render","1")}},j=c(827),ne=function(e){if(e.currentMode!=="sv"){var t=e[e.currentMode].element,i=e.outline.render(e);i===""&&(i="[ToC]"),t.querySelectorAll('[data-type="toc-block"]').forEach(function(r){r.innerHTML=i,(0,he.T)(r,{cdn:e.options.cdn,math:e.options.preview.math})})}},J=function(e,t){var i=(0,g._Y)(e.target,"SPAN");if(i&&(0,g.KJ)(i,"vditor-toc")){var r=t[t.currentMode].element.querySelector("#"+i.getAttribute("data-target-id"));if(r)if(t.options.height==="auto"){var a=r.offsetTop+t.element.offsetTop;t.options.toolbarConfig.pin||(a+=t.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,a)}else t.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,t.element.offsetTop),t[t.currentMode].element.scrollTop=r.offsetTop;return}},Ce=function(e,t,i,r){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("vditor-toc")){if(i.key==="Backspace"&&(0,j.ED)(e,t[t.currentMode].element,r).start===0)return e.previousElementSibling.remove(),xe(t),!0;if(hn(t,i,r,e,e.previousElementSibling))return!0}if(e.nextElementSibling&&e.nextElementSibling.classList.contains("vditor-toc")){if(i.key==="Delete"&&(0,j.ED)(e,t[t.currentMode].element,r).start>=e.textContent.trimRight().length)return e.nextElementSibling.remove(),xe(t),!0;if(On(t,i,r,e,e.nextElementSibling))return!0}if(i.key==="Backspace"||i.key==="Delete"){var a=(0,g.KJ)(r.startContainer,"vditor-toc");if(a)return a.remove(),xe(t),!0}},V=function(e,t,i,r){i===void 0&&(i=!1);var a=(0,g.pt)(t.startContainer);if(a&&!i&&a.getAttribute("data-type")!=="code-block"){if(Ri(a.innerHTML)&&a.previousElementSibling||Hi(a.innerHTML))return;for(var l=(0,j.ED)(a,e.ir.element,t).start,w=!0,_=l-1;_>a.textContent.substr(0,l).lastIndexOf(`
`);_--)if(a.textContent.charAt(_)!==" "&&a.textContent.charAt(_)!=="	"){w=!1;break}l===0&&(w=!1);for(var D=!0,_=l-1;_<a.textContent.length;_++)if(a.textContent.charAt(_)!==" "&&a.textContent.charAt(_)!==`
`){D=!1;break}if(w){typeof e.options.input=="function"&&e.options.input(C(e));return}if(D&&/^#{1,6} $/.test(a.textContent)&&(D=!1),D){var L=(0,g.KJ)(t.startContainer,"vditor-ir__marker");if(!L){var H=t.startContainer.previousSibling;H&&H.nodeType!==3&&H.classList.contains("vditor-ir__node--expand")&&H.classList.remove("vditor-ir__node--expand"),typeof e.options.input=="function"&&e.options.input(C(e));return}}}if(e.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(Te){Te.classList.remove("vditor-ir__node--expand")}),a||(a=e.ir.element),!a.querySelector("wbr")){var z=(0,g.KJ)(t.startContainer,"vditor-ir__preview");z?z.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):t.insertNode(document.createElement("wbr"))}a.querySelectorAll("[style]").forEach(function(Te){Te.removeAttribute("style")}),a.getAttribute("data-type")==="link-ref-defs-block"&&(a=e.ir.element);var X=a.isEqualNode(e.ir.element),Z=(0,g.Th)(a,"data-type","footnotes-block"),K="";if(X)K=a.innerHTML;else{var le=(0,O.f)(t.startContainer,"BLOCKQUOTE"),ee=(0,g.KR)(t.startContainer);if(ee&&(a=ee),le&&(!ee||ee&&!le.contains(ee))&&(a=le),Z&&(a=Z),K=a.outerHTML,a.tagName==="UL"||a.tagName==="OL"){var W=a.previousElementSibling,ge=a.nextElementSibling;W&&(W.tagName==="UL"||W.tagName==="OL")&&(K=W.outerHTML+K,W.remove()),ge&&(ge.tagName==="UL"||ge.tagName==="OL")&&(K=K+ge.outerHTML,ge.remove()),K=K.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else a.previousElementSibling&&a.previousElementSibling.textContent.replace(h.Y.ZWSP,"")!==""&&r&&r.inputType==="insertParagraph"&&(K=a.previousElementSibling.outerHTML+K,a.previousElementSibling.remove());a.innerText.startsWith("```")||(e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(Te){Te&&!a.isEqualNode(Te)&&(K+=Te.outerHTML,Te.remove())}),e.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(Te){Te&&!a.isEqualNode(Te)&&(K+=Te.outerHTML,Te.remove())}))}if(I("SpinVditorIRDOM",K,"argument",e.options.debugger),K=e.lute.SpinVditorIRDOM(K),I("SpinVditorIRDOM",K,"result",e.options.debugger),X)a.innerHTML=K;else if(a.outerHTML=K,Z){var ae=(0,g.Th)(e.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(ae){var be=ae.textContent,je=be.substring(1,be.indexOf("]:")),He=e.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(je,'"]'));He&&He.setAttribute("aria-label",be.substr(je.length+3).trim().substr(0,24))}}var Be,lt=e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");lt.forEach(function(Te,Ye){Ye===0?Be=Te:(Be.insertAdjacentHTML("beforeend",Te.innerHTML),Te.remove())}),lt.length>0&&e.ir.element.insertAdjacentElement("beforeend",lt[0]);var tt,ct=e.ir.element.querySelectorAll("[data-type='footnotes-block']");ct.forEach(function(Te,Ye){Ye===0?tt=Te:(tt.insertAdjacentHTML("beforeend",Te.innerHTML),Te.remove())}),ct.length>0&&e.ir.element.insertAdjacentElement("beforeend",ct[0]),(0,j.ir)(e.ir.element,t),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(Te){ce(Te,e)}),ne(e),Rt(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},N=function(e,t){if(e==="")return!1;if(e.indexOf("⇧")===-1&&e.indexOf("⌘")===-1&&e.indexOf("⌥")===-1)return!(0,d._0)(t)&&!t.altKey&&!t.shiftKey&&t.code===e;if(e==="⇧Tab")return!!(!(0,d._0)(t)&&!t.altKey&&t.shiftKey&&t.code==="Tab");var i=e.split("");if(e.startsWith("⌥")){var r=i.length===3?i[2]:i[1];return!!((i.length===3?(0,d._0)(t):!(0,d._0)(t))&&t.altKey&&!t.shiftKey&&t.code===(/^[0-9]$/.test(r)?"Digit":"Key")+r)}e==="⌘Enter"&&(i=["⌘","Enter"]);var a=i.length>2&&i[0]==="⇧",l=a?i[2]:i[1];return a&&((0,d.gm)()||!/Mac/.test(navigator.platform))&&(l==="-"?l="_":l==="="&&(l="+")),!!((0,d._0)(t)&&t.key.toLowerCase()===l.toLowerCase()&&!t.altKey&&(!a&&!t.shiftKey||a&&t.shiftKey))},q=function(e){var t=e.startContainer;if(t.nodeType===3&&t.nodeValue.length!==e.startOffset)return!1;for(var i=t.nextSibling;i&&i.textContent==="";)i=i.nextSibling;if(i){if(i&&i.nodeType!==3&&i.classList.contains("vditor-ir__node")&&!i.getAttribute("data-block"))return i}else{var r=(0,g.KJ)(t,"vditor-ir__marker");if(r&&!r.nextSibling){var a=t.parentElement.parentElement.nextSibling;if(a&&a.nodeType!==3&&a.classList.contains("vditor-ir__node"))return a}return!1}return!1},U=function(e){var t=e.startContainer,i=t.previousSibling;return t.nodeType===3&&e.startOffset===0&&i&&i.nodeType!==3&&i.classList.contains("vditor-ir__node")&&!i.getAttribute("data-block")?i:!1},F=function(e,t){t.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(w){w.classList.remove("vditor-ir__node--expand")});var i=(0,g.XW)(e.startContainer,"vditor-ir__node"),r=!e.collapsed&&(0,g.XW)(e.endContainer,"vditor-ir__node");if(!(!e.collapsed&&(!i||i!==r))){i&&(i.classList.add("vditor-ir__node--expand"),i.classList.remove("vditor-ir__node--hidden"),(0,j.jl)(e));var a=q(e);if(a){a.classList.add("vditor-ir__node--expand"),a.classList.remove("vditor-ir__node--hidden");return}var l=U(e);if(l){l.classList.add("vditor-ir__node--expand"),l.classList.remove("vditor-ir__node--hidden");return}}},ye=function(e,t){if(e.ir.composingLock=t.isComposing,t.isComposing)return!1;t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t);var i=(0,j.RN)(e),r=i.startContainer;if(!kr(t,e,r)||(Mr(i,e,t),Fr(i),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,d._0)(t)&&t.key!=="Escape"&&t.key!=="Delete"))return!1;var a=(0,g.Th)(r,"data-newline","1");if(!(0,d._0)(t)&&!t.altKey&&!t.shiftKey&&t.key==="Enter"&&a&&i.startOffset<a.textContent.length){var l=a.previousElementSibling;l&&(i.insertNode(document.createTextNode(l.textContent)),i.collapse(!1));var w=a.nextSibling;w&&(i.insertNode(document.createTextNode(w.textContent)),i.collapse(!0))}var _=(0,g._Y)(r,"P");if(Dr(t,e,_,i)||Ar(i,e,_,t)||jr(e,i,t,_))return!0;var D=(0,g.KJ)(r,"vditor-ir__marker--pre");if(D&&D.tagName==="PRE"){var L=D.firstChild;if(Nr(e,t,D,i)||(L.getAttribute("data-type")==="math-block"||L.getAttribute("data-type")==="html-block")&&hn(e,t,i,L,D.parentElement)||On(e,t,i,L,D.parentElement))return!0}var H=(0,g.Th)(r,"data-type","code-block-info");if(H){if(t.key==="Enter"||t.key==="Tab")return i.selectNodeContents(H.nextElementSibling.firstChild),i.collapse(!0),t.preventDefault(),x(e,["hint"]),!0;if(t.key==="Backspace"){var z=(0,j.ED)(H,e.ir.element).start;z===1&&i.setStart(r,0),z===2&&(e.hint.recentLanguage="")}if(hn(e,t,i,H,H.parentElement))return x(e,["hint"]),!0}var X=(0,g._Y)(r,"TD")||(0,g._Y)(r,"TH");if(t.key.indexOf("Arrow")>-1&&X){var Z=ko(X);if(Z&&hn(e,t,i,X,Z))return!0;var K=Mo(X);if(K&&On(e,t,i,X,K))return!0}if(Ir(e,t,i)||Br(e,i,t)||Ii(e,i,t))return!0;var le=(0,O.c)(r);if(le){if(N("⌘=",t)){var ee=le.querySelector(".vditor-ir__marker--heading");return ee&&ee.textContent.trim().length>1&&Pn(e,ee.textContent.substr(1)),t.preventDefault(),!0}if(N("⌘-",t)){var ee=le.querySelector(".vditor-ir__marker--heading");return ee&&ee.textContent.trim().length<6&&Pn(e,ee.textContent.trim()+"# "),t.preventDefault(),!0}}var W=(0,g.pt)(r);if(t.key==="Backspace"&&!(0,d._0)(t)&&!t.shiftKey&&!t.altKey&&i.toString()===""){if(zr(e,i,t,_))return!0;if(W&&W.previousElementSibling&&W.tagName!=="UL"&&W.tagName!=="OL"&&(W.previousElementSibling.getAttribute("data-type")==="code-block"||W.previousElementSibling.getAttribute("data-type")==="math-block")){var ge=(0,j.ED)(W,e.ir.element,i).start;if(ge===0||ge===1&&W.innerText.startsWith(h.Y.ZWSP))return i.selectNodeContents(W.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),i.collapse(!1),F(i,e),W.textContent.trim().replace(h.Y.ZWSP,"")===""&&(W.remove(),Rt(e)),t.preventDefault(),!0}if(le){var ae=le.firstElementChild.textContent.length;(0,j.ED)(le,e.ir.element).start===ae&&ae!==0&&(i.setStart(le.firstElementChild.firstChild,ae-1),i.collapse(!0),(0,j.jl)(i))}}return(t.key==="ArrowUp"||t.key==="ArrowDown")&&W&&(W.querySelectorAll(".vditor-ir__node").forEach(function(be){be.contains(r)||be.classList.add("vditor-ir__node--hidden")}),Ur(t,W,i))?!0:(xr(i,t.key),W&&Ce(W,e,t,i)?(t.preventDefault(),!0):!1)},Q=c(726),Fe=function(e,t){e.querySelectorAll("[data-type=footnotes-link]").forEach(function(i){for(var r=i.parentElement,a=r.nextSibling;a&&a.textContent.startsWith("    ");){var l=a;l.childNodes.forEach(function(w){r.append(w.cloneNode(!0))}),a=a.nextSibling,l.remove()}t&&t(r)})},se=function(e,t){var i,r=getSelection().getRangeAt(0).cloneRange(),a=r.startContainer;r.startContainer.nodeType!==3&&r.startContainer.tagName==="DIV"&&(a=r.startContainer.childNodes[r.startOffset-1]);var l=(0,g.Th)(a,"data-block","0");if(l&&t&&(t.inputType==="deleteContentBackward"||t.data===" ")){for(var w=(0,j.ED)(l,e.sv.element,r).start,_=!0,D=w-1;D>l.textContent.substr(0,w).lastIndexOf(`
`);D--)if(l.textContent.charAt(D)!==" "&&l.textContent.charAt(D)!=="	"){_=!1;break}if(w===0&&(_=!1),_){Ge(e);return}if(t.inputType==="deleteContentBackward"){var L=(0,g.Th)(a,"data-type","code-block-open-marker")||(0,g.Th)(a,"data-type","code-block-close-marker");if(L){if(L.getAttribute("data-type")==="code-block-close-marker"){var H=Vn(a,"code-block-open-marker");if(H){H.textContent=L.textContent,Ge(e);return}}if(L.getAttribute("data-type")==="code-block-open-marker"){var H=Vn(a,"code-block-close-marker",!1);if(H){H.textContent=L.textContent,Ge(e);return}}}var z=(0,g.Th)(a,"data-type","math-block-open-marker");if(z){var X=z.nextElementSibling.nextElementSibling;X&&X.getAttribute("data-type")==="math-block-close-marker"&&(X.remove(),Ge(e));return}l.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(W){W.textContent.length===1&&W.remove()}),l.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(W){W.textContent.length===1&&W.remove()});var Z=(0,g.Th)(a,"data-type","heading-marker");if(Z&&Z.textContent.indexOf("#")===-1){Ge(e);return}}if((t.data===" "||t.inputType==="deleteContentBackward")&&((0,g.Th)(a,"data-type","padding")||(0,g.Th)(a,"data-type","li-marker")||(0,g.Th)(a,"data-type","task-marker")||(0,g.Th)(a,"data-type","blockquote-marker"))){Ge(e);return}}if(l&&l.textContent.trimRight()==="$$"){Ge(e);return}l||(l=e.sv.element),((i=l.firstElementChild)===null||i===void 0?void 0:i.getAttribute("data-type"))==="link-ref-defs-block"&&(l=e.sv.element),(0,g.Th)(a,"data-type","footnotes-link")&&(l=e.sv.element),l.textContent.indexOf(Lute.Caret)===-1&&r.insertNode(document.createTextNode(Lute.Caret)),l.querySelectorAll("[style]").forEach(function(W){W.removeAttribute("style")}),l.querySelectorAll("font").forEach(function(W){W.outerHTML=W.innerHTML});var K=l.textContent,le=l.isEqualNode(e.sv.element);if(le)K=l.textContent;else{l.previousElementSibling&&(K=l.previousElementSibling.textContent+K,l.previousElementSibling.remove()),l.previousElementSibling&&K.indexOf(`---
`)===0&&(K=l.previousElementSibling.textContent+K,l.previousElementSibling.remove());var ee="";e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(W,ge){W&&!l.isEqualNode(W.parentElement)&&(ee+=W.parentElement.textContent+`
`,W.parentElement.remove())}),e.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(W,ge){W&&!l.isEqualNode(W.parentElement)&&(ee+=W.parentElement.textContent+`
`,W.parentElement.remove())}),K=ee+K}K=Er(K,e),le?l.innerHTML=K:l.outerHTML=K,e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(W){e.sv.element.insertAdjacentElement("beforeend",W.parentElement)}),Fe(e.sv.element,function(W){e.sv.element.insertAdjacentElement("beforeend",W)}),(0,j.ir)(e.sv.element,r),We(e),Ge(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},Ue=function(e,t){var i,r,a,l,w;if(e.sv.composingLock=t.isComposing,t.isComposing||(t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,d._0)(t)&&t.key!=="Escape"))return!1;var _=(0,j.RN)(e),D=_.startContainer;_.startContainer.nodeType!==3&&_.startContainer.tagName==="DIV"&&(D=_.startContainer.childNodes[_.startOffset-1]);var L=(0,g.Th)(D,"data-type","text"),H=(0,g.Th)(D,"data-type","blockquote-marker");if(!H&&_.startOffset===0&&L&&L.previousElementSibling&&L.previousElementSibling.getAttribute("data-type")==="blockquote-marker"&&(H=L.previousElementSibling),H&&t.key==="Enter"&&!(0,d._0)(t)&&!t.altKey&&H.nextElementSibling.textContent.trim()===""&&(0,j.ED)(H,e.sv.element,_).start===H.textContent.length)return((i=H.previousElementSibling)===null||i===void 0?void 0:i.getAttribute("data-type"))==="padding"&&H.previousElementSibling.setAttribute("data-action","enter-remove"),H.remove(),Ge(e),t.preventDefault(),!0;var z=(0,g.Th)(D,"data-type","li-marker"),X=(0,g.Th)(D,"data-type","task-marker"),Z=z;if(Z||X&&X.nextElementSibling.getAttribute("data-type")!=="task-marker"&&(Z=X),!Z&&_.startOffset===0&&L&&L.previousElementSibling&&(L.previousElementSibling.getAttribute("data-type")==="li-marker"||L.previousElementSibling.getAttribute("data-type")==="task-marker")&&(Z=L.previousElementSibling),Z){var K=(0,j.ED)(Z,e.sv.element,_).start,le=Z.getAttribute("data-type")==="task-marker",ee=Z;if(le&&(ee=Z.previousElementSibling.previousElementSibling.previousElementSibling),K===Z.textContent.length){if(t.key==="Enter"&&!(0,d._0)(t)&&!t.altKey&&!t.shiftKey&&Z.nextElementSibling.textContent.trim()==="")return((r=ee.previousElementSibling)===null||r===void 0?void 0:r.getAttribute("data-type"))==="padding"?(ee.previousElementSibling.remove(),se(e)):(le&&(ee.remove(),Z.previousElementSibling.previousElementSibling.remove(),Z.previousElementSibling.remove()),Z.nextElementSibling.remove(),Z.remove(),Ge(e)),t.preventDefault(),!0;if(t.key==="Tab")return t.shiftKey?ee.previousElementSibling.getAttribute("data-type")==="padding"&&ee.previousElementSibling.remove():ee.insertAdjacentHTML("beforebegin",'<span data-type="padding">'.concat(ee.textContent.replace(/\S/g," "),"</span>")),/^\d/.test(ee.textContent)&&(ee.textContent=ee.textContent.replace(/^\d{1,}/,"1"),_.selectNodeContents(Z.firstChild),_.collapse(!1)),se(e),t.preventDefault(),!0}}if(Ii(e,_,t))return!0;var W=(0,g.Th)(D,"data-block","0"),ge=(0,O.f)(D,"SPAN");if(t.key==="Enter"&&!(0,d._0)(t)&&!t.altKey&&!t.shiftKey&&W){var ae=!1,be=W.textContent.match(/^\n+/);(0,j.ED)(W,e.sv.element).start<=(be?be[0].length:0)&&(ae=!0);var je=`
`;if(ge){if(((a=ge.previousElementSibling)===null||a===void 0?void 0:a.getAttribute("data-action"))==="enter-remove")return ge.previousElementSibling.remove(),Ge(e),t.preventDefault(),!0;je+=mo(ge)}return _.insertNode(document.createTextNode(je)),_.collapse(!1),W&&W.textContent.trim()!==""&&!ae?se(e):Ge(e),t.preventDefault(),!0}if(t.key==="Backspace"&&!(0,d._0)(t)&&!t.altKey&&!t.shiftKey){if(ge&&((l=ge.previousElementSibling)===null||l===void 0?void 0:l.getAttribute("data-type"))==="newline"&&(0,j.ED)(ge,e.sv.element,_).start===1&&ge.getAttribute("data-type").indexOf("code-block-")===-1)return _.setStart(ge,0),_.extractContents(),ge.textContent.trim()!==""?se(e):Ge(e),t.preventDefault(),!0;if(W&&(0,j.ED)(W,e.sv.element,_).start===0&&W.previousElementSibling){_.extractContents();var He=W.previousElementSibling.lastElementChild;return He.getAttribute("data-type")==="newline"&&(He.remove(),He=W.previousElementSibling.lastElementChild),He.getAttribute("data-type")!=="newline"&&(He.insertAdjacentHTML("afterend",W.innerHTML),W.remove()),W.textContent.trim()!==""&&!(!((w=W.previousElementSibling)===null||w===void 0)&&w.querySelector('[data-type="code-block-open-marker"]'))?se(e):(He.getAttribute("data-type")!=="newline"&&(_.selectNodeContents(He.lastChild),_.collapse(!1)),Ge(e)),t.preventDefault(),!0}}return!1},ue=c(873),Oe=function(e){e.options.theme==="dark"?e.element.classList.add("vditor--dark"):e.element.classList.remove("vditor--dark")},Xe=function(e){e.element.innerHTML="",e.element.classList.add("vditor"),e.options.rtl&&e.element.setAttribute("dir","rtl"),Oe(e),(0,ue.H)(e.options.preview.theme.current,e.options.preview.theme.path),typeof e.options.height=="number"?e.element.style.height=e.options.height+"px":e.element.style.height=e.options.height,typeof e.options.minHeight=="number"&&(e.element.style.minHeight=e.options.minHeight+"px"),typeof e.options.width=="number"?e.element.style.width=e.options.width+"px":e.element.style.width=e.options.width,e.element.appendChild(e.toolbar.element);var t=document.createElement("div");if(t.className="vditor-content",e.options.outline.position==="left"&&t.appendChild(e.outline.element),t.appendChild(e.wysiwyg.element.parentElement),t.appendChild(e.sv.element),t.appendChild(e.ir.element.parentElement),t.appendChild(e.preview.element),e.toolbar.elements.devtools&&t.appendChild(e.devtools.element),e.options.outline.position==="right"&&(e.outline.element.classList.add("vditor-outline--right"),t.appendChild(e.outline.element)),e.upload&&t.appendChild(e.upload.element),e.options.resize.enable&&t.appendChild(e.resize.element),t.appendChild(e.hint.element),t.appendChild(e.tip.element),e.element.appendChild(t),t.addEventListener("click",function(){x(e,["subToolbar"])}),e.toolbar.elements.export&&e.element.insertAdjacentHTML("beforeend",'<iframe id="vditorExportIframe" style="width: 100%;height: 0;border: 0"></iframe>'),Yt(e,e.options.mode,vr(e)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&typeof window.visualViewport<"u"){var i=!1,r=function(a){i||(i=!0,requestAnimationFrame(function(){i=!1;var l=e.toolbar.element;l.style.transform="none",l.getBoundingClientRect().top<0&&(l.style.transform="translate(0, ".concat(-l.getBoundingClientRect().top,"px)"))}))};window.visualViewport.addEventListener("scroll",r),window.visualViewport.addEventListener("resize",r)}},it=function(e){var t=window.innerWidth<=h.Y.MOBILE_WIDTH?10:35;if(e.wysiwyg.element.parentElement.style.display!=="none"){var i=(e.wysiwyg.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.wysiwyg.element.style.padding="10px ".concat(Math.max(t,i),"px")}if(e.ir.element.parentElement.style.display!=="none"){var i=(e.ir.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.ir.element.style.padding="10px ".concat(Math.max(t,i),"px")}e.preview.element.style.display!=="block"?e.toolbar.element.style.paddingLeft=Math.max(5,parseInt(e[e.currentMode].element.style.paddingLeft||"0",10)+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0))+"px":e.toolbar.element.style.paddingLeft=5+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0)+"px"},ln=function(e){if(e.options.typewriterMode){var t=window.innerHeight;typeof e.options.height=="number"?(t=e.options.height,typeof e.options.minHeight=="number"&&(t=Math.max(t,e.options.minHeight)),t=Math.min(window.innerHeight,t)):t=e.element.clientHeight,e.element.classList.contains("vditor--fullscreen")&&(t=window.innerHeight),e[e.currentMode].element.style.setProperty("--editor-bottom",(t-e.toolbar.element.offsetHeight)/2+"px")}},Ot;function wi(){window.removeEventListener("resize",Ot)}var vr=function(e){ln(e),wi(),window.addEventListener("resize",Ot=function(){it(e),ln(e)});var t=(0,d.D)()&&localStorage.getItem(e.options.cache.id);return(!e.options.cache.enable||!t)&&(e.options.value?t=e.options.value:e.originalInnerHTML?t=e.lute.HTML2Md(e.originalInnerHTML):e.options.cache.enable||(t="")),t||""},Pt=function(e){clearTimeout(e[e.currentMode].hlToolbarTimeoutId),e[e.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(e[e.currentMode].element.getAttribute("contenteditable")!=="false"&&(0,j.Co)(e[e.currentMode].element)){p(e.toolbar.elements,h.Y.EDIT_TOOLBARS),E(e.toolbar.elements,h.Y.EDIT_TOOLBARS);var t=(0,j.RN)(e),i=t.startContainer;t.startContainer.nodeType===3&&(i=t.startContainer.parentElement),i.classList.contains("vditor-reset")&&(i=i.childNodes[t.startOffset]);var r=e.currentMode==="sv"?(0,g.Th)(i,"data-type","heading"):(0,O.c)(i);r&&v(e.toolbar.elements,["headings"]);var a=e.currentMode==="sv"?(0,g.Th)(i,"data-type","blockquote"):(0,g._Y)(i,"BLOCKQUOTE");a&&v(e.toolbar.elements,["quote"]);var l=(0,g.Th)(i,"data-type","strong");l&&v(e.toolbar.elements,["bold"]);var w=(0,g.Th)(i,"data-type","em");w&&v(e.toolbar.elements,["italic"]);var _=(0,g.Th)(i,"data-type","s");_&&v(e.toolbar.elements,["strike"]);var D=(0,g.Th)(i,"data-type","a");D&&v(e.toolbar.elements,["link"]);var L=(0,g._Y)(i,"LI");L?(L.classList.contains("vditor-task")?v(e.toolbar.elements,["check"]):L.parentElement.tagName==="OL"?v(e.toolbar.elements,["ordered-list"]):L.parentElement.tagName==="UL"&&v(e.toolbar.elements,["list"]),E(e.toolbar.elements,["outdent","indent"])):b(e.toolbar.elements,["outdent","indent"]);var H=(0,g.Th)(i,"data-type","code-block");H&&(b(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),v(e.toolbar.elements,["code"]));var z=(0,g.Th)(i,"data-type","code");z&&(b(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),v(e.toolbar.elements,["inline-code"]));var X=(0,g.Th)(i,"data-type","table");X&&b(e.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])}},200)},Ie=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),clearTimeout(e.wysiwyg.afterRenderTimeoutId),e.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(!e.wysiwyg.composingLock){var i=C(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(i),e.options.counter.enable&&e.counter.render(e,i),e.options.cache.enable&&(0,d.D)()&&(localStorage.setItem(e.options.cache.id,i),e.options.cache.after&&e.options.cache.after(i)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},xn=function(e){for(var t=e.previousSibling;t;){if(t.nodeType!==3&&t.tagName==="A"&&!t.previousSibling&&t.innerHTML.replace(h.Y.ZWSP,"")===""&&t.nextSibling)return t;t=t.previousSibling}return!1},rt=function(e){for(var t=e.startContainer.nextSibling;t&&t.textContent==="";)t=t.nextSibling;return!!(t&&t.nodeType!==3&&(t.tagName==="CODE"||t.getAttribute("data-type")==="math-inline"||t.getAttribute("data-type")==="html-entity"||t.getAttribute("data-type")==="html-inline"))},Ve=function(e){for(var t="",i=e.nextSibling;i;)i.nodeType===3?t+=i.textContent:t+=i.outerHTML,i=i.nextSibling;return t},yt=function(e){for(var t="",i=e.previousSibling;i;)i.nodeType===3?t=i.textContent+t:t=i.outerHTML+t,i=i.previousSibling;return t},cn=function(e){for(var t=e;t&&!t.nextSibling;)t=t.parentElement;return t.nextSibling},wt=function(e){var t=yt(e.startContainer),i=Ve(e.startContainer),r=e.startContainer.textContent,a=e.startOffset,l="",w="";return(r.substr(0,a)!==""&&r.substr(0,a)!==h.Y.ZWSP||t)&&(l="".concat(t).concat(r.substr(0,a))),(r.substr(a)!==""&&r.substr(a)!==h.Y.ZWSP||i)&&(w="".concat(r.substr(a)).concat(i)),{afterHTML:w,beforeHTML:l}},Ei=function(e,t){Array.from(e.wysiwyg.element.childNodes).find(function(i){if(i.nodeType===3){var r=document.createElement("p");r.setAttribute("data-block","0"),r.textContent=i.textContent;var a=t.startContainer.nodeType===3?t.startOffset:i.textContent.length;return i.parentNode.insertBefore(r,i),i.remove(),t.setStart(r.firstChild,Math.min(r.firstChild.textContent.length,a)),t.collapse(!0),(0,j.jl)(t),!0}else if(!i.getAttribute("data-block"))return i.tagName==="P"?i.remove():(i.tagName==="DIV"?(t.insertNode(document.createElement("wbr")),i.outerHTML='<p data-block="0">'.concat(i.innerHTML,"</p>")):i.tagName==="BR"?i.outerHTML='<p data-block="0">'.concat(i.outerHTML,"<wbr></p>"):(t.insertNode(document.createElement("wbr")),i.outerHTML='<p data-block="0">'.concat(i.outerHTML,"</p>")),(0,j.ir)(e.wysiwyg.element,t),t=getSelection().getRangeAt(0)),!0})},Un=function(e,t){var i=(0,j.RN)(e),r=(0,g.pt)(i.startContainer);r||(r=i.startContainer.childNodes[i.startOffset]),!r&&e.wysiwyg.element.children.length===0&&(r=e.wysiwyg.element),r&&!r.classList.contains("vditor-wysiwyg__block")&&(i.insertNode(document.createElement("wbr")),r.innerHTML.trim()==="<wbr>"&&(r.innerHTML="<wbr><br>"),r.tagName==="BLOCKQUOTE"||r.classList.contains("vditor-reset")?r.innerHTML="<".concat(t,' data-block="0">').concat(r.innerHTML.trim(),"</").concat(t,">"):r.outerHTML="<".concat(t,' data-block="0">').concat(r.innerHTML.trim(),"</").concat(t,">"),(0,j.ir)(e.wysiwyg.element,i),ne(e))},Si=function(e){var t=getSelection().getRangeAt(0),i=(0,g.pt)(t.startContainer);i||(i=t.startContainer.childNodes[t.startOffset]),i&&(t.insertNode(document.createElement("wbr")),i.outerHTML='<p data-block="0">'.concat(i.innerHTML,"</p>"),(0,j.ir)(e.wysiwyg.element,t)),e.wysiwyg.popover.style.display="none"},_n=function(e,t,i){i===void 0&&(i=!0);var r=e.previousElementSibling,a=r.ownerDocument.createRange();r.tagName==="CODE"?(r.style.display="inline-block",i?a.setStart(r.firstChild,1):a.selectNodeContents(r)):(r.style.display="block",r.firstChild.firstChild||r.firstChild.appendChild(document.createTextNode("")),a.selectNodeContents(r.firstChild)),i?a.collapse(!0):a.collapse(!1),(0,j.jl)(a),!e.firstElementChild.classList.contains("language-mindmap")&&We(t)},lo=function(e,t){if(e.wysiwyg.composingLock=t.isComposing,t.isComposing)return!1;t.key.indexOf("Arrow")===-1&&t.key!=="Meta"&&t.key!=="Control"&&t.key!=="Alt"&&t.key!=="Shift"&&t.key!=="CapsLock"&&t.key!=="Escape"&&!/^F\d{1,2}$/.test(t.key)&&e.undo.recordFirstPosition(e,t);var i=(0,j.RN)(e),r=i.startContainer;if(!kr(t,e,r)||(Mr(i,e,t),Fr(i),t.key!=="Enter"&&t.key!=="Tab"&&t.key!=="Backspace"&&t.key.indexOf("Arrow")===-1&&!(0,d._0)(t)&&t.key!=="Escape"&&t.key!=="Delete"))return!1;var a=(0,g.pt)(r),l=(0,g._Y)(r,"P");if(Dr(t,e,l,i)||Ar(i,e,l,t)||Ir(e,t,i))return!0;var w=(0,g.KJ)(r,"vditor-wysiwyg__block");if(w){if(t.key==="Escape"&&w.children.length===2)return e.wysiwyg.popover.style.display="none",w.firstElementChild.style.display="none",e.wysiwyg.element.blur(),t.preventDefault(),!0;if(!(0,d._0)(t)&&!t.shiftKey&&t.altKey&&t.key==="Enter"&&w.getAttribute("data-type")==="code-block"){var _=e.wysiwyg.popover.querySelector(".vditor-input");return _.focus(),_.select(),t.preventDefault(),!0}if(w.getAttribute("data-block")==="0"&&(Nr(e,t,w.firstElementChild,i)||On(e,t,i,w.firstElementChild,w)||w.getAttribute("data-type")!=="yaml-front-matter"&&hn(e,t,i,w.firstElementChild,w)))return!0}if(jr(e,i,t,l))return!0;var D=(0,g.Ab)(r,"BLOCKQUOTE");if(D&&!t.shiftKey&&t.altKey&&t.key==="Enter"){(0,d._0)(t)?i.setStartBefore(D):i.setStartAfter(D),(0,j.jl)(i);var L=document.createElement("p");return L.setAttribute("data-block","0"),L.innerHTML=`
`,i.insertNode(L),i.collapse(!0),(0,j.jl)(i),Ie(e),We(e),t.preventDefault(),!0}var H=(0,O.c)(r);if(H){if(H.tagName==="H6"&&r.textContent.length===i.startOffset&&!(0,d._0)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Enter"){var z=document.createElement("p");return z.textContent=`
`,z.setAttribute("data-block","0"),r.parentElement.insertAdjacentElement("afterend",z),i.setStart(z,0),(0,j.jl)(i),Ie(e),We(e),t.preventDefault(),!0}if(N("⌘=",t)){var X=parseInt(H.tagName.substr(1),10)-1;return X>0&&(Un(e,"h".concat(X)),Ie(e)),t.preventDefault(),!0}if(N("⌘-",t)){var X=parseInt(H.tagName.substr(1),10)+1;return X<7&&(Un(e,"h".concat(X)),Ie(e)),t.preventDefault(),!0}t.key==="Backspace"&&!(0,d._0)(t)&&!t.shiftKey&&!t.altKey&&H.textContent.length===1&&Si(e)}if(Br(e,i,t))return!0;if(t.altKey&&t.key==="Enter"&&!(0,d._0)(t)&&!t.shiftKey){var Z=(0,g._Y)(r,"A"),K=(0,g.Th)(r,"data-type","link-ref"),le=(0,g.Th)(r,"data-type","footnotes-ref");if(Z||K||le||H&&H.tagName.length===2){var ee=e.wysiwyg.popover.querySelector("input");ee.focus(),ee.select()}}if(st(e,t))return!0;if(N("⇧⌘U",t)){var W=e.wysiwyg.popover.querySelector('[data-type="up"]');if(W)return W.click(),t.preventDefault(),!0}if(N("⇧⌘D",t)){var W=e.wysiwyg.popover.querySelector('[data-type="down"]');if(W)return W.click(),t.preventDefault(),!0}if(Ii(e,i,t))return!0;if(!(0,d._0)(t)&&t.shiftKey&&!t.altKey&&t.key==="Enter"&&r.parentElement.tagName!=="LI"&&r.parentElement.tagName!=="P")return["STRONG","STRIKE","S","I","EM","B"].includes(r.parentElement.tagName)?i.insertNode(document.createTextNode(`
`+h.Y.ZWSP)):i.insertNode(document.createTextNode(`
`)),i.collapse(!1),(0,j.jl)(i),Ie(e),We(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!(0,d._0)(t)&&!t.shiftKey&&!t.altKey&&i.toString()===""){if(zr(e,i,t,l))return!0;if(a){if(a.previousElementSibling&&a.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&a.previousElementSibling.getAttribute("data-block")==="0"&&a.tagName!=="UL"&&a.tagName!=="OL"){var ge=(0,j.ED)(a,e.wysiwyg.element,i).start;if(ge===0&&i.startOffset===0||ge===1&&a.innerText.startsWith(h.Y.ZWSP))return _n(a.previousElementSibling.lastElementChild,e,!1),a.innerHTML.trim().replace(h.Y.ZWSP,"")===""&&(a.remove(),Ie(e)),t.preventDefault(),!0}var ae=i.startOffset;if(i.toString()===""&&r.nodeType===3&&r.textContent.charAt(ae-2)===`
`&&r.textContent.charAt(ae-1)!==h.Y.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(r.parentElement.tagName))return r.textContent=r.textContent.substring(0,ae-1)+h.Y.ZWSP,i.setStart(r,ae),i.collapse(!0),Ie(e),t.preventDefault(),!0;r.textContent===h.Y.ZWSP&&i.startOffset===1&&!r.previousSibling&&rt(i)&&(r.textContent=""),a.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(je){je.firstElementChild.style.display="inline",je.lastElementChild.style.display="none"}),a.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(je){je.firstElementChild.style.display="inline",je.lastElementChild.style.display="none"})}}if((0,d.gm)()&&i.startOffset===1&&r.textContent.indexOf(h.Y.ZWSP)>-1&&r.previousSibling&&r.previousSibling.nodeType!==3&&r.previousSibling.tagName==="CODE"&&(t.key==="Backspace"||t.key==="ArrowLeft"))return i.selectNodeContents(r.previousSibling),i.collapse(!1),t.preventDefault(),!0;if(Ur(t,a,i))return t.preventDefault(),!0;if(xr(i,t.key),t.key==="ArrowDown"){var be=r.nextSibling;be&&be.nodeType!==3&&be.getAttribute("data-type")==="math-inline"&&i.setStartAfter(be)}return a&&Ce(a,e,t,i)?(t.preventDefault(),!0):!1},st=function(e,t){if(N("⇧⌘X",t)){var i=e.wysiwyg.popover.querySelector('[data-type="remove"]');return i&&i.click(),t.preventDefault(),!0}},Wt=function(e){clearTimeout(e.wysiwyg.hlToolbarTimeoutId),e.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(e.wysiwyg.element.getAttribute("contenteditable")!=="false"&&(0,j.Co)(e.wysiwyg.element)){p(e.toolbar.elements,h.Y.EDIT_TOOLBARS),E(e.toolbar.elements,h.Y.EDIT_TOOLBARS);var t=getSelection().getRangeAt(0),i=t.startContainer;t.startContainer.nodeType===3?i=t.startContainer.parentElement:i=i.childNodes[t.startOffset>=i.childNodes.length?i.childNodes.length-1:t.startOffset];var r=(0,g.Th)(i,"data-type","footnotes-block");if(r){e.wysiwyg.popover.innerHTML="",pt(r,e),ht(e,r);return}var a=(0,g._Y)(i,"LI");a?(a.classList.contains("vditor-task")?v(e.toolbar.elements,["check"]):a.parentElement.tagName==="OL"?v(e.toolbar.elements,["ordered-list"]):a.parentElement.tagName==="UL"&&v(e.toolbar.elements,["list"]),E(e.toolbar.elements,["outdent","indent"])):b(e.toolbar.elements,["outdent","indent"]),(0,g._Y)(i,"BLOCKQUOTE")&&v(e.toolbar.elements,["quote"]),((0,g._Y)(i,"B")||(0,g._Y)(i,"STRONG"))&&v(e.toolbar.elements,["bold"]),((0,g._Y)(i,"I")||(0,g._Y)(i,"EM"))&&v(e.toolbar.elements,["italic"]),((0,g._Y)(i,"STRIKE")||(0,g._Y)(i,"S"))&&v(e.toolbar.elements,["strike"]),e.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(oe){oe.classList.remove("vditor-comment--focus")});var l=(0,g.KJ)(i,"vditor-comment");if(l){var w=l.getAttribute("data-cmtids").split(" ");if(w.length>1&&l.nextSibling.isSameNode(l.nextElementSibling)){var _=l.nextElementSibling.getAttribute("data-cmtids").split(" ");w.find(function(oe){if(_.includes(oe))return w=[oe],!0})}e.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(oe){oe.getAttribute("data-cmtids").indexOf(w[0])>-1&&oe.classList.add("vditor-comment--focus")})}var D=(0,g._Y)(i,"A");D&&v(e.toolbar.elements,["link"]);var L=(0,g._Y)(i,"TABLE"),H=(0,O.c)(i);(0,g._Y)(i,"CODE")?(0,g._Y)(i,"PRE")?(b(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),v(e.toolbar.elements,["code"])):(b(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),v(e.toolbar.elements,["inline-code"])):H?(b(e.toolbar.elements,["bold"]),v(e.toolbar.elements,["headings"])):L&&b(e.toolbar.elements,["table"]);var z=(0,g.KJ)(i,"vditor-toc");if(z){e.wysiwyg.popover.innerHTML="",pt(z,e),ht(e,z);return}var X=(0,O.f)(i,"BLOCKQUOTE");if(X&&(e.wysiwyg.popover.innerHTML="",un(t,X,e),dn(t,X,e),pt(X,e),ht(e,X)),a&&(e.wysiwyg.popover.innerHTML="",un(t,a,e),dn(t,a,e),pt(a,e),ht(e,a)),L){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="";var Z=function(){var oe=L.rows.length,_e=L.rows[0].cells.length,Ut=parseInt(Ye.value,10)||oe,Vt=parseInt(ft.value,10)||_e;if(!(Ut===oe&&_e===Vt)){if(_e!==Vt)for(var Hn=Vt-_e,Mt=0;Mt<L.rows.length;Mt++)if(Hn>0)for(var Jr=0;Jr<Hn;Jr++)Mt===0?L.rows[Mt].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):L.rows[Mt].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var Bi=_e-1;Bi>=Vt;Bi--)L.rows[Mt].cells[Bi].remove();if(oe!==Ut){var Qr=Ut-oe;if(Qr>0){for(var zi="<tr>",gn=0;gn<Vt;gn++)zi+="<td> </td>";for(var ea=0;ea<Qr;ea++)L.querySelector("tbody")?L.querySelector("tbody").insertAdjacentHTML("beforeend",zi):L.querySelector("thead").insertAdjacentHTML("afterend",zi+"</tr>")}else for(var gn=oe-1;gn>=Ut;gn--)L.rows[gn].remove(),L.rows.length===1&&L.querySelector("tbody").remove()}typeof e.options.input=="function"&&e.options.input(C(e))}},K=function(oe){Wn(L,oe),oe==="right"?(ge.classList.remove("vditor-icon--current"),ae.classList.remove("vditor-icon--current"),be.classList.add("vditor-icon--current")):oe==="center"?(ge.classList.remove("vditor-icon--current"),be.classList.remove("vditor-icon--current"),ae.classList.add("vditor-icon--current")):(ae.classList.remove("vditor-icon--current"),be.classList.remove("vditor-icon--current"),ge.classList.add("vditor-icon--current")),(0,j.jl)(t),Ie(e)},le=(0,g._Y)(i,"TD"),ee=(0,g._Y)(i,"TH"),W="left";le?W=le.getAttribute("align")||"left":ee&&(W=ee.getAttribute("align")||"center");var ge=document.createElement("button");ge.setAttribute("type","button"),ge.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,d.fG)("⇧⌘L")+">"),ge.setAttribute("data-type","left"),ge.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',ge.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(W==="left"?" vditor-icon--current":""),ge.onclick=function(){K("left")};var ae=document.createElement("button");ae.setAttribute("type","button"),ae.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,d.fG)("⇧⌘C")+">"),ae.setAttribute("data-type","center"),ae.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',ae.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(W==="center"?" vditor-icon--current":""),ae.onclick=function(){K("center")};var be=document.createElement("button");be.setAttribute("type","button"),be.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,d.fG)("⇧⌘R")+">"),be.setAttribute("data-type","right"),be.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',be.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(W==="right"?" vditor-icon--current":""),be.onclick=function(){K("right")};var je=document.createElement("button");je.setAttribute("type","button"),je.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,d.fG)("⌘=")+">"),je.setAttribute("data-type","insertRow"),je.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',je.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",je.onclick=function(){var oe=getSelection().getRangeAt(0).startContainer,_e=(0,g._Y)(oe,"TD")||(0,g._Y)(oe,"TH");_e&&Or(e,t,_e)};var He=document.createElement("button");He.setAttribute("type","button"),He.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,d.fG)("⇧⌘F")+">"),He.setAttribute("data-type","insertRow"),He.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',He.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",He.onclick=function(){var oe=getSelection().getRangeAt(0).startContainer,_e=(0,g._Y)(oe,"TD")||(0,g._Y)(oe,"TH");_e&&Pr(e,t,_e)};var Be=document.createElement("button");Be.setAttribute("type","button"),Be.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,d.fG)("⇧⌘=")+">"),Be.setAttribute("data-type","insertColumn"),Be.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',Be.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Be.onclick=function(){var oe=getSelection().getRangeAt(0).startContainer,_e=(0,g._Y)(oe,"TD")||(0,g._Y)(oe,"TH");_e&&Yn(e,L,_e)};var lt=document.createElement("button");lt.setAttribute("type","button"),lt.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,d.fG)("⇧⌘G")+">"),lt.setAttribute("data-type","insertColumn"),lt.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',lt.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",lt.onclick=function(){var oe=getSelection().getRangeAt(0).startContainer,_e=(0,g._Y)(oe,"TD")||(0,g._Y)(oe,"TH");_e&&Yn(e,L,_e,"beforebegin")};var tt=document.createElement("button");tt.setAttribute("type","button"),tt.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,d.fG)("⌘-")+">"),tt.setAttribute("data-type","deleteRow"),tt.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',tt.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",tt.onclick=function(){var oe=getSelection().getRangeAt(0).startContainer,_e=(0,g._Y)(oe,"TD")||(0,g._Y)(oe,"TH");_e&&Rr(e,t,_e)};var ct=document.createElement("button");ct.setAttribute("type","button"),ct.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,d.fG)("⇧⌘-")+">"),ct.setAttribute("data-type","deleteColumn"),ct.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',ct.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",ct.onclick=function(){var oe=getSelection().getRangeAt(0).startContainer,_e=(0,g._Y)(oe,"TD")||(0,g._Y)(oe,"TH");_e&&Hr(e,t,L,_e)};var Te=document.createElement("span");Te.setAttribute("aria-label",window.VditorI18n.row),Te.className="vditor-tooltipped vditor-tooltipped__n";var Ye=document.createElement("input");Te.appendChild(Ye),Ye.type="number",Ye.min="1",Ye.className="vditor-input",Ye.style.width="42px",Ye.style.textAlign="center",Ye.setAttribute("placeholder",window.VditorI18n.row),Ye.value=L.rows.length.toString(),Ye.oninput=function(){Z()},Ye.onkeydown=function(oe){if(!oe.isComposing){if(oe.key==="Tab"){ft.focus(),ft.select(),oe.preventDefault();return}st(e,oe)||kt(oe,t)}};var Zn=document.createElement("span");Zn.setAttribute("aria-label",window.VditorI18n.column),Zn.className="vditor-tooltipped vditor-tooltipped__n";var ft=document.createElement("input");Zn.appendChild(ft),ft.type="number",ft.min="1",ft.className="vditor-input",ft.style.width="42px",ft.style.textAlign="center",ft.setAttribute("placeholder",window.VditorI18n.column),ft.value=L.rows[0].cells.length.toString(),ft.oninput=function(){Z()},ft.onkeydown=function(oe){if(!oe.isComposing){if(oe.key==="Tab"){Ye.focus(),Ye.select(),oe.preventDefault();return}st(e,oe)||kt(oe,t)}},un(t,L,e),dn(t,L,e),pt(L,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",ge),e.wysiwyg.popover.insertAdjacentElement("beforeend",ae),e.wysiwyg.popover.insertAdjacentElement("beforeend",be),e.wysiwyg.popover.insertAdjacentElement("beforeend",He),e.wysiwyg.popover.insertAdjacentElement("beforeend",je),e.wysiwyg.popover.insertAdjacentElement("beforeend",lt),e.wysiwyg.popover.insertAdjacentElement("beforeend",Be),e.wysiwyg.popover.insertAdjacentElement("beforeend",tt),e.wysiwyg.popover.insertAdjacentElement("beforeend",ct),e.wysiwyg.popover.insertAdjacentElement("beforeend",Te),e.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),e.wysiwyg.popover.insertAdjacentElement("beforeend",Zn),ht(e,L)}var ji=(0,g.Th)(i,"data-type","link-ref");ji&&br(e,ji,t);var pn=(0,g.Th)(i,"data-type","footnotes-ref");if(pn){e.options.lang,e.options,e.wysiwyg.popover.innerHTML="";var Te=document.createElement("span");Te.setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,d.fG)("⌥Enter")+">"),Te.className="vditor-tooltipped vditor-tooltipped__n";var Ht=document.createElement("input");Te.appendChild(Ht),Ht.className="vditor-input",Ht.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,d.fG)("⌥Enter")+">"),Ht.style.width="120px",Ht.value=pn.getAttribute("data-footnotes-label"),Ht.oninput=function(){Ht.value.trim()!==""&&pn.setAttribute("data-footnotes-label",Ht.value),typeof e.options.input=="function"&&e.options.input(C(e))},Ht.onkeydown=function(_e){_e.isComposing||st(e,_e)||kt(_e,t)},pt(pn,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",Te),ht(e,pn)}var Je=(0,g.KJ)(i,"vditor-wysiwyg__block"),Zr=Je?Je.getAttribute("data-type").indexOf("block")>-1:!1;if(e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(oe){if(!Je||Je&&Zr&&!Je.contains(oe)){var _e=oe.previousElementSibling;_e.style.display="none"}}),Je&&Zr){if(e.wysiwyg.popover.innerHTML="",un(t,Je,e),dn(t,Je,e),pt(Je,e),Je.getAttribute("data-type")==="code-block"){var Xn=document.createElement("span");Xn.setAttribute("aria-label",window.VditorI18n.language+"<"+(0,d.fG)("⌥Enter")+">"),Xn.className="vditor-tooltipped vditor-tooltipped__n";var Et=document.createElement("input");Xn.appendChild(Et);var Rn=Je.firstElementChild.firstElementChild;Et.className="vditor-input",Et.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,d.fG)("⌥Enter")+">"),Et.value=Rn.className.indexOf("language-")>-1?Rn.className.split("-")[1].split(" ")[0]:"",Et.oninput=function(oe){Et.value.trim()!==""?Rn.className="language-".concat(Et.value):(Rn.className="",e.hint.recentLanguage=""),Je.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(Je.lastElementChild.innerHTML=Je.firstElementChild.innerHTML,ce(Je.lastElementChild,e)),Ie(e),oe.detail===1&&(t.setStart(Rn.firstChild,0),t.collapse(!0),(0,j.jl)(t))},Et.onkeydown=function(oe){if(!oe.isComposing&&!st(e,oe)){if(oe.key==="Escape"&&e.hint.element.style.display==="block"){e.hint.element.style.display="none",oe.preventDefault();return}e.hint.select(oe,e),kt(oe,t)}},Et.onkeyup=function(oe){var _e,Ut;if(!(oe.isComposing||oe.key==="Enter"||oe.key==="ArrowUp"||oe.key==="Escape"||oe.key==="ArrowDown")){var Vt=[],Hn=Et.value.substring(0,Et.selectionStart);(e.options.preview.hljs.langs||h.Y.ALIAS_CODE_LANGUAGES.concat(((Ut=(_e=window.hljs)===null||_e===void 0?void 0:_e.listLanguages())!==null&&Ut!==void 0?Ut:[]).sort())).forEach(function(Mt){Mt.indexOf(Hn.toLowerCase())>-1&&Vt.push({html:Mt,value:Mt})}),e.hint.genHTML(Vt,Hn,e),oe.preventDefault()}},e.wysiwyg.popover.insertAdjacentElement("beforeend",Xn)}ht(e,Je)}else Je=void 0;if(H){e.wysiwyg.popover.innerHTML="";var Te=document.createElement("span");Te.setAttribute("aria-label","ID<"+(0,d.fG)("⌥Enter")+">"),Te.className="vditor-tooltipped vditor-tooltipped__n";var Ft=document.createElement("input");Te.appendChild(Ft),Ft.className="vditor-input",Ft.setAttribute("placeholder","ID<"+(0,d.fG)("⌥Enter")+">"),Ft.style.width="120px",Ft.value=H.getAttribute("data-id")||"",Ft.oninput=function(){H.setAttribute("data-id",Ft.value),typeof e.options.input=="function"&&e.options.input(C(e))},Ft.onkeydown=function(_e){_e.isComposing||st(e,_e)||kt(_e,t)},un(t,H,e),dn(t,H,e),pt(H,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",Te),ht(e,H)}if(D&&Ci(e,D,t),!X&&!a&&!L&&!Je&&!D&&!ji&&!pn&&!H&&!z){var mn=(0,g.Th)(i,"data-block","0");mn&&mn.parentElement.isEqualNode(e.wysiwyg.element)?(e.wysiwyg.popover.innerHTML="",un(t,mn,e),dn(t,mn,e),pt(mn,e),ht(e,mn)):e.wysiwyg.popover.style.display="none"}e.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(oe){oe.style.display="none"});var Xr=(0,g.Th)(t.startContainer,"data-type","backslash");Xr&&(Xr.querySelector("span").style.display="inline")}},200)},ht=function(e,t){var i=t,r=(0,g._Y)(t,"TABLE");r&&(i=r),e.wysiwyg.popover.style.left="0",e.wysiwyg.popover.style.display="block",e.wysiwyg.popover.style.top=Math.max(-8,i.offsetTop-21-e.wysiwyg.element.scrollTop)+"px",e.wysiwyg.popover.style.left=Math.min(i.offsetLeft,e.wysiwyg.element.clientWidth-e.wysiwyg.popover.clientWidth)+"px",e.wysiwyg.popover.setAttribute("data-top",(i.offsetTop-21).toString())},br=function(e,t,i){i===void 0&&(i=getSelection().getRangeAt(0)),e.wysiwyg.popover.innerHTML="";var r=function(){l.value.trim()!==""&&(t.tagName==="IMG"?t.setAttribute("alt",l.value):t.textContent=l.value),_.value.trim()!==""&&t.setAttribute("data-link-label",_.value),typeof e.options.input=="function"&&e.options.input(C(e))},a=document.createElement("span");a.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),a.className="vditor-tooltipped vditor-tooltipped__n";var l=document.createElement("input");a.appendChild(l),l.className="vditor-input",l.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),l.style.width="120px",l.value=t.getAttribute("alt")||t.textContent,l.oninput=function(){r()},l.onkeydown=function(D){st(e,D)||kt(D,i)||Ln(e,t,D,_)};var w=document.createElement("span");w.setAttribute("aria-label",window.VditorI18n.linkRef),w.className="vditor-tooltipped vditor-tooltipped__n";var _=document.createElement("input");w.appendChild(_),_.className="vditor-input",_.setAttribute("placeholder",window.VditorI18n.linkRef),_.value=t.getAttribute("data-link-label"),_.oninput=function(){r()},_.onkeydown=function(D){st(e,D)||kt(D,i)||Ln(e,t,D,l)},pt(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",a),e.wysiwyg.popover.insertAdjacentElement("beforeend",w),ht(e,t)},un=function(e,t,i){var r=t.previousElementSibling;if(!(!r||!t.parentElement.isEqualNode(i.wysiwyg.element)&&t.tagName!=="LI")){var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("data-type","up"),a.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,d.fG)("⇧⌘U")+">"),a.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',a.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",a.onclick=function(){e.insertNode(document.createElement("wbr")),r.insertAdjacentElement("beforebegin",t),(0,j.ir)(i.wysiwyg.element,e),Ie(i),Wt(i),We(i)},i.wysiwyg.popover.insertAdjacentElement("beforeend",a)}},dn=function(e,t,i){var r=t.nextElementSibling;if(!(!r||!t.parentElement.isEqualNode(i.wysiwyg.element)&&t.tagName!=="LI")){var a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("data-type","down"),a.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,d.fG)("⇧⌘D")+">"),a.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',a.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",a.onclick=function(){e.insertNode(document.createElement("wbr")),r.insertAdjacentElement("afterend",t),(0,j.ir)(i.wysiwyg.element,e),Ie(i),Wt(i),We(i)},i.wysiwyg.popover.insertAdjacentElement("beforeend",a)}},pt=function(e,t){var i=document.createElement("button");i.setAttribute("type","button"),i.setAttribute("data-type","remove"),i.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,d.fG)("⇧⌘X")+">"),i.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',i.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",i.onclick=function(){var r=(0,j.RN)(t);r.setStartAfter(e),(0,j.jl)(r),e.remove(),Ie(t),Wt(t),["H1","H2","H3","H4","H5","H6"].includes(e.tagName)&&ne(t)},t.wysiwyg.popover.insertAdjacentElement("beforeend",i)},Ln=function(e,t,i,r){if(!i.isComposing){if(i.key==="Tab"){r.focus(),r.select(),i.preventDefault();return}if(!(0,d._0)(i)&&!i.shiftKey&&i.altKey&&i.key==="Enter"){var a=(0,j.RN)(e);t.insertAdjacentHTML("afterend",h.Y.ZWSP),a.setStartAfter(t.nextSibling),a.collapse(!0),(0,j.jl)(a),i.preventDefault()}}},Ci=function(e,t,i){e.wysiwyg.popover.innerHTML="";var r=function(){l.value.trim()!==""&&(t.innerHTML=l.value),t.setAttribute("href",_.value),t.setAttribute("title",L.value),Ie(e)};t.querySelectorAll("[data-marker]").forEach(function(H){H.removeAttribute("data-marker")});var a=document.createElement("span");a.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),a.className="vditor-tooltipped vditor-tooltipped__n";var l=document.createElement("input");a.appendChild(l),l.className="vditor-input",l.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),l.style.width="120px",l.value=t.innerHTML||"",l.oninput=function(){r()},l.onkeydown=function(H){st(e,H)||kt(H,i)||Ln(e,t,H,_)};var w=document.createElement("span");w.setAttribute("aria-label",window.VditorI18n.link),w.className="vditor-tooltipped vditor-tooltipped__n";var _=document.createElement("input");w.appendChild(_),_.className="vditor-input",_.setAttribute("placeholder",window.VditorI18n.link),_.value=t.getAttribute("href")||"",_.oninput=function(){r()},_.onkeydown=function(H){st(e,H)||kt(H,i)||Ln(e,t,H,L)};var D=document.createElement("span");D.setAttribute("aria-label",window.VditorI18n.tooltipText),D.className="vditor-tooltipped vditor-tooltipped__n";var L=document.createElement("input");D.appendChild(L),L.className="vditor-input",L.setAttribute("placeholder",window.VditorI18n.tooltipText),L.style.width="60px",L.value=t.getAttribute("title")||"",L.oninput=function(){r()},L.onkeydown=function(H){st(e,H)||kt(H,i)||Ln(e,t,H,l)},pt(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",a),e.wysiwyg.popover.insertAdjacentElement("beforeend",w),e.wysiwyg.popover.insertAdjacentElement("beforeend",D),ht(e,t)},co=function(e,t){var i=e.target;t.wysiwyg.popover.innerHTML="";var r=function(){i.setAttribute("src",l.value),i.setAttribute("alt",_.value),i.setAttribute("title",L.value),typeof t.options.input=="function"&&t.options.input(C(t))},a=document.createElement("span");a.setAttribute("aria-label",window.VditorI18n.imageURL),a.className="vditor-tooltipped vditor-tooltipped__n";var l=document.createElement("input");a.appendChild(l),l.className="vditor-input",l.setAttribute("placeholder",window.VditorI18n.imageURL),l.value=i.getAttribute("src")||"",l.oninput=function(){r()},l.onkeydown=function(H){st(t,H)};var w=document.createElement("span");w.setAttribute("aria-label",window.VditorI18n.alternateText),w.className="vditor-tooltipped vditor-tooltipped__n";var _=document.createElement("input");w.appendChild(_),_.className="vditor-input",_.setAttribute("placeholder",window.VditorI18n.alternateText),_.style.width="52px",_.value=i.getAttribute("alt")||"",_.oninput=function(){r()},_.onkeydown=function(H){st(t,H)};var D=document.createElement("span");D.setAttribute("aria-label",window.VditorI18n.title),D.className="vditor-tooltipped vditor-tooltipped__n";var L=document.createElement("input");D.appendChild(L),L.className="vditor-input",L.setAttribute("placeholder",window.VditorI18n.title),L.value=i.getAttribute("title")||"",L.oninput=function(){r()},L.onkeydown=function(H){st(t,H)},pt(i,t),t.wysiwyg.popover.insertAdjacentElement("beforeend",a),t.wysiwyg.popover.insertAdjacentElement("beforeend",w),t.wysiwyg.popover.insertAdjacentElement("beforeend",D),ht(t,i)},kt=function(e,t){if(!(0,d._0)(e)&&!e.shiftKey&&e.key==="Enter"||e.key==="Escape")return t&&(0,j.jl)(t),e.preventDefault(),e.stopPropagation(),!0},fn=function(e){e.currentMode==="wysiwyg"?Wt(e):e.currentMode==="ir"&&Pt(e)},yr=function(e,t,i){i===void 0&&(i={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var r=e.wysiwyg.element;r.innerHTML=e.lute.Md2VditorDOM(t),r.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(a){ce(a,e),a.previousElementSibling.setAttribute("style","display:none")}),Ie(e,i)},uo=function(e,t,i){for(var r=e.startContainer.parentElement,a=!1,l="",w="",_=wt(e),D=_.beforeHTML,L=_.afterHTML;r&&!a;){var H=r.tagName;if(H==="STRIKE"&&(H="S"),H==="I"&&(H="EM"),H==="B"&&(H="STRONG"),H==="S"||H==="STRONG"||H==="EM"){var z="",X="",Z="";r.parentElement.getAttribute("data-block")!=="0"&&(X=yt(r),Z=Ve(r)),(D||X)&&(z="".concat(X,"<").concat(H,">").concat(D,"</").concat(H,">"),D=z),(i==="bold"&&H==="STRONG"||i==="italic"&&H==="EM"||i==="strikeThrough"&&H==="S")&&(z+="".concat(l).concat(h.Y.ZWSP,"<wbr>").concat(w),a=!0),(L||Z)&&(L="<".concat(H,">").concat(L,"</").concat(H,">").concat(Z),z+=L),r.parentElement.getAttribute("data-block")!=="0"?(r=r.parentElement,r.innerHTML=z):(r.outerHTML=z,r=r.parentElement),l="<".concat(H,">")+l,w="</".concat(H,">")+w}else a=!0}(0,j.ir)(t.wysiwyg.element,e)},fo=function(e,t,i){if(!(e.wysiwyg.composingLock&&i instanceof CustomEvent)){var r=!0,a=!0;e.wysiwyg.element.querySelector("wbr")&&e.wysiwyg.element.querySelector("wbr").remove();var l=(0,j.RN)(e),w=t.getAttribute("data-type");if(t.classList.contains("vditor-menu--current"))if(w==="strike"&&(w="strikeThrough"),w==="quote"){var _=(0,g._Y)(l.startContainer,"BLOCKQUOTE");_||(_=l.startContainer.childNodes[l.startOffset]),_&&(r=!1,t.classList.remove("vditor-menu--current"),l.insertNode(document.createElement("wbr")),_.outerHTML=_.innerHTML.trim()===""?'<p data-block="0">'.concat(_.innerHTML,"</p>"):_.innerHTML,(0,j.ir)(e.wysiwyg.element,l))}else if(w==="inline-code"){var D=(0,g._Y)(l.startContainer,"CODE");D||(D=l.startContainer.childNodes[l.startOffset]),D&&(D.outerHTML=D.innerHTML.replace(h.Y.ZWSP,"")+"<wbr>",(0,j.ir)(e.wysiwyg.element,l))}else w==="link"?(l.collapsed&&l.selectNode(l.startContainer.parentElement),document.execCommand("unlink",!1,"")):w==="check"||w==="list"||w==="ordered-list"?(qn(e,l,w),(0,j.ir)(e.wysiwyg.element,l),r=!1,t.classList.remove("vditor-menu--current")):(r=!1,t.classList.remove("vditor-menu--current"),l.toString()===""?uo(l,e,w):document.execCommand(w,!1,""));else{e.wysiwyg.element.childNodes.length===0&&(e.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,j.ir)(e.wysiwyg.element,l));var L=(0,g.pt)(l.startContainer);if(w==="quote"){if(L||(L=l.startContainer.childNodes[l.startOffset]),L){r=!1,t.classList.add("vditor-menu--current"),l.insertNode(document.createElement("wbr"));var H=(0,g._Y)(l.startContainer,"LI");H&&L.contains(H)?H.innerHTML='<blockquote data-block="0">'.concat(H.innerHTML,"</blockquote>"):L.outerHTML='<blockquote data-block="0">'.concat(L.outerHTML,"</blockquote>"),(0,j.ir)(e.wysiwyg.element,l)}}else if(w==="check"||w==="list"||w==="ordered-list")qn(e,l,w,!1),(0,j.ir)(e.wysiwyg.element,l),r=!1,p(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current");else if(w==="inline-code"){if(l.toString()===""){var z=document.createElement("code");z.textContent=h.Y.ZWSP,l.insertNode(z),l.setStart(z.firstChild,1),l.collapse(!0),(0,j.jl)(l)}else if(l.startContainer.nodeType===3){var z=document.createElement("code");l.surroundContents(z),l.insertNode(z),(0,j.jl)(l)}t.classList.add("vditor-menu--current")}else if(w==="code"){var z=document.createElement("div");z.className="vditor-wysiwyg__block",z.setAttribute("data-type","code-block"),z.setAttribute("data-block","0"),z.setAttribute("data-marker","```"),l.toString()===""?z.innerHTML=`<pre><code><wbr>
</code></pre>`:(z.innerHTML="<pre><code>".concat(l.toString(),"<wbr></code></pre>"),l.deleteContents()),l.insertNode(z),L&&(L.outerHTML=e.lute.SpinVditorDOM(L.outerHTML)),(0,j.ir)(e.wysiwyg.element,l),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(je){ce(je,e)}),t.classList.add("vditor-menu--disabled")}else if(w==="link"){if(l.toString()===""){var X=document.createElement("a");X.innerText=h.Y.ZWSP,l.insertNode(X),l.setStart(X.firstChild,1),l.collapse(!0),Ci(e,X,l);var Z=e.wysiwyg.popover.querySelector("input");Z.value="",Z.focus(),a=!1}else{var z=document.createElement("a");z.setAttribute("href",""),z.innerHTML=l.toString(),l.surroundContents(z),l.insertNode(z),(0,j.jl)(l),Ci(e,z,l);var K=e.wysiwyg.popover.querySelectorAll("input");K[0].value=z.innerText,K[1].focus()}r=!1,t.classList.add("vditor-menu--current")}else if(w==="table"){var le='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(l.toString().trim()==="")L&&L.innerHTML.trim().replace(h.Y.ZWSP,"")===""?L.outerHTML=le:document.execCommand("insertHTML",!1,le),l.selectNode(e.wysiwyg.element.querySelector("wbr").previousSibling),e.wysiwyg.element.querySelector("wbr").remove(),(0,j.jl)(l);else{le='<table data-block="0"><thead><tr>';var ee=l.toString().split(`
`),W=ee[0].split(",").length>ee[0].split("	").length?",":"	";ee.forEach(function(be,je){je===0?(be.split(W).forEach(function(He,Be){Be===0?le+="<th>".concat(He,"<wbr></th>"):le+="<th>".concat(He,"</th>")}),le+="</tr></thead>"):(je===1?le+="<tbody><tr>":le+="<tr>",be.split(W).forEach(function(He){le+="<td>".concat(He,"</td>")}),le+="</tr>")}),le+="</tbody></table>",document.execCommand("insertHTML",!1,le),(0,j.ir)(e.wysiwyg.element,l)}r=!1,t.classList.add("vditor-menu--disabled")}else if(w==="line"){if(L){var ge=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;L.innerHTML.trim()===""?L.outerHTML=ge:L.insertAdjacentHTML("afterend",ge),(0,j.ir)(e.wysiwyg.element,l)}}else if(r=!1,t.classList.add("vditor-menu--current"),w==="strike"&&(w="strikeThrough"),l.toString()===""&&(w==="bold"||w==="italic"||w==="strikeThrough")){var ae="strong";w==="italic"?ae="em":w==="strikeThrough"&&(ae="s");var z=document.createElement(ae);z.textContent=h.Y.ZWSP,l.insertNode(z),z.previousSibling&&z.previousSibling.textContent===h.Y.ZWSP&&(z.previousSibling.textContent=""),l.setStart(z.firstChild,1),l.collapse(!0),(0,j.jl)(l)}else document.execCommand(w,!1,"")}r&&Wt(e),a&&Ie(e)}},$e=function(){function e(t,i){var r,a=this;this.element=document.createElement("div"),i.className&&(r=this.element.classList).add.apply(r,i.className.split(" "));var l=i.hotkey?" <".concat((0,d.fG)(i.hotkey),">"):"";i.level===2&&(l=i.hotkey?" &lt;".concat((0,d.fG)(i.hotkey),"&gt;"):"");var w=i.tip?i.tip+l:"".concat(window.VditorI18n[i.name]).concat(l),_=i.name==="upload"?"div":"button";if(i.level===2)this.element.innerHTML="<".concat(_,' data-type="').concat(i.name,'">').concat(w,"</").concat(_,">");else{this.element.classList.add("vditor-toolbar__item");var D=document.createElement(_);D.setAttribute("data-type",i.name),D.className="vditor-tooltipped vditor-tooltipped__".concat(i.tipPosition),D.setAttribute("aria-label",w),D.innerHTML=i.icon,this.element.appendChild(D)}i.prefix&&this.element.children[0].addEventListener((0,d.y3)(),function(L){L.preventDefault(),!a.element.firstElementChild.classList.contains(h.Y.CLASS_MENU_DISABLED)&&(t.currentMode==="wysiwyg"?fo(t,a.element.children[0],L):t.currentMode==="ir"?xo(t,a.element.children[0],i.prefix||"",i.suffix||""):go(t,a.element.children[0],i.prefix||"",i.suffix||""))})}return e}(),ho=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yt=function(e,t,i){var r;if(typeof i!="string"?(x(e,["subToolbar","hint"]),i.preventDefault(),r=C(e)):r=i,!(e.currentMode===t&&typeof i!="string")){if(e.devtools&&e.devtools.renderEchart(e),e.options.preview.mode==="both"&&t==="sv"?e.preview.element.style.display="block":e.preview.element.style.display="none",E(e.toolbar.elements,h.Y.EDIT_TOOLBARS),p(e.toolbar.elements,h.Y.EDIT_TOOLBARS),b(e.toolbar.elements,["outdent","indent"]),t==="ir")k(e.toolbar.elements,["both"]),M(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="block",e.lute.SetVditorIR(!0),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!1),e.currentMode="ir",e.ir.element.innerHTML=e.lute.Md2VditorIRDOM(r),Rt(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),it(e),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(l){ce(l,e)}),e.ir.element.querySelectorAll(".vditor-toc").forEach(function(l){(0,he.T)(l,{cdn:e.options.cdn,math:e.options.preview.math})});else if(t==="wysiwyg")k(e.toolbar.elements,["both"]),M(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="block",e.ir.element.parentElement.style.display="none",e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!0),e.lute.SetVditorSV(!1),e.currentMode="wysiwyg",it(e),yr(e,r,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),e.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(l){(0,he.T)(l,{cdn:e.options.cdn,math:e.options.preview.math})}),e.wysiwyg.popover.style.display="none";else if(t==="sv"){M(e.toolbar.elements,["both"]),k(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="none",(e.options.preview.mode==="both"||e.options.preview.mode==="editor")&&(e.sv.element.style.display="block"),e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!0),e.currentMode="sv";var a=Er(r,e);a==="<div data-block='0'></div>"&&(a=""),e.sv.element.innerHTML=a,Fe(e.sv.element),Ge(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),it(e)}e.undo.resetIcon(e),typeof i!="string"&&(e[e.currentMode].element.focus(),fn(e)),ne(e),ln(e),e.toolbar.elements["edit-mode"]&&(e.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(l){l.classList.remove("vditor-menu--current")}),e.toolbar.elements["edit-mode"].querySelector('button[data-mode="'.concat(e.currentMode,'"]')).classList.add("vditor-menu--current")),e.outline.toggle(e,e.currentMode!=="sv"&&e.options.outline.enable,typeof i!="string")}},po=function(e){ho(t,e);function t(i,r){var a=e.call(this,i,r)||this,l=document.createElement("div");return l.className="vditor-hint".concat(r.level===2?"":" vditor-panel--arrow"),l.innerHTML='<button data-mode="wysiwyg">'.concat(window.VditorI18n.wysiwyg," &lt;").concat((0,d.fG)("⌥⌘7"),`></button>
<button data-mode="ir">`).concat(window.VditorI18n.instantRendering," &lt;").concat((0,d.fG)("⌥⌘8"),`></button>
<button data-mode="sv">`).concat(window.VditorI18n.splitView," &lt;").concat((0,d.fG)("⌥⌘9"),"></button>"),a.element.appendChild(l),a._bindEvent(i,l,r),a}return t.prototype._bindEvent=function(i,r,a){var l=this.element.children[0];A(i,r,l,a.level),r.children.item(0).addEventListener((0,d.y3)(),function(w){Yt(i,"wysiwyg",w),w.preventDefault(),w.stopPropagation()}),r.children.item(1).addEventListener((0,d.y3)(),function(w){Yt(i,"ir",w),w.preventDefault(),w.stopPropagation()}),r.children.item(2).addEventListener((0,d.y3)(),function(w){Yt(i,"sv",w),w.preventDefault(),w.stopPropagation()})},t}($e),An=function(e,t){return(0,j.Co)(e,t)?getSelection().toString():""},Ti=function(e,t){t.addEventListener("focus",function(){e.options.focus&&e.options.focus(C(e)),x(e,["subToolbar","hint"])})},wr=function(e,t){t.addEventListener("dblclick",function(i){i.target.tagName==="IMG"&&(e.options.image.preview?e.options.image.preview(i.target):e.options.image.isPreview&&(0,Q.o)(i.target,e.options.lang,e.options.theme))})},ki=function(e,t){t.addEventListener("blur",function(i){if(e.currentMode==="ir"){var r=e.ir.element.querySelector(".vditor-ir__node--expand");r&&r.classList.remove("vditor-ir__node--expand")}else e.currentMode==="wysiwyg"&&!e.wysiwyg.selectPopover.contains(i.relatedTarget)&&e.wysiwyg.hideComment();e[e.currentMode].range=(0,j.RN)(e),e.options.blur&&e.options.blur(C(e))})},Mi=function(e,t){t.addEventListener("dragstart",function(i){i.dataTransfer.setData(h.Y.DROP_EDITOR,h.Y.DROP_EDITOR)}),t.addEventListener("drop",function(i){i.dataTransfer.getData(h.Y.DROP_EDITOR)?xe(e):(i.dataTransfer.types.includes("Files")||i.dataTransfer.types.includes("text/html"))&&Kn(e,i,{pasteCode:function(r){document.execCommand("insertHTML",!1,r)}})})},xi=function(e,t,i){t.addEventListener("copy",function(r){return i(r,e)})},_i=function(e,t,i){t.addEventListener("cut",function(r){i(r,e),e.options.comment.enable&&e.currentMode==="wysiwyg"&&e.wysiwyg.getComments(e),document.execCommand("delete")})},We=function(e){if(e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)),!!e.options.typewriterMode){var t=e[e.currentMode].element,i=(0,j.Ey)(t).top;e.options.height==="auto"&&!e.element.classList.contains("vditor--fullscreen")&&window.scrollTo(window.scrollX,i+e.element.offsetTop+e.toolbar.element.offsetHeight-window.innerHeight/2+10),(e.options.height!=="auto"||e.element.classList.contains("vditor--fullscreen"))&&(t.scrollTop=i+t.scrollTop-t.clientHeight/2+10)}},Li=function(e,t){t.addEventListener("keydown",function(i){if(!i.isComposing&&e.options.keydown&&e.options.keydown(i),!((e.options.hint.extend.length>1||e.toolbar.elements.emoji)&&e.hint.select(i,e))){if(e.options.comment.enable&&e.currentMode==="wysiwyg"&&(i.key==="Backspace"||N("⌘X",i))&&e.wysiwyg.getComments(e),e.currentMode==="sv"){if(Ue(e,i))return}else if(e.currentMode==="wysiwyg"){if(lo(e,i))return}else if(e.currentMode==="ir"&&ye(e,i))return;if(e.options.ctrlEnter&&N("⌘Enter",i)){e.options.ctrlEnter(C(e)),i.preventDefault();return}if(N("⌘Z",i)&&!e.toolbar.elements.undo){e.undo.undo(e),i.preventDefault();return}if(N("⌘Y",i)&&!e.toolbar.elements.redo){e.undo.redo(e),i.preventDefault();return}if(i.key==="Escape"){e.hint.element.style.display==="block"?e.hint.element.style.display="none":e.options.esc&&!i.isComposing&&e.options.esc(C(e)),i.preventDefault();return}if((0,d._0)(i)&&i.altKey&&!i.shiftKey&&/^Digit[1-6]$/.test(i.code)){if(e.currentMode==="wysiwyg"){var r=i.code.replace("Digit","H");(0,g._Y)(getSelection().getRangeAt(0).startContainer,r)?Si(e):Un(e,r),Ie(e)}else e.currentMode==="sv"?Sr(e,"#".repeat(parseInt(i.code.replace("Digit",""),10))+" "):e.currentMode==="ir"&&Pn(e,"#".repeat(parseInt(i.code.replace("Digit",""),10))+" ");return i.preventDefault(),!0}if((0,d._0)(i)&&i.altKey&&!i.shiftKey&&/^Digit[7-9]$/.test(i.code))return i.code==="Digit7"?Yt(e,"wysiwyg",i):i.code==="Digit8"?Yt(e,"ir",i):i.code==="Digit9"&&Yt(e,"sv",i),!0;e.options.toolbar.find(function(a){if(!a.hotkey||a.toolbar){if(a.toolbar){var l=a.toolbar.find(function(w){if(!w.hotkey)return!1;if(N(w.hotkey,i))return e.toolbar.elements[w.name].children[0].dispatchEvent(new CustomEvent((0,d.y3)())),i.preventDefault(),!0});return!!l}return!1}if(N(a.hotkey,i))return e.toolbar.elements[a.name].children[0].dispatchEvent(new CustomEvent((0,d.y3)())),i.preventDefault(),!0})}})},Ai=function(e,t){t.addEventListener("selectstart",function(i){t.onmouseup=function(){setTimeout(function(){var r=An(e[e.currentMode].element);r.trim()?(e.currentMode==="wysiwyg"&&e.options.comment.enable&&(!(0,g.Th)(i.target,"data-type","footnotes-block")&&!(0,g.Th)(i.target,"data-type","link-ref-defs-block")?e.wysiwyg.showComment():e.wysiwyg.hideComment()),e.options.select&&e.options.select(r)):e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.wysiwyg.hideComment()})}})},Di=function(e,t){var i=(0,j.RN)(e);i.extractContents(),i.insertNode(document.createTextNode(Lute.Caret)),i.insertNode(document.createTextNode(t));var r=(0,g.Th)(i.startContainer,"data-block","0");r||(r=e.sv.element);var a=e.lute.SpinVditorSVDOM(r.textContent);a="<div data-block='0'>"+a.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",r.isEqualNode(e.sv.element)?r.innerHTML=a:r.outerHTML=a,Fe(e.sv.element),(0,j.ir)(e.sv.element,i),We(e)},Vn=function(e,t,i){i===void 0&&(i=!0);var r=e;for(r.nodeType===3&&(r=r.parentElement);r;){if(r.getAttribute("data-type")===t)return r;i?r=r.previousElementSibling:r=r.nextElementSibling}return!1},Er=function(e,t){I("SpinVditorSVDOM",e,"argument",t.options.debugger);var i=t.lute.SpinVditorSVDOM(e);return e="<div data-block='0'>"+i.replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",I("SpinVditorSVDOM",e,"result",t.options.debugger),e},mo=function(e){var t=e.getAttribute("data-type"),i=e.previousElementSibling,r=t&&t!=="text"&&t!=="table"&&t!=="heading-marker"&&t!=="newline"&&t!=="yaml-front-matter-open-marker"&&t!=="yaml-front-matter-close-marker"&&t!=="code-block-info"&&t!=="code-block-close-marker"&&t!=="code-block-open-marker"?e.textContent:"",a=!1;for(t==="newline"&&(a=!0);i&&!a;){var l=i.getAttribute("data-type");if(l==="li-marker"||l==="blockquote-marker"||l==="task-marker"||l==="padding"){var w=i.textContent;if(l==="li-marker"&&(t==="code-block-open-marker"||t==="code-block-info"))r=w.replace(/\S/g," ")+r;else if(t==="code-block-close-marker"&&i.nextElementSibling.isSameNode(e)){var _=Vn(e,"code-block-open-marker");_&&_.previousElementSibling&&(i=_.previousElementSibling,r=w+r)}else r=w+r}else l==="newline"&&(a=!0);i=i.previousElementSibling}return r},Ge=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),e.preview.render(e);var i=C(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(i),e.options.counter.enable&&e.counter.render(e,i),e.options.cache.enable&&(0,d.D)()&&(localStorage.setItem(e.options.cache.id,i),e.options.cache.after&&e.options.cache.after(i)),e.devtools&&e.devtools.renderEchart(e),clearTimeout(e.sv.processTimeoutId),e.sv.processTimeoutId=window.setTimeout(function(){t.enableAddUndoStack&&!e.sv.composingLock&&e.undo.addToUndoStack(e)},e.options.undoDelay)},Sr=function(e,t){var i=(0,j.RN)(e),r=(0,O.f)(i.startContainer,"SPAN");r&&r.textContent.trim()!==""&&(t=`
`+t),i.collapse(!0),document.execCommand("insertHTML",!1,t)},go=function(e,t,i,r){var a=(0,j.RN)(e),l=t.getAttribute("data-type");e.sv.element.childNodes.length===0&&(e.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,(0,j.ir)(e.sv.element,a));var w=(0,g.pt)(a.startContainer),_=(0,O.f)(a.startContainer,"SPAN");if(w){if(l==="link"){var D=void 0;a.toString()===""?D="".concat(i).concat(Lute.Caret).concat(r):D="".concat(i).concat(a.toString()).concat(r.replace(")",Lute.Caret+")")),document.execCommand("insertHTML",!1,D);return}else if(l==="italic"||l==="bold"||l==="strike"||l==="inline-code"||l==="code"||l==="table"||l==="line"){var D=void 0;a.toString()===""?D="".concat(i).concat(Lute.Caret).concat(l==="code"?"":r):D="".concat(i).concat(a.toString()).concat(Lute.Caret).concat(l==="code"?"":r),l==="table"||l==="code"&&_&&_.textContent!==""?D=`

`+D:l==="line"&&(D=`

`.concat(i,`
`).concat(Lute.Caret)),document.execCommand("insertHTML",!1,D);return}else if((l==="check"||l==="list"||l==="ordered-list"||l==="quote")&&_){var L="* ";l==="check"?L="* [ ] ":l==="ordered-list"?L="1. ":l==="quote"&&(L="> ");var H=Vn(_,"newline");H?H.insertAdjacentText("afterend",L):w.insertAdjacentText("afterbegin",L),se(e);return}(0,j.ir)(e.sv.element,a),Ge(e)}},Cr=function(e){switch(e.currentMode){case"ir":return e.ir.element;case"wysiwyg":return e.wysiwyg.element;case"sv":return e.sv.element}},Tr=function(e,t){e.options.upload.setHeaders&&(e.options.upload.headers=e.options.upload.setHeaders()),e.options.upload.headers&&Object.keys(e.options.upload.headers).forEach(function(i){t.setRequestHeader(i,e.options.upload.headers[i])})},vo=function(e,t,i,r){function a(l){return l instanceof i?l:new i(function(w){w(l)})}return new(i||(i=Promise))(function(l,w){function _(H){try{L(r.next(H))}catch(z){w(z)}}function D(H){try{L(r.throw(H))}catch(z){w(z)}}function L(H){H.done?l(H.value):a(H.value).then(_,D)}L((r=r.apply(e,t||[])).next())})},bo=function(e,t){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(L){return function(H){return D([L,H])}}function D(L){if(r)throw new TypeError("Generator is already executing.");for(;w&&(w=0,L[0]&&(i=0)),i;)try{if(r=1,a&&(l=L[0]&2?a.return:L[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,L[1])).done)return l;switch(a=0,l&&(L=[L[0]&2,l.value]),L[0]){case 0:case 1:l=L;break;case 4:return i.label++,{value:L[1],done:!1};case 5:i.label++,a=L[1],L=[0];continue;case 7:L=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(L[0]===6||L[0]===2)){i=0;continue}if(L[0]===3&&(!l||L[1]>l[0]&&L[1]<l[3])){i.label=L[1];break}if(L[0]===6&&i.label<l[1]){i.label=l[1],l=L;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(L);break}l[2]&&i.ops.pop(),i.trys.pop();continue}L=t.call(e,i)}catch(H){L=[6,H],a=0}finally{r=l=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}},yo=function(){function e(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"}return e}(),wo=function(e,t){e.tip.hide();var i=[],r="",a="";e.options.lang,e.options;for(var l=function(D,L){var H=t[L],z=!0;H.name||(r+="<li>".concat(window.VditorI18n.nameEmpty,"</li>"),z=!1),H.size>e.options.upload.max&&(r+="<li>".concat(H.name," ").concat(window.VditorI18n.over," ").concat(e.options.upload.max/1024/1024,"M</li>"),z=!1);var X=H.name.lastIndexOf("."),Z=H.name.substr(X),K=e.options.upload.filename(H.name.substr(0,X))+Z;if(e.options.upload.accept){var le=e.options.upload.accept.split(",").some(function(ee){var W=ee.trim();if(W.indexOf(".")===0){if(Z.toLowerCase()===W.toLowerCase())return!0}else if(H.type.split("/")[0]===W.split("/")[0])return!0;return!1});le||(r+="<li>".concat(H.name," ").concat(window.VditorI18n.fileTypeError,"</li>"),z=!1)}z&&(i.push(H),a+="<li>".concat(K," ").concat(window.VditorI18n.uploading,"</li>"))},w=t.length,_=0;_<w;_++)l(w,_);return e.tip.show("<ul>".concat(r).concat(a,"</ul>")),i},Eo=function(e,t){var i=Cr(t);i.focus();var r=JSON.parse(e),a="";r.code===1&&(a="".concat(r.msg)),r.data.errFiles&&r.data.errFiles.length>0&&(a="<ul><li>".concat(a,"</li>"),r.data.errFiles.forEach(function(w){var _=w.lastIndexOf("."),D=t.options.upload.filename(w.substr(0,_))+w.substr(_);a+="<li>".concat(D," ").concat(window.VditorI18n.uploadError,"</li>")}),a+="</ul>"),a?t.tip.show(a):t.tip.hide();var l="";Object.keys(r.data.succMap).forEach(function(w){var _=r.data.succMap[w],D=w.lastIndexOf("."),L=w.substr(D),H=t.options.upload.filename(w.substr(0,D))+L;L=L.toLowerCase(),L.indexOf(".wav")===0||L.indexOf(".mp3")===0||L.indexOf(".ogg")===0?t.currentMode==="wysiwyg"?l+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`.concat(_,'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="').concat(_,`"></audio></pre></div>
`):t.currentMode==="ir"?l+='<audio controls="controls" src="'.concat(_,`"></audio>
`):l+="[".concat(H,"](").concat(_,`)
`):L.indexOf(".apng")===0||L.indexOf(".bmp")===0||L.indexOf(".gif")===0||L.indexOf(".ico")===0||L.indexOf(".cur")===0||L.indexOf(".jpg")===0||L.indexOf(".jpeg")===0||L.indexOf(".jfif")===0||L.indexOf(".pjp")===0||L.indexOf(".pjpeg")===0||L.indexOf(".png")===0||L.indexOf(".svg")===0||L.indexOf(".webp")===0?t.currentMode==="wysiwyg"?l+='<img alt="'.concat(H,'" src="').concat(_,`">
`):l+="![".concat(H,"](").concat(_,`)
`):t.currentMode==="wysiwyg"?l+='<a href="'.concat(_,'">').concat(H,`</a>
`):l+="[".concat(H,"](").concat(_,`)
`)}),(0,j.jl)(t.upload.range),document.execCommand("insertHTML",!1,l),t.upload.range=getSelection().getRangeAt(0).cloneRange()},Oi=function(e,t,i){return vo(void 0,void 0,void 0,function(){var r,a,K,l,w,w,_,D,L,H,z,X,Z,K,le,ee;return bo(this,function(W){switch(W.label){case 0:for(r=[],a=e.options.upload.multiple===!0?t.length:1,K=0;K<a;K++)l=t[K],l instanceof DataTransferItem&&(l=l.getAsFile()),r.push(l);return e.options.upload.handler?[4,e.options.upload.handler(r)]:[3,2];case 1:return w=W.sent(),i&&(i.value=""),typeof w=="string"?(e.tip.show(w),[2]):[2];case 2:return!e.options.upload.url||!e.upload?(i&&(i.value=""),e.tip.show("please config: options.upload.url"),[2]):e.options.upload.file?[4,e.options.upload.file(r)]:[3,4];case 3:r=W.sent(),W.label=4;case 4:if(e.options.upload.validate&&(w=e.options.upload.validate(r),typeof w=="string"))return e.tip.show(w),[2];if(_=Cr(e),e.upload.range=(0,j.RN)(e),D=wo(e,r),D.length===0)return i&&(i.value=""),[2];for(L=new FormData,H=e.options.upload.extraData,z=0,X=Object.keys(H);z<X.length;z++)Z=X[z],L.append(Z,H[Z]);for(K=0,le=D.length;K<le;K++)L.append(e.options.upload.fieldName,D[K]);return ee=new XMLHttpRequest,ee.open("POST",e.options.upload.url),e.options.upload.token&&ee.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(ee.withCredentials=!0),Tr(e,ee),e.upload.isUploading=!0,_.setAttribute("contenteditable","false"),ee.onreadystatechange=function(){if(ee.readyState===XMLHttpRequest.DONE){if(e.upload.isUploading=!1,_.setAttribute("contenteditable","true"),ee.status>=200&&ee.status<300)if(e.options.upload.success)e.options.upload.success(_,ee.responseText);else{var ge=ee.responseText;e.options.upload.format&&(ge=e.options.upload.format(t,ee.responseText)),Eo(ge,e)}else e.options.upload.error?e.options.upload.error(ee.responseText):e.tip.show(ee.responseText);i&&(i.value=""),e.upload.element.style.display="none"}},ee.upload.onprogress=function(ge){if(ge.lengthComputable){var ae=ge.loaded/ge.total*100;e.upload.element.style.display="block";var be=e.upload.element;be.style.width=ae+"%"}},ee.send(L),[2]}})})},$n=function(e,t,i){var r,a=(0,g.pt)(t.startContainer);if(a||(a=e.wysiwyg.element),i&&i.inputType!=="formatItalic"&&i.inputType!=="deleteByDrag"&&i.inputType!=="insertFromDrop"&&i.inputType!=="formatBold"&&i.inputType!=="formatRemove"&&i.inputType!=="formatStrikeThrough"&&i.inputType!=="insertUnorderedList"&&i.inputType!=="insertOrderedList"&&i.inputType!=="formatOutdent"&&i.inputType!=="formatIndent"&&i.inputType!==""||!i){var l=xn(t.startContainer);l&&l.remove(),e.wysiwyg.element.querySelectorAll("wbr").forEach(function(ae){ae.remove()}),t.insertNode(document.createElement("wbr")),a.querySelectorAll("[style]").forEach(function(ae){ae.removeAttribute("style")}),a.querySelectorAll(".vditor-comment").forEach(function(ae){ae.textContent.trim()===""&&(ae.classList.remove("vditor-comment","vditor-comment--focus"),ae.removeAttribute("data-cmtids"))}),(r=a.previousElementSibling)===null||r===void 0||r.querySelectorAll(".vditor-comment").forEach(function(ae){ae.textContent.trim()===""&&(ae.classList.remove("vditor-comment","vditor-comment--focus"),ae.removeAttribute("data-cmtids"))});var w="";a.getAttribute("data-type")==="link-ref-defs-block"&&(a=e.wysiwyg.element);var _=a.isEqualNode(e.wysiwyg.element),D=(0,g.Th)(a,"data-type","footnotes-block");if(_)w=a.innerHTML;else{var L=(0,g.KR)(t.startContainer);if(L&&!D){var H=(0,O.f)(t.startContainer,"BLOCKQUOTE");H?a=(0,g.pt)(t.startContainer)||a:a=L}if(D&&(a=D),w=a.outerHTML,a.tagName==="UL"||a.tagName==="OL"){var z=a.previousElementSibling,X=a.nextElementSibling;z&&(z.tagName==="UL"||z.tagName==="OL")&&(w=z.outerHTML+w,z.remove()),X&&(X.tagName==="UL"||X.tagName==="OL")&&(w=w+X.outerHTML,X.remove()),w=w.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}a.innerText.startsWith("```")||(e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(ae){ae&&!a.isEqualNode(ae)&&(w+=ae.outerHTML,ae.remove())}),e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(ae){ae&&!a.isEqualNode(ae)&&(w+=ae.outerHTML,ae.remove())}))}if(w=w.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""),w==='<p data-block="0">```<wbr></p>'&&e.hint.recentLanguage&&(w='<p data-block="0">```<wbr></p>'.replace("```","```"+e.hint.recentLanguage)),I("SpinVditorDOM",w,"argument",e.options.debugger),w=e.lute.SpinVditorDOM(w),I("SpinVditorDOM",w,"result",e.options.debugger),_)a.innerHTML=w;else if(a.outerHTML=w,D){var Z=(0,g.Ab)(e.wysiwyg.element.querySelector("wbr"),"LI");if(Z){var K=e.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'.concat(Z.getAttribute("data-marker"),'"]'));K&&K.setAttribute("aria-label",Z.textContent.trim().substr(0,24))}}var le,ee=e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");ee.forEach(function(ae,be){be===0?le=ae:(le.insertAdjacentHTML("beforeend",ae.innerHTML),ae.remove())}),ee.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",ee[0]);var W,ge=e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");ge.forEach(function(ae,be){be===0?W=ae:(W.insertAdjacentHTML("beforeend",ae.innerHTML),ae.remove())}),ge.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",ge[0]),(0,j.ir)(e.wysiwyg.element,t),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(ae){ce(ae,e)}),i&&(i.inputType==="deleteContentBackward"||i.inputType==="deleteContentForward")&&e.options.comment.enable&&(e.wysiwyg.triggerRemoveComment(e),e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)))}ne(e),Ie(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},So=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Co=function(e,t,i,r){function a(l){return l instanceof i?l:new i(function(w){w(l)})}return new(i||(i=Promise))(function(l,w){function _(H){try{L(r.next(H))}catch(z){w(z)}}function D(H){try{L(r.throw(H))}catch(z){w(z)}}function L(H){H.done?l(H.value):a(H.value).then(_,D)}L((r=r.apply(e,t||[])).next())})},To=function(e,t){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(L){return function(H){return D([L,H])}}function D(L){if(r)throw new TypeError("Generator is already executing.");for(;w&&(w=0,L[0]&&(i=0)),i;)try{if(r=1,a&&(l=L[0]&2?a.return:L[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,L[1])).done)return l;switch(a=0,l&&(L=[L[0]&2,l.value]),L[0]){case 0:case 1:l=L;break;case 4:return i.label++,{value:L[1],done:!1};case 5:i.label++,a=L[1],L=[0];continue;case 7:L=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(L[0]===6||L[0]===2)){i=0;continue}if(L[0]===3&&(!l||L[1]>l[0]&&L[1]<l[3])){i.label=L[1];break}if(L[0]===6&&i.label<l[1]){i.label=l[1],l=L;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(L);break}l[2]&&i.ops.pop(),i.trys.pop();continue}L=t.call(e,i)}catch(H){L=[6,H],a=0}finally{r=l=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}},kr=function(e,t,i){if(e.keyCode===229&&e.code===""&&e.key==="Unidentified"&&t.currentMode!=="sv"){var r=(0,g.pt)(i);if(r&&r.textContent.trim()==="")return t[t.currentMode].composingLock=!0,!1}return!0},Mr=function(e,t,i){if(!(i.key==="Enter"||i.key==="Tab"||i.key==="Backspace"||i.key.indexOf("Arrow")>-1||(0,d._0)(i)||i.key==="Escape"||i.shiftKey||i.altKey)){var r=(0,g._Y)(e.startContainer,"P")||(0,g._Y)(e.startContainer,"LI");if(r&&(0,j.ED)(r,t[t.currentMode].element,e).start===0){r.nodeValue&&(r.nodeValue=r.nodeValue.replace(/\u2006/g,""));var a=document.createTextNode(h.Y.ZWSP);e.insertNode(a),e.setStartAfter(a)}}},xr=function(e,t){if(t==="ArrowDown"||t==="ArrowUp"){var i=(0,g.Th)(e.startContainer,"data-type","math-inline")||(0,g.Th)(e.startContainer,"data-type","html-entity")||(0,g.Th)(e.startContainer,"data-type","html-inline");i&&(t==="ArrowDown"&&e.setStartAfter(i.parentElement),t==="ArrowUp"&&e.setStartBefore(i.parentElement))}},Dn=function(e,t){var i=(0,j.RN)(e),r=(0,g.pt)(i.startContainer);r&&(r.insertAdjacentHTML(t,'<p data-block="0">'.concat(h.Y.ZWSP,`<wbr>
</p>`)),(0,j.ir)(e[e.currentMode].element,i),fn(e),xe(e))},ko=function(e){var t=(0,g._Y)(e,"TABLE");return t&&t.rows[0].cells[0].isSameNode(e)?t:!1},Mo=function(e){var t=(0,g._Y)(e,"TABLE");return t&&t.lastElementChild.lastElementChild.lastElementChild.isSameNode(e)?t:!1},_r=function(e,t,i){i===void 0&&(i=!0);var r=e.previousElementSibling;return r||(e.parentElement.previousElementSibling?r=e.parentElement.previousElementSibling.lastElementChild:e.parentElement.parentElement.tagName==="TBODY"&&e.parentElement.parentElement.previousElementSibling?r=e.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:r=null),r&&(t.selectNodeContents(r),i||t.collapse(!1),(0,j.jl)(t)),r},On=function(e,t,i,r,a){var l=(0,j.ED)(r,e[e.currentMode].element,i);if(t.key==="ArrowDown"&&r.textContent.trimRight().substr(l.start).indexOf(`
`)===-1||t.key==="ArrowRight"&&l.start>=r.textContent.trimRight().length){var w=a.nextElementSibling;return!w||w&&(w.tagName==="TABLE"||w.getAttribute("data-type"))?(a.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(h.Y.ZWSP,"<wbr></p>")),(0,j.ir)(e[e.currentMode].element,i)):(i.selectNodeContents(w),i.collapse(!0),(0,j.jl)(i)),t.preventDefault(),!0}return!1},hn=function(e,t,i,r,a){var l=(0,j.ED)(r,e[e.currentMode].element,i);if(t.key==="ArrowUp"&&r.textContent.substr(0,l.start).indexOf(`
`)===-1||(t.key==="ArrowLeft"||t.key==="Backspace"&&i.toString()==="")&&l.start===0){var w=a.previousElementSibling;return!w||w&&(w.tagName==="TABLE"||w.getAttribute("data-type"))?(a.insertAdjacentHTML("beforebegin",'<p data-block="0">'.concat(h.Y.ZWSP,"<wbr></p>")),(0,j.ir)(e[e.currentMode].element,i)):(i.selectNodeContents(w),i.collapse(!1),(0,j.jl)(i)),t.preventDefault(),!0}return!1},qn=function(e,t,i,r){r===void 0&&(r=!0);var a=(0,g._Y)(t.startContainer,"LI");if(e[e.currentMode].element.querySelectorAll("wbr").forEach(function(H){H.remove()}),t.insertNode(document.createElement("wbr")),r&&a){for(var l="",w=0;w<a.parentElement.childElementCount;w++){var _=a.parentElement.children[w].querySelector("input");_&&_.remove(),l+='<p data-block="0">'.concat(a.parentElement.children[w].innerHTML.trimLeft(),"</p>")}a.parentElement.insertAdjacentHTML("beforebegin",l),a.parentElement.remove()}else if(a)if(i==="check")a.parentElement.querySelectorAll("li").forEach(function(H){H.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'.concat(H.textContent.indexOf(" ")===0?"":" ")),H.classList.add("vditor-task")});else{a.querySelector("input")&&a.parentElement.querySelectorAll("li").forEach(function(H){H.querySelector("input").remove(),H.classList.remove("vditor-task")});var L=void 0;i==="list"?(L=document.createElement("ul"),L.setAttribute("data-marker","*")):(L=document.createElement("ol"),L.setAttribute("data-marker","1.")),L.setAttribute("data-block","0"),L.setAttribute("data-tight",a.parentElement.getAttribute("data-tight")),L.innerHTML=a.parentElement.innerHTML,a.parentElement.parentNode.replaceChild(L,a.parentElement)}else{var D=(0,g.Th)(t.startContainer,"data-block","0");D||(e[e.currentMode].element.querySelector("wbr").remove(),D=e[e.currentMode].element.querySelector("p"),D.innerHTML="<wbr>"),i==="check"?(D.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '.concat(D.innerHTML,"</li></ul>")),D.remove()):i==="list"?(D.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'.concat(D.innerHTML,"</li></ul>")),D.remove()):i==="ordered-list"&&(D.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'.concat(D.innerHTML,"</li></ol>")),D.remove())}},Lr=function(e,t,i){var r=t.previousElementSibling;if(t&&r){var a=[t];Array.from(i.cloneContents().children).forEach(function(D,L){D.nodeType!==3&&t&&D.textContent.trim()!==""&&t.getAttribute("data-node-id")===D.getAttribute("data-node-id")&&(L!==0&&a.push(t),t=t.nextElementSibling)}),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(D){D.remove()}),i.insertNode(document.createElement("wbr"));var l=r.parentElement,w="";a.forEach(function(D){var L=D.getAttribute("data-marker");L.length!==1&&(L="1".concat(L.slice(-1))),w+='<li data-node-id="'.concat(D.getAttribute("data-node-id"),'" data-marker="').concat(L,'">').concat(D.innerHTML,"</li>"),D.remove()}),r.insertAdjacentHTML("beforeend","<".concat(l.tagName,' data-block="0">').concat(w,"</").concat(l.tagName,">")),e.currentMode==="wysiwyg"?l.outerHTML=e.lute.SpinVditorDOM(l.outerHTML):l.outerHTML=e.lute.SpinVditorIRDOM(l.outerHTML),(0,j.ir)(e[e.currentMode].element,i);var _=(0,g.KR)(i.startContainer);_&&_.querySelectorAll(".vditor-".concat(e.currentMode,"__preview[data-render='2']")).forEach(function(D){ce(D,e),e.currentMode==="wysiwyg"&&D.previousElementSibling.setAttribute("style","display:none")}),xe(e),fn(e)}else e[e.currentMode].element.focus()},Pi=function(e,t,i,r){var a=(0,g._Y)(t.parentElement,"LI");if(a){e[e.currentMode].element.querySelectorAll("wbr").forEach(function(z){z.remove()}),i.insertNode(document.createElement("wbr"));var l=t.parentElement,w=l.cloneNode(),_=[t];Array.from(i.cloneContents().children).forEach(function(z,X){z.nodeType!==3&&t&&z.textContent.trim()!==""&&t.getAttribute("data-node-id")===z.getAttribute("data-node-id")&&(X!==0&&_.push(t),t=t.nextElementSibling)});var D=!1,L="";l.querySelectorAll("li").forEach(function(z){D&&(L+=z.outerHTML,!z.nextElementSibling&&!z.previousElementSibling?z.parentElement.remove():z.remove()),z.isSameNode(_[_.length-1])&&(D=!0)}),_.reverse().forEach(function(z){a.insertAdjacentElement("afterend",z)}),L&&(w.innerHTML=L,_[0].insertAdjacentElement("beforeend",w)),e.currentMode==="wysiwyg"?r.outerHTML=e.lute.SpinVditorDOM(r.outerHTML):r.outerHTML=e.lute.SpinVditorIRDOM(r.outerHTML),(0,j.ir)(e[e.currentMode].element,i);var H=(0,g.KR)(i.startContainer);H&&H.querySelectorAll(".vditor-".concat(e.currentMode,"__preview[data-render='2']")).forEach(function(z){ce(z,e),e.currentMode==="wysiwyg"&&z.previousElementSibling.setAttribute("style","display:none")}),xe(e),fn(e)}else e[e.currentMode].element.focus()},Wn=function(e,t){for(var i=getSelection().getRangeAt(0).startContainer.parentElement,r=e.rows[0].cells.length,a=e.rows.length,l=0,w=0;w<a;w++)for(var _=0;_<r;_++)if(e.rows[w].cells[_].isSameNode(i)){l=_;break}for(var D=0;D<a;D++)e.rows[D].cells[l].setAttribute("align",t)},Ri=function(e){var t=e.trimRight().split(`
`).pop();return t===""?!1:(t.replace(/ |-/g,"")===""||t.replace(/ |_/g,"")===""||t.replace(/ |\*/g,"")==="")&&t.replace(/ /g,"").length>2?!(t.indexOf("-")>-1&&t.trimLeft().indexOf(" ")===-1&&e.trimRight().split(`
`).length>1||t.indexOf("    ")===0||t.indexOf("	")===0):!1},Hi=function(e){var t=e.trimRight().split(`
`);return e=t.pop(),e.indexOf("    ")===0||e.indexOf("	")===0||(e=e.trimLeft(),e===""||t.length===0)?!1:e.replace(/-/g,"")===""||e.replace(/=/g,"")===""},xe=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),e.currentMode==="wysiwyg"?Ie(e,t):e.currentMode==="ir"?Rt(e,t):e.currentMode==="sv"&&Ge(e,t)},Ar=function(e,t,i,r){var a,l=e.startContainer,w=(0,g._Y)(l,"LI");if(w){if(!(0,d._0)(r)&&!r.altKey&&r.key==="Enter"&&!r.shiftKey&&i&&w.contains(i)&&i.nextElementSibling)return w&&!w.textContent.endsWith(`
`)&&w.insertAdjacentText("beforeend",`
`),e.insertNode(document.createTextNode(`

`)),e.collapse(!1),xe(t),r.preventDefault(),!0;if(!(0,d._0)(r)&&!r.shiftKey&&!r.altKey&&r.key==="Backspace"&&!w.previousElementSibling&&e.toString()===""&&(0,j.ED)(w,t[t.currentMode].element,e).start===0)return w.nextElementSibling?(w.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(w.innerHTML,"</p>")),w.remove()):w.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(w.innerHTML,"</p>"),(0,j.ir)(t[t.currentMode].element,e),xe(t),r.preventDefault(),!0;if(!(0,d._0)(r)&&!r.shiftKey&&!r.altKey&&r.key==="Backspace"&&w.textContent.trim().replace(h.Y.ZWSP,"")===""&&e.toString()===""&&((a=w.previousElementSibling)===null||a===void 0?void 0:a.tagName)==="LI")return w.previousElementSibling.insertAdjacentText("beforeend",`

`),e.selectNodeContents(w.previousElementSibling),e.collapse(!1),w.remove(),(0,j.ir)(t[t.currentMode].element,e),xe(t),r.preventDefault(),!0;if(!(0,d._0)(r)&&!r.altKey&&r.key==="Tab"){var _=!1;if((e.startOffset===0&&(l.nodeType===3&&!l.previousSibling||l.nodeType!==3&&l.nodeName==="LI")||w.classList.contains("vditor-task")&&e.startOffset===1&&l.previousSibling.nodeType!==3&&l.previousSibling.tagName==="INPUT")&&(_=!0),_||e.toString()!=="")return r.shiftKey?Pi(t,w,e,w.parentElement):Lr(t,w,e),r.preventDefault(),!0}}return!1},Ii=function(e,t,i){if(e.options.tab&&i.key==="Tab")return i.shiftKey||(t.toString()===""?(t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1)):(t.extractContents(),t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1))),(0,j.jl)(t),xe(e),i.preventDefault(),!0},Dr=function(e,t,i,r){if(i){if(!(0,d._0)(e)&&!e.altKey&&e.key==="Enter"){var a=String.raw(Vr||(Vr=So(["",""],["",""])),i.textContent).replace(/\\\|/g,"").trim(),l=a.split("|");if(a.startsWith("|")&&a.endsWith("|")&&l.length>3){var w=l.map(function(){return"---"}).join("|");return w=i.textContent+`
`+w.substring(3,w.length-3)+`
|<wbr>`,i.outerHTML=t.lute.SpinVditorDOM(w),(0,j.ir)(t[t.currentMode].element,r),xe(t),We(t),e.preventDefault(),!0}if(Ri(i.innerHTML)&&i.previousElementSibling){var _="",D=i.innerHTML.trimRight().split(`
`);return D.length>1&&(D.pop(),_='<p data-block="0">'.concat(D.join(`
`),"</p>")),i.insertAdjacentHTML("afterend","".concat(_,`<hr data-block="0"><p data-block="0"><wbr>
</p>`)),i.remove(),(0,j.ir)(t[t.currentMode].element,r),xe(t),We(t),e.preventDefault(),!0}if(Hi(i.innerHTML))return t.currentMode==="wysiwyg"?i.outerHTML=t.lute.SpinVditorDOM(i.innerHTML+`<p data-block="0"><wbr>
</p>`):i.outerHTML=t.lute.SpinVditorIRDOM(i.innerHTML+`<p data-block="0"><wbr>
</p>`),(0,j.ir)(t[t.currentMode].element,r),xe(t),We(t),e.preventDefault(),!0}if(r.collapsed&&i.previousElementSibling&&e.key==="Backspace"&&!(0,d._0)(e)&&!e.altKey&&!e.shiftKey&&i.textContent.trimRight().split(`
`).length>1&&(0,j.ED)(i,t[t.currentMode].element,r).start===0){var L=(0,g.Rp)(i.previousElementSibling);return L.textContent.endsWith(`
`)||(L.textContent=L.textContent+`
`),L.parentElement.insertAdjacentHTML("beforeend","<wbr>".concat(i.innerHTML)),i.remove(),(0,j.ir)(t[t.currentMode].element,r),!1}return!1}},Or=function(e,t,i){for(var r="",a=0;a<i.parentElement.childElementCount;a++)r+='<td align="'.concat(i.parentElement.children[a].getAttribute("align"),'"> </td>');i.tagName==="TH"?i.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>".concat(r,"</tr></tbody>")):i.parentElement.insertAdjacentHTML("afterend","<tr>".concat(r,"</tr>")),xe(e)},Pr=function(e,t,i){for(var r="",a=0;a<i.parentElement.childElementCount;a++)i.tagName==="TH"?r+='<th align="'.concat(i.parentElement.children[a].getAttribute("align"),'"> </th>'):r+='<td align="'.concat(i.parentElement.children[a].getAttribute("align"),'"> </td>');if(i.tagName==="TH"){i.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>".concat(r,"</tr></thead>")),t.insertNode(document.createElement("wbr"));var l=i.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>");i.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",l),i.parentElement.parentElement.remove(),(0,j.ir)(e.ir.element,t)}else i.parentElement.insertAdjacentHTML("beforebegin","<tr>".concat(r,"</tr>"));xe(e)},Yn=function(e,t,i,r){r===void 0&&(r="afterend");for(var a=0,l=i.previousElementSibling;l;)a++,l=l.previousElementSibling;for(var w=0;w<t.rows.length;w++)w===0?t.rows[w].cells[a].insertAdjacentHTML(r,"<th> </th>"):t.rows[w].cells[a].insertAdjacentHTML(r,"<td> </td>");xe(e)},Rr=function(e,t,i){if(i.tagName==="TD"){var r=i.parentElement.parentElement;i.parentElement.previousElementSibling?t.selectNodeContents(i.parentElement.previousElementSibling.lastElementChild):t.selectNodeContents(r.previousElementSibling.lastElementChild.lastElementChild),r.childElementCount===1?r.remove():i.parentElement.remove(),t.collapse(!1),(0,j.jl)(t),xe(e)}},Hr=function(e,t,i,r){for(var a=0,l=r.previousElementSibling;l;)a++,l=l.previousElementSibling;(r.previousElementSibling||r.nextElementSibling)&&(t.selectNodeContents(r.previousElementSibling||r.nextElementSibling),t.collapse(!0));for(var w=0;w<i.rows.length;w++){var _=i.rows[w].cells;if(_.length===1){i.remove(),fn(e);break}_[a].remove()}(0,j.jl)(t),xe(e)},Ir=function(e,t,i){var r=i.startContainer,a=(0,g._Y)(r,"TD")||(0,g._Y)(r,"TH");if(a){if(!(0,d._0)(t)&&!t.altKey&&t.key==="Enter"){(!a.lastElementChild||a.lastElementChild&&(!a.lastElementChild.isSameNode(a.lastChild)||a.lastElementChild.tagName!=="BR"))&&a.insertAdjacentHTML("beforeend","<br>");var l=document.createElement("br");return i.insertNode(l),i.setStartAfter(l),xe(e),We(e),t.preventDefault(),!0}if(t.key==="Tab"){if(t.shiftKey)return _r(a,i),t.preventDefault(),!0;var w=a.nextElementSibling;return w||(a.parentElement.nextElementSibling?w=a.parentElement.nextElementSibling.firstElementChild:a.parentElement.parentElement.tagName==="THEAD"&&a.parentElement.parentElement.nextElementSibling?w=a.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:w=null),w&&(i.selectNodeContents(w),(0,j.jl)(i)),t.preventDefault(),!0}var _=a.parentElement.parentElement.parentElement;if(t.key==="ArrowUp"){if(t.preventDefault(),a.tagName==="TH")return _.previousElementSibling?(i.selectNodeContents(_.previousElementSibling),i.collapse(!1),(0,j.jl)(i)):Dn(e,"beforebegin"),!0;for(var D=0,L=a.parentElement;D<L.cells.length&&!L.cells[D].isSameNode(a);D++);var H=L.previousElementSibling;return H||(H=L.parentElement.previousElementSibling.firstChild),i.selectNodeContents(H.cells[D]),i.collapse(!1),(0,j.jl)(i),!0}if(t.key==="ArrowDown"){t.preventDefault();var L=a.parentElement;if(!L.nextElementSibling&&a.tagName==="TD")return _.nextElementSibling?(i.selectNodeContents(_.nextElementSibling),i.collapse(!0),(0,j.jl)(i)):Dn(e,"afterend"),!0;for(var D=0;D<L.cells.length&&!L.cells[D].isSameNode(a);D++);var w=L.nextElementSibling;return w||(w=L.parentElement.nextElementSibling.firstChild),i.selectNodeContents(w.cells[D]),i.collapse(!0),(0,j.jl)(i),!0}if(e.currentMode==="wysiwyg"&&!(0,d._0)(t)&&t.key==="Enter"&&!t.shiftKey&&t.altKey){var z=e.wysiwyg.popover.querySelector(".vditor-input");return z.focus(),z.select(),t.preventDefault(),!0}if(!(0,d._0)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Backspace"&&i.startOffset===0&&i.toString()===""){var X=_r(a,i,!1);return!X&&_&&(_.textContent.trim()===""?(_.outerHTML=`<p data-block="0"><wbr>
</p>`,(0,j.ir)(e[e.currentMode].element,i)):(i.setStartBefore(_),i.collapse(!0)),xe(e)),t.preventDefault(),!0}if(N("⇧⌘F",t))return Pr(e,i,a),t.preventDefault(),!0;if(N("⌘=",t))return Or(e,i,a),t.preventDefault(),!0;if(N("⇧⌘G",t))return Yn(e,_,a,"beforebegin"),t.preventDefault(),!0;if(N("⇧⌘=",t))return Yn(e,_,a),t.preventDefault(),!0;if(N("⌘-",t))return Rr(e,i,a),t.preventDefault(),!0;if(N("⇧⌘-",t))return Hr(e,i,_,a),t.preventDefault(),!0;if(N("⇧⌘L",t)){if(e.currentMode==="ir")return Wn(_,"left"),xe(e),t.preventDefault(),!0;var Z=e.wysiwyg.popover.querySelector('[data-type="left"]');if(Z)return Z.click(),t.preventDefault(),!0}if(N("⇧⌘C",t)){if(e.currentMode==="ir")return Wn(_,"center"),xe(e),t.preventDefault(),!0;var Z=e.wysiwyg.popover.querySelector('[data-type="center"]');if(Z)return Z.click(),t.preventDefault(),!0}if(N("⇧⌘R",t)){if(e.currentMode==="ir")return Wn(_,"right"),xe(e),t.preventDefault(),!0;var Z=e.wysiwyg.popover.querySelector('[data-type="right"]');if(Z)return Z.click(),t.preventDefault(),!0}}return!1},Nr=function(e,t,i,r){if(i.tagName==="PRE"&&N("⌘A",t))return r.selectNodeContents(i.firstElementChild),t.preventDefault(),!0;if(e.options.tab&&t.key==="Tab"&&!t.shiftKey&&r.toString()==="")return r.insertNode(document.createTextNode(e.options.tab)),r.collapse(!1),xe(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!(0,d._0)(t)&&!t.shiftKey&&!t.altKey){var a=(0,j.ED)(i,e[e.currentMode].element,r);if((a.start===0||a.start===1&&i.innerText===`
`)&&r.toString()==="")return i.parentElement.outerHTML='<p data-block="0"><wbr>'.concat(i.firstElementChild.innerHTML,"</p>"),(0,j.ir)(e[e.currentMode].element,r),xe(e),t.preventDefault(),!0}return!(0,d._0)(t)&&!t.altKey&&t.key==="Enter"?(i.firstElementChild.textContent.endsWith(`
`)||i.firstElementChild.insertAdjacentText("beforeend",`
`),r.extractContents(),r.insertNode(document.createTextNode(`
`)),r.collapse(!1),(0,j.jl)(r),(0,d.gm)()||(e.currentMode==="wysiwyg"?$n(e,r):V(e,r)),We(e),t.preventDefault(),!0):!1},jr=function(e,t,i,r){var a=t.startContainer,l=(0,g._Y)(a,"BLOCKQUOTE");if(l&&t.toString()===""){if(i.key==="Backspace"&&!(0,d._0)(i)&&!i.shiftKey&&!i.altKey&&(0,j.ED)(l,e[e.currentMode].element,t).start===0)return t.insertNode(document.createElement("wbr")),l.outerHTML=l.innerHTML,(0,j.ir)(e[e.currentMode].element,t),xe(e),i.preventDefault(),!0;if(r&&i.key==="Enter"&&!(0,d._0)(i)&&!i.shiftKey&&!i.altKey&&r.parentElement.tagName==="BLOCKQUOTE"){var w=!1;if(r.innerHTML.replace(h.Y.ZWSP,"")===`
`||r.innerHTML.replace(h.Y.ZWSP,"")===""?(w=!0,r.remove()):r.innerHTML.endsWith(`

`)&&(0,j.ED)(r,e[e.currentMode].element,t).start===r.textContent.length-1&&(r.innerHTML=r.innerHTML.substr(0,r.innerHTML.length-2),w=!0),w)return l.insertAdjacentHTML("afterend",'<p data-block="0">'.concat(h.Y.ZWSP,`<wbr>
</p>`)),(0,j.ir)(e[e.currentMode].element,t),xe(e),i.preventDefault(),!0}var _=(0,g.pt)(a);if(e.currentMode==="wysiwyg"&&_&&N("⇧⌘;",i))return t.insertNode(document.createElement("wbr")),_.outerHTML='<blockquote data-block="0">'.concat(_.outerHTML,"</blockquote>"),(0,j.ir)(e.wysiwyg.element,t),Ie(e),i.preventDefault(),!0;if(On(e,i,t,l,l)||hn(e,i,t,l,l))return!0}return!1},Br=function(e,t,i){var r=t.startContainer,a=(0,g._Y)(r,"li");if(a&&a.classList.contains("vditor-task")){if(N("⇧⌘J",i)){var l=a.firstElementChild;return l.checked?l.removeAttribute("checked"):l.setAttribute("checked","checked"),xe(e),i.preventDefault(),!0}if(i.key==="Backspace"&&!(0,d._0)(i)&&!i.shiftKey&&!i.altKey&&t.toString()===""&&t.startOffset===1&&(r.nodeType===3&&r.previousSibling&&r.previousSibling.tagName==="INPUT"||r.nodeType!==3)){var w=a.previousElementSibling;if(a.querySelector("input").remove(),w){var _=(0,g.Rp)(w);_.parentElement.insertAdjacentHTML("beforeend","<wbr>"+a.innerHTML.trim()),a.remove()}else a.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'.concat(a.innerHTML.trim()||`
`,"</p>")),a.nextElementSibling?a.remove():a.parentElement.remove();return(0,j.ir)(e[e.currentMode].element,t),xe(e),i.preventDefault(),!0}if(i.key==="Enter"&&!(0,d._0)(i)&&!i.shiftKey&&!i.altKey){if(a.textContent.trim()==="")if((0,g.KJ)(a.parentElement,"vditor-task")){var D=(0,g.KR)(r);D&&Pi(e,a,t,D)}else if(a.nextElementSibling){var L="",H="",z=!1;Array.from(a.parentElement.children).forEach(function(le){a.isSameNode(le)?z=!0:z?L+=le.outerHTML:H+=le.outerHTML});var X=a.parentElement.tagName,Z=a.parentElement.tagName==="OL"?"":' data-marker="'.concat(a.parentElement.getAttribute("data-marker"),'"'),K="";H&&(K=a.parentElement.tagName==="UL"?"":' start="1"',H="<".concat(X,' data-tight="true"').concat(Z,' data-block="0">').concat(H,"</").concat(X,">")),a.parentElement.outerHTML="".concat(H,`<p data-block="0"><wbr>
</p><`).concat(X,`
 data-tight="true"`).concat(Z,' data-block="0"').concat(K,">").concat(L,"</").concat(X,">")}else a.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),a.parentElement.querySelectorAll("li").length===1?a.parentElement.remove():a.remove();else r.nodeType!==3&&t.startOffset===0&&r.firstChild.tagName==="INPUT"?t.setStart(r.childNodes[1],1):(t.setEndAfter(a.lastChild),a.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'.concat(a.getAttribute("data-marker"),'"><input type="checkbox"> <wbr></li>')),document.querySelector("wbr").after(t.extractContents()));return(0,j.ir)(e[e.currentMode].element,t),xe(e),We(e),i.preventDefault(),!0}}return!1},zr=function(e,t,i,r){if(t.startContainer.nodeType!==3){var a=t.startContainer.children[t.startOffset];if(a&&a.tagName==="HR")return t.selectNodeContents(a.previousElementSibling),t.collapse(!1),i.preventDefault(),!0}if(r){var l=r.previousElementSibling;if(l&&(0,j.ED)(r,e[e.currentMode].element,t).start===0&&((0,d.gm)()&&l.tagName==="HR"||l.tagName==="TABLE")){if(l.tagName==="TABLE"){var w=l.lastElementChild.lastElementChild.lastElementChild;w.innerHTML=w.innerHTML.trimLeft()+"<wbr>"+r.textContent.trim(),r.remove()}else l.remove();return(0,j.ir)(e[e.currentMode].element,t),xe(e),i.preventDefault(),!0}}return!1},Fr=function(e){(0,d.gm)()&&e.startContainer.nodeType!==3&&e.startContainer.tagName==="HR"&&e.setStartBefore(e.startContainer)},Ur=function(e,t,i){var r,a;if(!(0,d.gm)())return!1;if(e.key==="ArrowUp"&&t&&((r=t.previousElementSibling)===null||r===void 0?void 0:r.tagName)==="TABLE"){var l=t.previousElementSibling;return i.selectNodeContents(l.rows[l.rows.length-1].lastElementChild),i.collapse(!1),e.preventDefault(),!0}return e.key==="ArrowDown"&&t&&((a=t.nextElementSibling)===null||a===void 0?void 0:a.tagName)==="TABLE"?(i.selectNodeContents(t.nextElementSibling.rows[0].cells[0]),i.collapse(!0),e.preventDefault(),!0):!1},Kn=function(e,t,i){return Co(void 0,void 0,void 0,function(){var r,a,l,w,_,D,L,H,z,X,Z,K,le,W,ee,W,ge;return To(this,function(ae){switch(ae.label){case 0:return e[e.currentMode].element.getAttribute("contenteditable")!=="true"?[2]:(t.stopPropagation(),t.preventDefault(),"clipboardData"in t?(r=t.clipboardData.getData("text/html"),a=t.clipboardData.getData("text/plain"),l=t.clipboardData.files):(r=t.dataTransfer.getData("text/html"),a=t.dataTransfer.getData("text/plain"),t.dataTransfer.types.includes("Files")&&(l=t.dataTransfer.items)),w={},_=function(be,je){if(!je)return["",Lute.WalkContinue];if(e.options.upload.renderLinkDest)return e.options.upload.renderLinkDest(e,be,je);var He=be.TokensStr();if(be.__internal_object__.Parent.Type===34&&He&&He.indexOf("file://")===-1&&e.options.upload.linkToImgUrl){var Be=new XMLHttpRequest;Be.open("POST",e.options.upload.linkToImgUrl),e.options.upload.token&&Be.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(Be.withCredentials=!0),Tr(e,Be),Be.setRequestHeader("Content-Type","application/json; charset=utf-8"),Be.onreadystatechange=function(){if(Be.readyState===XMLHttpRequest.DONE){if(Be.status===200){var lt=Be.responseText;e.options.upload.linkToImgFormat&&(lt=e.options.upload.linkToImgFormat(Be.responseText));var tt=JSON.parse(lt);if(tt.code!==0){e.tip.show(tt.msg);return}var ct=tt.data.originalURL;if(e.currentMode==="sv")e.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(Ye){Ye.textContent===ct&&(Ye.textContent=tt.data.url)});else{var Te=e[e.currentMode].element.querySelector('img[src="'.concat(ct,'"]'));Te.src=tt.data.url,e.currentMode==="ir"&&(Te.previousElementSibling.previousElementSibling.innerHTML=tt.data.url)}xe(e)}else e.tip.show(Be.responseText);e.options.upload.linkToImgCallback&&e.options.upload.linkToImgCallback(Be.responseText)}},Be.send(JSON.stringify({url:He}))}return e.currentMode==="ir"?['<span class="vditor-ir__marker vditor-ir__marker--link">'.concat(Lute.EscapeHTMLStr(He),"</span>"),Lute.WalkContinue]:e.currentMode==="wysiwyg"?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'.concat(Lute.EscapeHTMLStr(He),"</span>"),Lute.WalkContinue]},(r.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<a href="'.concat(a,'">').concat(a,"</a>")||r.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/ig,"").trim()==='<!--StartFragment--><a href="'.concat(a,'">').concat(a,"</a><!--EndFragment-->"))&&(r=""),D=new DOMParser().parseFromString(r,"text/html"),D.body&&(r=D.body.innerHTML),r=Lute.Sanitize(r),e.wysiwyg.getComments(e),L=e[e.currentMode].element.scrollHeight,H=we(r,a,e.currentMode),z=e.currentMode==="sv"?(0,g.Th)(t.target,"data-type","code-block"):(0,g._Y)(t.target,"CODE"),z?(e.currentMode==="sv"?document.execCommand("insertHTML",!1,a.replace(/&/g,"&amp;").replace(/</g,"&lt;")):(X=(0,j.ED)(t.target,e[e.currentMode].element),z.parentElement.tagName!=="PRE"&&(a+=h.Y.ZWSP),z.textContent=z.textContent.substring(0,X.start)+a+z.textContent.substring(X.end),(0,j.Fm)(X.start+a.length,X.start+a.length,z.parentElement),!((ge=z.parentElement)===null||ge===void 0)&&ge.nextElementSibling.classList.contains("vditor-".concat(e.currentMode,"__preview"))&&(z.parentElement.nextElementSibling.innerHTML=z.outerHTML,ce(z.parentElement.nextElementSibling,e))),[3,8]):[3,1]);case 1:return H?(i.pasteCode(H),[3,8]):[3,2];case 2:return r.trim()===""?[3,3]:(Z=document.createElement("div"),Z.innerHTML=r,Z.querySelectorAll("[style]").forEach(function(be){be.removeAttribute("style")}),Z.querySelectorAll(".vditor-copy").forEach(function(be){be.remove()}),e.currentMode==="ir"?(w.HTML2VditorIRDOM={renderLinkDest:_},e.lute.SetJSRenderers({renderers:w}),(0,j.Z2)(e.lute.HTML2VditorIRDOM(Z.innerHTML),e)):e.currentMode==="wysiwyg"?(w.HTML2VditorDOM={renderLinkDest:_},e.lute.SetJSRenderers({renderers:w}),(0,j.Z2)(e.lute.HTML2VditorDOM(Z.innerHTML),e)):(w.Md2VditorSVDOM={renderLinkDest:_},e.lute.SetJSRenderers({renderers:w}),Di(e,e.lute.HTML2Md(Z.innerHTML).trimRight())),e.outline.render(e),[3,8]);case 3:return l.length>0?e.options.upload.url||e.options.upload.handler?[4,Oi(e,l)]:[3,5]:[3,7];case 4:return ae.sent(),[3,6];case 5:K=new FileReader,"clipboardData"in t?(l=t.clipboardData.files,le=l[0]):t.dataTransfer.types.includes("Files")&&(l=t.dataTransfer.items,le=l[0].getAsFile()),le&&le.type.startsWith("image")&&(K.readAsDataURL(le),K.onload=function(){var be="";e.currentMode==="wysiwyg"?be+='<img alt="'.concat(le.name,'" src="').concat(K.result.toString(),`">
`):be+="![".concat(le.name,"](").concat(K.result.toString(),`)
`),document.execCommand("insertHTML",!1,be)}),ae.label=6;case 6:return[3,8];case 7:a.trim()!==""&&l.length===0&&(W=(0,j.RN)(e),W.toString()!==""&&e.lute.IsValidLinkDest(a)&&(a="[".concat(W.toString(),"](").concat(a,")")),e.currentMode==="ir"?(w.Md2VditorIRDOM={renderLinkDest:_},e.lute.SetJSRenderers({renderers:w}),(0,j.Z2)(e.lute.Md2VditorIRDOM(a),e)):e.currentMode==="wysiwyg"?(w.Md2VditorDOM={renderLinkDest:_},e.lute.SetJSRenderers({renderers:w}),(0,j.Z2)(e.lute.Md2VditorDOM(a),e)):(w.Md2VditorSVDOM={renderLinkDest:_},e.lute.SetJSRenderers({renderers:w}),Di(e,a)),e.outline.render(e)),ae.label=8;case 8:return e.currentMode!=="sv"&&(ee=(0,g.pt)((0,j.RN)(e).startContainer),ee&&(W=(0,j.RN)(e),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(be){be.remove()}),W.insertNode(document.createElement("wbr")),e.currentMode==="wysiwyg"?ee.outerHTML=e.lute.SpinVditorDOM(ee.outerHTML):ee.outerHTML=e.lute.SpinVditorIRDOM(ee.outerHTML),(0,j.ir)(e[e.currentMode].element,W)),e[e.currentMode].element.querySelectorAll(".vditor-".concat(e.currentMode,"__preview[data-render='2']")).forEach(function(be){ce(be,e)})),e.wysiwyg.triggerRemoveComment(e),xe(e),e[e.currentMode].element.scrollHeight-L>Math.min(e[e.currentMode].element.clientHeight,window.innerHeight)/2&&We(e),[2]}})})},Vr,$r=function(e){var t,i;e.hint.render(e);var r=(0,j.RN)(e).startContainer,a=(0,g.Th)(r,"data-type","code-block-info");if(a)if(a.textContent.replace(h.Y.ZWSP,"")===""&&e.hint.recentLanguage){a.textContent=h.Y.ZWSP+e.hint.recentLanguage;var l=(0,j.RN)(e);l.selectNodeContents(a)}else{var w=[],_=a.textContent.substring(0,(0,j.ED)(a,e.ir.element).start).replace(h.Y.ZWSP,"");(e.options.preview.hljs.langs||h.Y.ALIAS_CODE_LANGUAGES.concat(((i=(t=window.hljs)===null||t===void 0?void 0:t.listLanguages())!==null&&i!==void 0?i:[]).sort())).forEach(function(D){D.indexOf(_.toLowerCase())>-1&&w.push({html:D,value:D})}),e.hint.genHTML(w,_,e)}},Rt=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&$r(e),clearTimeout(e.ir.processTimeoutId),e.ir.processTimeoutId=window.setTimeout(function(){if(!e.ir.composingLock){var i=C(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(i),e.options.counter.enable&&e.counter.render(e,i),e.options.cache.enable&&(0,d.D)()&&(localStorage.setItem(e.options.cache.id,i),e.options.cache.after&&e.options.cache.after(i)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},Pn=function(e,t){var i=(0,j.RN)(e),r=(0,g.pt)(i.startContainer)||i.startContainer;if(r){var a=r.querySelector(".vditor-ir__marker--heading");a?a.innerHTML=t:(r.insertAdjacentText("afterbegin",t),i.selectNodeContents(r),i.collapse(!1)),V(e,i.cloneRange()),Pt(e)}},Gn=function(e,t,i){var r=(0,g.Th)(e.startContainer,"data-type",i);if(r){r.firstElementChild.remove(),r.lastElementChild.remove(),e.insertNode(document.createElement("wbr"));var a=document.createElement("div");a.innerHTML=t.lute.SpinVditorIRDOM(r.outerHTML),r.outerHTML=a.firstElementChild.innerHTML.trim()}},xo=function(e,t,i,r){var a=(0,j.RN)(e),l=t.getAttribute("data-type"),w=a.startContainer;w.nodeType===3&&(w=w.parentElement);var _=!0;if(t.classList.contains("vditor-menu--current"))if(l==="quote"){var D=(0,g._Y)(w,"BLOCKQUOTE");D&&(a.insertNode(document.createElement("wbr")),D.outerHTML=D.innerHTML.trim()===""?'<p data-block="0">'.concat(D.innerHTML,"</p>"):D.innerHTML)}else if(l==="link"){var L=(0,g.Th)(a.startContainer,"data-type","a");if(L){var H=(0,g.KJ)(a.startContainer,"vditor-ir__link");H?(a.insertNode(document.createElement("wbr")),L.outerHTML=H.innerHTML):L.outerHTML=L.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else l==="italic"?Gn(a,e,"em"):l==="bold"?Gn(a,e,"strong"):l==="strike"?Gn(a,e,"s"):l==="inline-code"?Gn(a,e,"code"):(l==="check"||l==="list"||l==="ordered-list")&&(qn(e,a,l),_=!1,t.classList.remove("vditor-menu--current"));else{e.ir.element.childNodes.length===0&&(e.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,j.ir)(e.ir.element,a));var z=(0,g.pt)(a.startContainer);if(l==="line"){if(z){var X=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;z.innerHTML.trim()===""?z.outerHTML=X:z.insertAdjacentHTML("afterend",X)}}else if(l==="quote")z&&(a.insertNode(document.createElement("wbr")),z.outerHTML='<blockquote data-block="0">'.concat(z.outerHTML,"</blockquote>"),_=!1,t.classList.add("vditor-menu--current"));else if(l==="link"){var Z=void 0;a.toString()===""?Z="".concat(i,"<wbr>").concat(r):Z="".concat(i).concat(a.toString()).concat(r.replace(")","<wbr>)")),document.execCommand("insertHTML",!1,Z),_=!1,t.classList.add("vditor-menu--current")}else if(l==="italic"||l==="bold"||l==="strike"||l==="inline-code"||l==="code"||l==="table"){var Z=void 0;a.toString()===""?Z="".concat(i,"<wbr>").concat(r):(l==="code"?Z="".concat(i,`
`).concat(a.toString(),"<wbr>").concat(r):l==="table"?Z="".concat(i).concat(a.toString(),"<wbr>").concat(r):Z="".concat(i).concat(a.toString()).concat(r,"<wbr>"),a.deleteContents()),(l==="table"||l==="code")&&(Z=`
`+Z+`

`);var K=document.createElement("span");K.innerHTML=Z,a.insertNode(K),V(e,a),l==="table"&&(a.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,j.jl)(a))}else(l==="check"||l==="list"||l==="ordered-list")&&(qn(e,a,l,!1),_=!1,p(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current"))}(0,j.ir)(e.ir.element,a),Rt(e),_&&Pt(e)},_o=function(e,t,i,r){function a(l){return l instanceof i?l:new i(function(w){w(l)})}return new(i||(i=Promise))(function(l,w){function _(H){try{L(r.next(H))}catch(z){w(z)}}function D(H){try{L(r.throw(H))}catch(z){w(z)}}function L(H){H.done?l(H.value):a(H.value).then(_,D)}L((r=r.apply(e,t||[])).next())})},Lo=function(e,t){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(L){return function(H){return D([L,H])}}function D(L){if(r)throw new TypeError("Generator is already executing.");for(;w&&(w=0,L[0]&&(i=0)),i;)try{if(r=1,a&&(l=L[0]&2?a.return:L[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,L[1])).done)return l;switch(a=0,l&&(L=[L[0]&2,l.value]),L[0]){case 0:case 1:l=L;break;case 4:return i.label++,{value:L[1],done:!1};case 5:i.label++,a=L[1],L=[0];continue;case 7:L=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(L[0]===6||L[0]===2)){i=0;continue}if(L[0]===3&&(!l||L[1]>l[0]&&L[1]<l[3])){i.label=L[1];break}if(L[0]===6&&i.label<l[1]){i.label=l[1],l=L;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(L);break}l[2]&&i.ops.pop(),i.trys.pop();continue}L=t.call(e,i)}catch(H){L=[6,H],a=0}finally{r=l=0}if(L[0]&5)throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}},Ao=function(){function e(t){var i=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(r,a){i.element.style.display="none";var l=decodeURIComponent(r.getAttribute("data-value")),w=window.getSelection().getRangeAt(0);if(a.currentMode==="ir"){var _=(0,g.Th)(w.startContainer,"data-type","code-block-info");if(_){_.textContent=h.Y.ZWSP+l.trimRight(),w.selectNodeContents(_),w.collapse(!1),Rt(a),_.parentElement.querySelectorAll("code").forEach(function(z){z.className="language-"+l.trimRight()}),ce(_.parentElement.querySelector(".vditor-ir__preview"),a),i.recentLanguage=l.trimRight();return}}if(a.currentMode==="wysiwyg"&&w.startContainer.nodeType!==3){var D=w.startContainer,L=void 0;if(D.classList.contains("vditor-input")?L=D:L=D.firstElementChild,L&&L.classList.contains("vditor-input")){L.value=l.trimRight(),w.selectNodeContents(L),w.collapse(!1),L.dispatchEvent(new CustomEvent("input",{detail:1})),i.recentLanguage=l.trimRight();return}}if(w.setStart(w.startContainer,i.lastIndex),w.deleteContents(),a.options.hint.parse?a.currentMode==="sv"?(0,j.Z2)(a.lute.SpinVditorSVDOM(l),a):a.currentMode==="wysiwyg"?(0,j.Z2)(a.lute.SpinVditorDOM(l),a):(0,j.Z2)(a.lute.SpinVditorIRDOM(l),a):(0,j.Z2)(l,a),i.splitChar===":"&&l.indexOf(":")>-1&&a.currentMode!=="sv"&&w.insertNode(document.createTextNode(" ")),w.collapse(!1),(0,j.jl)(w),a.currentMode==="wysiwyg"){var H=(0,g.KJ)(w.startContainer,"vditor-wysiwyg__block");H&&H.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(H.lastElementChild.innerHTML=H.firstElementChild.innerHTML,ce(H.lastElementChild,a))}else if(a.currentMode==="ir"){var H=(0,g.KJ)(w.startContainer,"vditor-ir__marker--pre");H&&H.nextElementSibling.classList.contains("vditor-ir__preview")&&(H.nextElementSibling.innerHTML=H.innerHTML,ce(H.nextElementSibling,a))}xe(a)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",t.push({key:":"})}return e.prototype.render=function(t){var i=this;if(window.getSelection().focusNode){var r,a=getSelection().getRangeAt(0);r=a.startContainer.textContent.substring(0,a.startOffset)||"";var l=this.getKey(r,t.options.hint.extend);if(typeof l>"u")this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var w=l===""?t.options.hint.emoji:t.lute.GetEmojis(),_=[];Object.keys(w).forEach(function(D){D.indexOf(l.toLowerCase())===0&&(w[D].indexOf(".")>-1?_.push({html:'<img src="'.concat(w[D],'" title=":').concat(D,':"/> :').concat(D,":"),value:":".concat(D,":")}):_.push({html:'<span class="vditor-hint__emoji">'.concat(w[D],"</span>").concat(D),value:w[D]}))}),this.genHTML(_,l,t)}else t.options.hint.extend.forEach(function(D){D.key===i.splitChar&&(clearTimeout(i.timeId),i.timeId=window.setTimeout(function(){return _o(i,void 0,void 0,function(){var L;return Lo(this,function(H){switch(H.label){case 0:return L=this.genHTML,[4,D.hint(l)];case 1:return L.apply(this,[H.sent(),l,t]),[2]}})})},t.options.hint.delay))})}},e.prototype.genHTML=function(t,i,r){var a=this;if(t.length===0){this.element.style.display="none";return}var l=r[r.currentMode].element,w=(0,j.Ey)(l),_=w.left+(r.options.outline.position==="left"?r.outline.element.offsetWidth:0),D=w.top,L="";t.forEach(function(z,X){if(!(X>7)){var Z=z.html;if(i!==""){var K=Z.lastIndexOf(">")+1,le=Z.substr(K),ee=le.toLowerCase().indexOf(i.toLowerCase());ee>-1&&(le=le.substring(0,ee)+"<b>"+le.substring(ee,ee+i.length)+"</b>"+le.substring(ee+i.length),Z=Z.substr(0,K)+le)}L+='<button type="button" data-value="'.concat(encodeURIComponent(z.value),` "
`).concat(X===0?"class='vditor-hint--current'":"","> ").concat(Z,"</button>")}}),this.element.innerHTML=L;var H=parseInt(document.defaultView.getComputedStyle(l,null).getPropertyValue("line-height"),10);this.element.style.top="".concat(D+(H||22),"px"),this.element.style.left="".concat(_,"px"),this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(z){z.addEventListener("click",function(X){a.fillEmoji(z,r),X.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top="".concat(D-this.element.offsetHeight,"px")),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")},e.prototype.select=function(t,i){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var r=this.element.querySelector(".vditor-hint--current");if(t.key==="ArrowDown")return t.preventDefault(),t.stopPropagation(),r.removeAttribute("class"),r.nextElementSibling?r.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",!0;if(t.key==="ArrowUp"){if(t.preventDefault(),t.stopPropagation(),r.removeAttribute("class"),r.previousElementSibling)r.previousElementSibling.className="vditor-hint--current";else{var a=this.element.children.length;this.element.children[a-1].className="vditor-hint--current"}return!0}else if(!(0,d._0)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Enter"&&!t.isComposing)return t.preventDefault(),t.stopPropagation(),this.fillEmoji(r,i),!0;return!1},e.prototype.getKey=function(t,i){var r=this;this.lastIndex=-1,this.splitChar="",i.forEach(function(L){var H=t.lastIndexOf(L.key);r.lastIndex<H&&(r.splitChar=L.key,r.lastIndex=H)});var a;if(this.lastIndex===-1)return a;var l=t.split(this.splitChar),w=l[l.length-1],_=32;if(l.length>1&&w.trim()===w)if(l.length===2&&l[0]===""&&l[1].length<_)a=l[1];else{var D=l[l.length-2].slice(-1);(0,y.p)(D)===" "&&w.length<_&&(a=w)}return a},e}(),Do=function(){function e(t){this.composingLock=!1;var i=document.createElement("div");i.className="vditor-ir",i.innerHTML='<pre class="vditor-reset" placeholder="'.concat(t.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>`),this.element=i.firstElementChild,this.bindEvent(t),Ti(t,this.element),wr(t,this.element),ki(t,this.element),Li(t,this.element),Ai(t,this.element),Mi(t,this.element),xi(t,this.element,this.copy),_i(t,this.element,this.copy)}return e.prototype.copy=function(t,i){var r=getSelection().getRangeAt(0);if(r.toString()!==""){t.stopPropagation(),t.preventDefault();var a=document.createElement("div");a.appendChild(r.cloneContents()),t.clipboardData.setData("text/plain",i.lute.VditorIRDOM2Md(a.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var i=this;this.element.addEventListener("paste",function(r){Kn(t,r,{pasteCode:function(a){document.execCommand("insertHTML",!1,a)}})}),this.element.addEventListener("scroll",function(){x(t,["hint"])}),this.element.addEventListener("compositionstart",function(r){i.composingLock=!0}),this.element.addEventListener("compositionend",function(r){(0,d.gm)()||V(t,getSelection().getRangeAt(0).cloneRange()),i.composingLock=!1}),this.element.addEventListener("input",function(r){if(!(r.inputType==="deleteByDrag"||r.inputType==="insertFromDrop")){if(i.preventInput){i.preventInput=!1,Rt(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}i.composingLock||r.data==="‘"||r.data==="“"||r.data==="《"||V(t,getSelection().getRangeAt(0).cloneRange(),!1,r)}}),this.element.addEventListener("click",function(r){if(r.target.tagName==="INPUT"){r.target.checked?r.target.setAttribute("checked","checked"):r.target.removeAttribute("checked"),i.preventInput=!0,Rt(t);return}var a=(0,j.RN)(t),l=(0,g.KJ)(r.target,"vditor-ir__preview");if(l||(l=(0,g.KJ)(a.startContainer,"vditor-ir__preview")),l&&(l.previousElementSibling.firstElementChild?a.selectNodeContents(l.previousElementSibling.firstElementChild):a.selectNodeContents(l.previousElementSibling),a.collapse(!0),(0,j.jl)(a),We(t)),r.target.tagName==="IMG"){var w=r.target.parentElement.querySelector(".vditor-ir__marker--link");w&&(a.selectNode(w),(0,j.jl)(a))}var _=(0,g.Th)(r.target,"data-type","a");if(_&&!_.classList.contains("vditor-ir__node--expand")){t.options.link.click?t.options.link.click(_.querySelector(":scope > .vditor-ir__marker--link")):t.options.link.isOpen&&window.open(_.querySelector(":scope > .vditor-ir__marker--link").textContent);return}if(r.target.isEqualNode(i.element)&&i.element.lastElementChild&&a.collapsed){var D=i.element.lastElementChild.getBoundingClientRect();r.y>D.top+D.height&&(i.element.lastElementChild.tagName==="P"&&i.element.lastElementChild.textContent.trim().replace(h.Y.ZWSP,"")===""?(a.selectNodeContents(i.element.lastElementChild),a.collapse(!1)):(i.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(h.Y.ZWSP,"<wbr></p>")),(0,j.ir)(i.element,a)))}a.toString()===""?F(a,t):setTimeout(function(){F((0,j.RN)(t),t)}),J(r,t),Pt(t)}),this.element.addEventListener("keyup",function(r){if(!(r.isComposing||(0,d._0)(r))){if(r.key==="Enter"&&We(t),Pt(t),(r.key==="Backspace"||r.key==="Delete")&&t.ir.element.innerHTML!==""&&t.ir.element.childNodes.length===1&&t.ir.element.firstElementChild&&t.ir.element.firstElementChild.tagName==="P"&&t.ir.element.firstElementChild.childElementCount===0&&(t.ir.element.textContent===""||t.ir.element.textContent===`
`)){t.ir.element.innerHTML="";return}var a=(0,j.RN)(t);r.key==="Backspace"?((0,d.gm)()&&a.startContainer.textContent===`
`&&a.startOffset===1&&(a.startContainer.textContent="",F(a,t)),i.element.querySelectorAll(".language-math").forEach(function(w){var _=w.querySelector("br");_&&_.remove()})):r.key.indexOf("Arrow")>-1?((r.key==="ArrowLeft"||r.key==="ArrowRight")&&$r(t),F(a,t)):r.keyCode===229&&r.code===""&&r.key==="Unidentified"&&F(a,t);var l=(0,g.KJ)(a.startContainer,"vditor-ir__preview");if(l){if(r.key==="ArrowUp"||r.key==="ArrowLeft")return l.previousElementSibling.firstElementChild?a.selectNodeContents(l.previousElementSibling.firstElementChild):a.selectNodeContents(l.previousElementSibling),a.collapse(!1),r.preventDefault(),!0;if(l.tagName==="SPAN"&&(r.key==="ArrowDown"||r.key==="ArrowRight"))return l.parentElement.getAttribute("data-type")==="html-entity"?(l.parentElement.insertAdjacentText("afterend",h.Y.ZWSP),a.setStart(l.parentElement.nextSibling,1)):a.selectNodeContents(l.parentElement.lastElementChild),a.collapse(!1),r.preventDefault(),!0}}})},e}(),qr=function(e){if(e.currentMode==="sv")return e.lute.Md2HTML(C(e));if(e.currentMode==="wysiwyg")return e.lute.VditorDOM2HTML(e.wysiwyg.element.innerHTML);if(e.currentMode==="ir")return e.lute.VditorIRDOM2HTML(e.ir.element.innerHTML)},Oo=c(796),Wr=c(70),Po=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'.concat(t,`</div>
<div class="vditor-outline__content"></div>`)}return e.prototype.render=function(t){var i="";return t.preview.element.style.display==="block"?i=(0,Wr.N)(t.preview.previewElement,this.element.lastElementChild,t):i=(0,Wr.N)(t[t.currentMode].element,this.element.lastElementChild,t),i},e.prototype.toggle=function(t,i,r){var a;i===void 0&&(i=!0),r===void 0&&(r=!0);var l=(a=t.toolbar.elements.outline)===null||a===void 0?void 0:a.firstElementChild;if(i&&window.innerWidth>=h.Y.MOBILE_WIDTH?(this.element.style.display="block",this.render(t),l==null||l.classList.add("vditor-menu--current")):(this.element.style.display="none",l==null||l.classList.remove("vditor-menu--current")),r&&getSelection().rangeCount>0){var w=getSelection().getRangeAt(0);t[t.currentMode].element.contains(w.startContainer)&&(0,j.jl)(w)}it(t)},e}(),Ro=c(0),Ho=function(){function e(t){var i=this;this.element=document.createElement("div"),this.element.className="vditor-preview",this.previewElement=document.createElement("div"),this.previewElement.className="vditor-reset",t.options.classes.preview&&this.previewElement.classList.add(t.options.classes.preview),this.previewElement.style.maxWidth=t.options.preview.maxWidth+"px",this.previewElement.addEventListener("copy",function(D){if(D.target.tagName!=="TEXTAREA"){var L=document.createElement("div");L.className="vditor-reset",L.appendChild(getSelection().getRangeAt(0).cloneContents()),i.copyToX(t,L,"default"),D.preventDefault()}}),this.previewElement.addEventListener("click",function(D){var L=(0,g._Y)(D.target,"SPAN");if(L&&(0,g.KJ)(L,"vditor-toc")){var H=i.previewElement.querySelector("#"+L.getAttribute("data-target-id"));H&&(i.element.scrollTop=H.offsetTop);return}if(D.target.tagName==="A"){t.options.link.click?t.options.link.click(D.target):t.options.link.isOpen&&window.open(D.target.getAttribute("href")),D.preventDefault();return}D.target.tagName==="IMG"&&(t.options.image.preview?t.options.image.preview(D.target):t.options.image.isPreview&&(0,Q.o)(D.target,t.options.lang,t.options.theme))}),this.element.appendChild(this.previewElement);var r=t.options.preview.actions;if(r.length!==0){var a=document.createElement("div");a.className="vditor-preview__action";for(var l=[],w=0;w<r.length;w++){var _=r[w];if(typeof _=="object"){l.push('<button type="button" data-type="'.concat(_.key,'" class="').concat(_.className,'"').concat(_.tooltip?' aria-label="'.concat(_.tooltip,'"'):"",'">').concat(_.text,"</button>"));continue}switch(_){case"desktop":l.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":l.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":l.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":l.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到公众号"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":l.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到知乎"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>');break}}a.innerHTML=l.join(""),a.addEventListener((0,d.y3)(),function(D){var L=(0,O.f)(D.target,"BUTTON");if(L){var H=L.getAttribute("data-type"),z=r.find(function(X){return(X==null?void 0:X.key)===H});if(z){z.click(H);return}if(H==="mp-wechat"||H==="zhihu"){i.copyToX(t,i.previewElement.cloneNode(!0),H);return}H==="desktop"?i.previewElement.style.width="auto":H==="tablet"?i.previewElement.style.width="780px":i.previewElement.style.width="360px",i.previewElement.scrollWidth>i.previewElement.parentElement.clientWidth&&(i.previewElement.style.width="auto"),i.render(t),a.querySelectorAll("button").forEach(function(X){X.classList.remove("vditor-preview__action--current")}),L.classList.add("vditor-preview__action--current")}}),this.element.insertBefore(a,this.previewElement)}}return e.prototype.render=function(t,i){var r=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display==="none"){this.element.getAttribute("data-type")==="renderPerformance"&&t.tip.hide();return}if(i){this.previewElement.innerHTML=i;return}if(C(t).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")===""){this.previewElement.innerHTML="";return}var a=new Date().getTime(),l=C(t);this.mdTimeoutId=window.setTimeout(function(){if(t.options.preview.url){var w=new XMLHttpRequest;w.open("POST",t.options.preview.url),w.setRequestHeader("Content-Type","application/json;charset=UTF-8"),w.onreadystatechange=function(){if(w.readyState===XMLHttpRequest.DONE)if(w.status===200){var D=JSON.parse(w.responseText);if(D.code!==0){t.tip.show(D.msg);return}t.options.preview.transform&&(D.data=t.options.preview.transform(D.data)),r.previewElement.innerHTML=D.data,r.afterRender(t,a)}else{var L=t.lute.Md2HTML(l);t.options.preview.transform&&(L=t.options.preview.transform(L)),r.previewElement.innerHTML=L,r.afterRender(t,a)}},w.send(JSON.stringify({markdownText:l}))}else{var _=t.lute.Md2HTML(l);t.options.preview.transform&&(_=t.options.preview.transform(_)),r.previewElement.innerHTML=_,r.afterRender(t,a)}},t.options.preview.delay)},e.prototype.afterRender=function(t,i){t.options.preview.parse&&t.options.preview.parse(this.element);var r=new Date().getTime()-i;new Date().getTime()-i>2600?(t.tip.show(window.VditorI18n.performanceTip.replace("${x}",r.toString())),t.preview.element.setAttribute("data-type","renderPerformance")):t.preview.element.getAttribute("data-type")==="renderPerformance"&&(t.tip.hide(),t.preview.element.removeAttribute("data-type"));var a=t.preview.element.querySelector(".vditor-comment--focus");a&&a.classList.remove("vditor-comment--focus"),(0,B.o)(t.preview.previewElement,t.options.preview.hljs),(0,re.$)(t.options.preview.hljs,t.preview.previewElement,t.options.cdn),(0,me.e)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,Me.K)(t.preview.previewElement,t.options.cdn),(0,De.Y)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,Y.D)(t.preview.previewElement,t.options.cdn),(0,G.m)(t.preview.previewElement,t.options.cdn),(0,P.v)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,Se.l)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,ke.M)(t.preview.previewElement,t.options.cdn),(0,R.$)(t.preview.previewElement,t.options.cdn),t.options.preview.render.media.enable&&(0,Ro.l)(t.preview.previewElement),t.options.customRenders.forEach(function(_){_.render(t.preview.previewElement,t)});var l=t.preview.element,w=t.outline.render(t);w===""&&(w="[ToC]"),l.querySelectorAll('[data-type="toc-block"]').forEach(function(_){_.innerHTML=w,(0,he.T)(_,{cdn:t.options.cdn,math:t.options.preview.math})}),(0,he.T)(t.preview.previewElement,{cdn:t.options.cdn,math:t.options.preview.math})},e.prototype.copyToX=function(t,i,r){r===void 0&&(r="mp-wechat"),r!=="zhihu"?i.querySelectorAll(".katex-html .base").forEach(function(l){l.style.display="initial"}):i.querySelectorAll(".language-math").forEach(function(l){l.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'.concat(l.getAttribute("data-math"),'\\" style="display: block; margin: 0 auto; max-width: 100%;">')}),i.style.backgroundColor="#fff",i.querySelectorAll("code").forEach(function(l){l.style.backgroundImage="none"}),this.element.append(i);var a=i.ownerDocument.createRange();a.selectNode(i),(0,j.jl)(a),document.execCommand("copy"),i.remove(),t.tip.show(["zhihu","mp-wechat"].includes(r)?"已复制，可到".concat(r==="zhihu"?"知乎":"微信公众号平台","进行粘贴"):"已复制到剪切板")},e}(),Io=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--".concat(t.options.resize.position),this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(t)}return e.prototype.bindEvent=function(t){var i=this;this.element.addEventListener("mousedown",function(r){var a=document,l=r.clientY,w=t.element.offsetHeight,_=63+t.element.querySelector(".vditor-toolbar").clientHeight;a.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),i.element.classList.add("vditor-resize--selected"),a.onmousemove=function(D){t.options.resize.position==="top"?t.element.style.height=Math.max(_,w+(l-D.clientY))+"px":t.element.style.height=Math.max(_,w+(D.clientY-l))+"px",t.options.typewriterMode&&(t.sv.element.style.paddingBottom=t.sv.element.parentElement.offsetHeight/2+"px")},a.onmouseup=function(){t.options.resize.after&&t.options.resize.after(t.element.offsetHeight-w),window.captureEvents&&window.captureEvents(),a.onmousemove=null,a.onmouseup=null,a.ondragstart=null,a.onselectstart=null,a.onselect=null,i.element.classList.remove("vditor-resize--selected")}})},e}(),No=function(){function e(t){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",t.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(t),Ti(t,this.element),ki(t,this.element),Li(t,this.element),Ai(t,this.element),Mi(t,this.element),xi(t,this.element,this.copy),_i(t,this.element,this.copy)}return e.prototype.copy=function(t,i){t.stopPropagation(),t.preventDefault(),t.clipboardData.setData("text/plain",An(i[i.currentMode].element))},e.prototype.bindEvent=function(t){var i=this;this.element.addEventListener("paste",function(r){Kn(t,r,{pasteCode:function(a){document.execCommand("insertHTML",!1,a)}})}),this.element.addEventListener("scroll",function(){if(t.preview.element.style.display==="block"){var r=i.element.scrollTop,a=i.element.clientHeight,l=i.element.scrollHeight-parseFloat(i.element.style.paddingBottom||"0"),w=t.preview.element;r/a>.5?w.scrollTop=(r+a)*w.scrollHeight/l-a:w.scrollTop=r*w.scrollHeight/l}}),this.element.addEventListener("compositionstart",function(r){i.composingLock=!0}),this.element.addEventListener("compositionend",function(r){(0,d.gm)()||se(t,r),i.composingLock=!1}),this.element.addEventListener("input",function(r){if(!(r.inputType==="deleteByDrag"||r.inputType==="insertFromDrop")&&!(i.composingLock||r.data==="‘"||r.data==="“"||r.data==="《")){if(i.preventInput){i.preventInput=!1,Ge(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0});return}se(t,r)}}),this.element.addEventListener("keyup",function(r){if(!(r.isComposing||(0,d._0)(r))){if((r.key==="Backspace"||r.key==="Delete")&&t.sv.element.innerHTML!==""&&t.sv.element.childNodes.length===1&&t.sv.element.firstElementChild&&t.sv.element.firstElementChild.tagName==="DIV"&&t.sv.element.firstElementChild.childElementCount===2&&(t.sv.element.firstElementChild.textContent===""||t.sv.element.textContent===`
`)){t.sv.element.innerHTML="";return}r.key==="Enter"&&We(t)}})},e}(),Yr=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return e.prototype.show=function(t,i){var r=this;i===void 0&&(i=6e3),this.element.className="vditor-tip vditor-tip--show",i===0?(this.element.innerHTML='<div class="vditor-tip__content">'.concat(t,`
<div class="vditor-tip__close">X</div></div>`),this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){r.hide()})):(this.element.innerHTML='<div class="vditor-tip__content">'.concat(t,"</div>"),setTimeout(function(){r.hide()},i)),this.element.removeAttribute("style"),setTimeout(function(){var a=r.element.getBoundingClientRect();a.top<46&&(r.element.style.position="fixed",r.element.style.top="46px")},150)},e.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},e}(),Ni=function(e,t){if(t.options.preview.mode!==e){switch(t.options.preview.mode=e,e){case"both":t.sv.element.style.display="block",t.preview.element.style.display="block",t.preview.render(t),v(t.toolbar.elements,["both"]);break;case"editor":t.sv.element.style.display="block",t.preview.element.style.display="none",p(t.toolbar.elements,["both"]);break}t.devtools&&t.devtools.renderEchart(t)}},jo=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bo=function(e){jo(t,e);function t(i,r){var a=e.call(this,i,r)||this;return i.options.preview.mode==="both"&&a.element.children[0].classList.add("vditor-menu--current"),a.element.children[0].addEventListener((0,d.y3)(),function(l){var w=a.element.firstElementChild;w.classList.contains(h.Y.CLASS_MENU_DISABLED)||(l.preventDefault(),i.currentMode==="sv"&&(i.options.preview.mode==="both"?Ni("editor",i):Ni("both",i)))}),a}return t}($e),zo=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"}return e}(),Kr=c(13),Fo=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Uo=function(e){Fo(t,e);function t(i,r){var a=e.call(this,i,r)||this,l=a.element.children[0],w=document.createElement("div");w.className="vditor-hint".concat(r.level===2?"":" vditor-panel--arrow");var _="";return h.Y.CODE_THEME.forEach(function(D){_+="<button>".concat(D,"</button>")}),w.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(_,"</div>"),w.addEventListener((0,d.y3)(),function(D){D.target.tagName==="BUTTON"&&(x(i,["subToolbar"]),i.options.preview.hljs.style=D.target.textContent,(0,Kr.h)(D.target.textContent,i.options.cdn),D.preventDefault(),D.stopPropagation())}),a.element.appendChild(w),A(i,w,l,r.level),a}return t}($e),Vo=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),$o=function(e){Vo(t,e);function t(i,r){var a=e.call(this,i,r)||this,l=a.element.children[0],w=document.createElement("div");w.className="vditor-hint".concat(r.level===2?"":" vditor-panel--arrow");var _="";return Object.keys(i.options.preview.theme.list).forEach(function(D){_+='<button data-type="'.concat(D,'">').concat(i.options.preview.theme.list[D],"</button>")}),w.innerHTML='<div style="overflow: auto;max-height:'.concat(window.innerHeight/2,'px">').concat(_,"</div>"),w.addEventListener((0,d.y3)(),function(D){D.target.tagName==="BUTTON"&&(x(i,["subToolbar"]),i.options.preview.theme.current=D.target.getAttribute("data-type"),(0,ue.H)(i.options.preview.theme.current,i.options.preview.theme.path),D.preventDefault(),D.stopPropagation())}),a.element.appendChild(w),A(i,w,l,r.level),a}return t}($e),qo=function(){function e(t){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(t,"")}return e.prototype.render=function(t,i){var r=i.endsWith(`
`)?i.length-1:i.length;if(t.options.counter.type==="text"&&t[t.currentMode]){var a=t[t.currentMode].element.cloneNode(!0);a.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(l){l.remove()}),r=a.textContent.length}typeof t.options.counter.max=="number"?(r>t.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML="".concat(r,"/").concat(t.options.counter.max)):this.element.innerHTML="".concat(r),this.element.setAttribute("aria-label",t.options.counter.type),t.options.counter.after&&t.options.counter.after(r,{enable:t.options.counter.enable,max:t.options.counter.max,type:t.options.counter.type})},e}(),Wo=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yo=function(e){Wo(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a.element.children[0].innerHTML=r.icon,a.element.children[0].addEventListener((0,d.y3)(),function(l){l.preventDefault(),!l.currentTarget.classList.contains(h.Y.CLASS_MENU_DISABLED)&&r.click(l,i)}),a}return t}($e),Ko=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Go=function(e){Ko(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a.element.firstElementChild.addEventListener((0,d.y3)(),function(l){var w=a.element.firstElementChild;w.classList.contains(h.Y.CLASS_MENU_DISABLED)||(l.preventDefault(),w.classList.contains("vditor-menu--current")?(w.classList.remove("vditor-menu--current"),i.devtools.element.style.display="none",it(i)):(w.classList.add("vditor-menu--current"),i.devtools.element.style.display="block",it(i),i.devtools.renderEchart(i)))}),a}return t}($e),Zo=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"}return e}(),Xo=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Jo=function(e){Xo(t,e);function t(i,r){var a=e.call(this,i,r)||this,l=document.createElement("div");l.className="vditor-panel vditor-panel--arrow";var w="";return Object.keys(i.options.hint.emoji).forEach(function(_){var D=i.options.hint.emoji[_];D.indexOf(".")>-1?w+='<button data-value=":'.concat(_,': " data-key=":').concat(_,`:"><img
data-value=":`).concat(_,': " data-key=":').concat(_,':" class="vditor-emojis__icon" src="').concat(D,'"/></button>'):w+='<button data-value="'.concat(D,` "
 data-key="`).concat(_,'"><span class="vditor-emojis__icon">').concat(D,"</span></button>")}),l.innerHTML='<div class="vditor-emojis" style="max-height: '.concat(i.options.height==="auto"?"auto":i.options.height-80,'px">').concat(w,`</div><div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`).concat(i.options.hint.emojiTail||"",`</span>
</div>`),a.element.appendChild(l),A(i,l,a.element.firstElementChild,r.level),a.bindEvent(i),a}return t.prototype.bindEvent=function(i){var r=this;this.element.lastElementChild.addEventListener((0,d.y3)(),function(a){var l=(0,O.f)(a.target,"BUTTON");if(l){a.preventDefault();var w=l.getAttribute("data-value"),_=(0,j.RN)(i),D=w;if(i.currentMode==="wysiwyg"?D=i.lute.SpinVditorDOM(w):i.currentMode==="ir"&&(D=i.lute.SpinVditorIRDOM(w)),w.indexOf(":")>-1&&i.currentMode!=="sv"){var L=document.createElement("div");L.innerHTML=D,D=L.firstElementChild.firstElementChild.outerHTML+" ",(0,j.Z2)(D,i)}else _.extractContents(),_.insertNode(document.createTextNode(w)),(0,g.pt)(_.startContainer)||Ei(i,_);_.collapse(!1),(0,j.jl)(_),r.element.lastElementChild.style.display="none",xe(i)}}),this.element.lastElementChild.addEventListener("mouseover",function(a){var l=(0,O.f)(a.target,"BUTTON");l&&(r.element.querySelector(".vditor-emojis__tip").innerHTML=l.getAttribute("data-key"))})},t}($e),Gr=function(e,t,i){var r=document.createElement("a");"download"in r?(r.download=i,r.style.display="none",r.href=URL.createObjectURL(new Blob([t])),document.body.appendChild(r),r.click(),r.remove()):e.tip.show(window.VditorI18n.downloadTip,0)},Qo=function(e){var t=C(e);Gr(e,t,t.substr(0,10)+".md")},es=function(e){e.tip.show(window.VditorI18n.generate,3800);var t=document.querySelector("#vditorExportIframe");t.contentDocument.open(),t.contentDocument.write('<link rel="stylesheet" href="'.concat(e.options.cdn,`/dist/index.css"/>
<script src="`).concat(e.options.cdn,`/dist/method.min.js"><\/script>
<div id="preview" style="width: 800px"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    cdn: "`).concat(e.options.cdn,`",
    markdown: {
      theme: `).concat(JSON.stringify(e.options.preview.theme),`
    },
    hljs: {
      style: "`).concat(e.options.preview.hljs.style,`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
<\/script>`)),t.contentDocument.close(),setTimeout(function(){t.contentWindow.postMessage(C(e),"*")},200)},ts=function(e){var t=qr(e),i='<html><head><link rel="stylesheet" type="text/css" href="'.concat(e.options.cdn,`/dist/index.css"/>
<script src="`).concat(e.options.cdn,"/dist/js/i18n/").concat(e.options.lang,`.js"><\/script>
<script src="`).concat(e.options.cdn,`/dist/method.min.js"><\/script></head>
<body><div class="vditor-reset" id="preview">`).concat(t,`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`).concat(e.options.preview.theme.current,"', '").concat(e.options.preview.theme.path,`');
    Vditor.codeRender(previewElement);
    Vditor.highlightRender(`).concat(JSON.stringify(e.options.preview.hljs),", previewElement, '").concat(e.options.cdn,`');
    Vditor.mathRender(previewElement, {
        cdn: '`).concat(e.options.cdn,`',
        math: `).concat(JSON.stringify(e.options.preview.math),`,
    });
    Vditor.mermaidRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.SMILESRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.markmapRender(previewElement, '`).concat(e.options.cdn,`');
    Vditor.flowchartRender(previewElement, '`).concat(e.options.cdn,`');
    Vditor.graphvizRender(previewElement, '`).concat(e.options.cdn,`');
    Vditor.chartRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.mindmapRender(previewElement, '`).concat(e.options.cdn,"', '").concat(e.options.theme,`');
    Vditor.abcRender(previewElement, '`).concat(e.options.cdn,`');
    `).concat(e.options.preview.render.media.enable?"Vditor.mediaRender(previewElement);":"",`
    Vditor.speechRender(previewElement);
<\/script>
<script src="`).concat(e.options.cdn,"/dist/js/icons/").concat(e.options.icon,'.js"><\/script></body></html>');Gr(e,i,t.substr(0,10)+".html")},ns=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),is=function(e){ns(t,e);function t(i,r){var a=e.call(this,i,r)||this,l=a.element.children[0],w=document.createElement("div");return w.className="vditor-hint".concat(r.level===2?"":" vditor-panel--arrow"),w.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,w.addEventListener((0,d.y3)(),function(_){var D=_.target;if(D.tagName==="BUTTON"){switch(D.getAttribute("data-type")){case"markdown":Qo(i);break;case"pdf":es(i);break;case"html":ts(i);break}x(i,["subToolbar"]),_.preventDefault(),_.stopPropagation()}}),a.element.appendChild(w),A(i,w,l,r.level),a}return t}($e),rs=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),as=function(e){rs(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a._bindEvent(i,r),a}return t.prototype._bindEvent=function(i,r){this.element.children[0].addEventListener((0,d.y3)(),function(a){a.preventDefault(),i.element.className.includes("vditor--fullscreen")?(r.level||(this.innerHTML=r.icon),i.element.style.zIndex="",document.body.style.overflow="",i.element.classList.remove("vditor--fullscreen"),Object.keys(i.toolbar.elements).forEach(function(l){var w=i.toolbar.elements[l].firstChild;w&&(w.className=w.className.replace("__s","__n"),i.options.toolbar.forEach(function(_){typeof _!="string"&&_.tipPosition&&_.name===w.dataset.type&&(w.className="vditor-tooltipped vditor-tooltipped__".concat(_.tipPosition))}))}),i.counter&&(i.counter.element.className=i.counter.element.className.replace("__s","__n"))):(r.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),i.element.style.zIndex=i.options.fullscreen.index.toString(),document.body.style.overflow="hidden",i.element.classList.add("vditor--fullscreen"),Object.keys(i.toolbar.elements).forEach(function(l){var w=i.toolbar.elements[l].firstChild;w&&(w.className=w.className.replace("__n","__s"))}),i.counter&&(i.counter.element.className=i.counter.element.className.replace("__n","__s"))),i.devtools&&i.devtools.renderEchart(i),r.click&&r.click(a,i),it(i),ln(i)})},t}($e),os=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),ss=function(e){os(t,e);function t(i,r){var a=e.call(this,i,r)||this,l=document.createElement("div");return l.className="vditor-hint vditor-panel--arrow",l.innerHTML='<button data-tag="h1" data-value="# ">'.concat(window.VditorI18n.heading1," ").concat((0,d.fG)("&lt;⌥⌘1>"),`</button>
<button data-tag="h2" data-value="## ">`).concat(window.VditorI18n.heading2," &lt;").concat((0,d.fG)("⌥⌘2"),`></button>
<button data-tag="h3" data-value="### ">`).concat(window.VditorI18n.heading3," &lt;").concat((0,d.fG)("⌥⌘3"),`></button>
<button data-tag="h4" data-value="#### ">`).concat(window.VditorI18n.heading4," &lt;").concat((0,d.fG)("⌥⌘4"),`></button>
<button data-tag="h5" data-value="##### ">`).concat(window.VditorI18n.heading5," &lt;").concat((0,d.fG)("⌥⌘5"),`></button>
<button data-tag="h6" data-value="###### ">`).concat(window.VditorI18n.heading6," &lt;").concat((0,d.fG)("⌥⌘6"),"></button>"),a.element.appendChild(l),a._bindEvent(i,l),a}return t.prototype._bindEvent=function(i,r){var a=this.element.children[0];a.addEventListener((0,d.y3)(),function(w){w.preventDefault(),clearTimeout(i.wysiwyg.afterRenderTimeoutId),clearTimeout(i.ir.processTimeoutId),clearTimeout(i.sv.processTimeoutId),!a.classList.contains(h.Y.CLASS_MENU_DISABLED)&&(a.blur(),a.classList.contains("vditor-menu--current")?(i.currentMode==="wysiwyg"?(Si(i),Ie(i)):i.currentMode==="ir"&&Pn(i,""),a.classList.remove("vditor-menu--current")):(x(i,["subToolbar"]),r.style.display="block"))});for(var l=0;l<6;l++)r.children.item(l).addEventListener((0,d.y3)(),function(w){w.preventDefault(),i.currentMode==="wysiwyg"?(Un(i,w.target.getAttribute("data-tag")),Ie(i),a.classList.add("vditor-menu--current")):i.currentMode==="ir"?(Pn(i,w.target.getAttribute("data-value")),a.classList.add("vditor-menu--current")):Sr(i,w.target.getAttribute("data-value")),r.style.display="none"})},t}($e),ls=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),cs=function(e){ls(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a.element.children[0].addEventListener((0,d.y3)(),function(l){l.preventDefault(),i.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown 使用指南</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">语法速查手册</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">基础语法</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">扩展语法</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">键盘快捷键</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor 支持</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">官方讨论区</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">开发手册</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">演示地址</a></li>
    </ul>
</div></div>`,0)}),a}return t}($e),us=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),ds=function(e){us(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a.element.children[0].addEventListener((0,d.y3)(),function(l){if(l.preventDefault(),!(a.element.firstElementChild.classList.contains(h.Y.CLASS_MENU_DISABLED)||i.currentMode==="sv")){var w=(0,j.RN)(i),_=(0,g._Y)(w.startContainer,"LI");_&&Lr(i,_,w)}}),a}return t}($e),fs=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),hs=function(e){fs(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a.element.children[0].addEventListener((0,d.y3)(),function(l){l.preventDefault(),i.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>下一代的 Markdown 编辑器，为未来而构建</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="https://unpkg.com/vditor/dist/images/logo.png" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor 是一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。
        它使用 TypeScript 实现，支持原生 JavaScript 以及 Vue、React、Angular 和 Svelte 等框架。
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        项目地址：<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        开源协议：MIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        组件版本：Vditor v`.concat(h.g," / Lute v").concat(Lute.Version,`
        </li>
        <li>
        赞助捐赠：<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`),0)}),a}return t}($e),ps=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),ms=function(e){ps(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a.element.children[0].addEventListener((0,d.y3)(),function(l){l.preventDefault(),!(a.element.firstElementChild.classList.contains(h.Y.CLASS_MENU_DISABLED)||i.currentMode==="sv")&&Dn(i,"afterend")}),a}return t}($e),gs=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),vs=function(e){gs(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a.element.children[0].addEventListener((0,d.y3)(),function(l){l.preventDefault(),!(a.element.firstElementChild.classList.contains(h.Y.CLASS_MENU_DISABLED)||i.currentMode==="sv")&&Dn(i,"beforebegin")}),a}return t}($e),bs=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),ys=function(e){bs(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a.element.children[0].addEventListener((0,d.y3)(),function(l){if(l.preventDefault(),!(a.element.firstElementChild.classList.contains(h.Y.CLASS_MENU_DISABLED)||i.currentMode==="sv")){var w=(0,j.RN)(i),_=(0,g._Y)(w.startContainer,"LI");_&&Pi(i,_,w,_.parentElement)}}),a}return t}($e),ws=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Es=function(e){ws(t,e);function t(i,r){var a=e.call(this,i,r)||this;return i.options.outline&&a.element.firstElementChild.classList.add("vditor-menu--current"),a.element.children[0].addEventListener((0,d.y3)(),function(l){l.preventDefault();var w=i.toolbar.elements.outline.firstElementChild;w.classList.contains(h.Y.CLASS_MENU_DISABLED)||(i.options.outline.enable=!a.element.firstElementChild.classList.contains("vditor-menu--current"),i.outline.toggle(i,i.options.outline.enable))}),a}return t}($e),Ss=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Cs=function(e){Ss(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a._bindEvent(i),a}return t.prototype._bindEvent=function(i){var r=this;this.element.children[0].addEventListener((0,d.y3)(),function(a){a.preventDefault();var l=r.element.firstElementChild;if(!l.classList.contains(h.Y.CLASS_MENU_DISABLED)){var w=h.Y.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);l.classList.contains("vditor-menu--current")?(l.classList.remove("vditor-menu--current"),i.currentMode==="sv"?(i.sv.element.style.display="block",i.options.preview.mode==="both"?i.preview.element.style.display="block":i.preview.element.style.display="none"):(i[i.currentMode].element.parentElement.style.display="block",i.preview.element.style.display="none"),E(i.toolbar.elements,w),i.outline.render(i)):(b(i.toolbar.elements,w),i.preview.element.style.display="block",i.currentMode==="sv"?i.sv.element.style.display="none":i[i.currentMode].element.parentElement.style.display="none",i.preview.render(i),l.classList.add("vditor-menu--current"),x(i,["subToolbar","hint","popover"]),setTimeout(function(){i.outline.render(i)},i.options.preview.delay+10)),it(i)}})},t}($e),Ts=function(){function e(t){this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0;var i;if(typeof AudioContext<"u")i=new AudioContext;else if(webkitAudioContext)i=new webkitAudioContext;else return;this.DEFAULT_SAMPLE_RATE=i.sampleRate;var r=i.createGain(),a=i.createMediaStreamSource(t);a.connect(r),this.recorder=i.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,r.connect(this.recorder),this.recorder.connect(i.destination),this.readyFlag=!0}return e.prototype.cloneChannelData=function(t,i){this.leftChannel.push(new Float32Array(t)),this.rightChannel.push(new Float32Array(i)),this.recordingLength+=2048},e.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},e.prototype.stopRecording=function(){this.isRecording=!1},e.prototype.buildWavFileBlob=function(){for(var t=this.mergeBuffers(this.leftChannel),i=this.mergeBuffers(this.rightChannel),r=new Float32Array(t.length),a=0;a<t.length;++a)r[a]=.5*(t[a]+i[a]);this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE&&(r=this.downSampleBuffer(r,this.SAMPLE_RATE));var l=44+r.length*2,w=new ArrayBuffer(l),_=new DataView(w);this.writeUTFBytes(_,0,"RIFF"),_.setUint32(4,l,!0),this.writeUTFBytes(_,8,"WAVE"),this.writeUTFBytes(_,12,"fmt "),_.setUint32(16,16,!0),_.setUint16(20,1,!0),_.setUint16(22,1,!0),_.setUint32(24,this.SAMPLE_RATE,!0),_.setUint32(28,this.SAMPLE_RATE*2,!0),_.setUint16(32,2,!0),_.setUint16(34,16,!0);var D=r.length*2;this.writeUTFBytes(_,36,"data"),_.setUint32(40,D,!0);for(var L=r.length,H=44,z=1,X=0;X<L;X++)_.setInt16(H,r[X]*(32767*z),!0),H+=2;return new Blob([_],{type:"audio/wav"})},e.prototype.downSampleBuffer=function(t,i){if(i===this.DEFAULT_SAMPLE_RATE||i>this.DEFAULT_SAMPLE_RATE)return t;for(var r=this.DEFAULT_SAMPLE_RATE/i,a=Math.round(t.length/r),l=new Float32Array(a),w=0,_=0;w<l.length;){for(var D=Math.round((w+1)*r),L=0,H=0,z=_;z<D&&z<t.length;z++)L+=t[z],H++;l[w]=L/H,w++,_=D}return l},e.prototype.mergeBuffers=function(t){for(var i=new Float32Array(this.recordingLength),r=0,a=t.length,l=0;l<a;++l){var w=t[l];i.set(w,r),r+=w.length}return i},e.prototype.writeUTFBytes=function(t,i,r){for(var a=r.length,l=0;l<a;l++)t.setUint8(i+l,r.charCodeAt(l))},e}(),ks=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ms=function(e){ks(t,e);function t(i,r){var a=e.call(this,i,r)||this;return a._bindEvent(i),a}return t.prototype._bindEvent=function(i){var r=this,a;this.element.children[0].addEventListener((0,d.y3)(),function(l){if(l.preventDefault(),!r.element.firstElementChild.classList.contains(h.Y.CLASS_MENU_DISABLED)){var w=i[i.currentMode].element;if(!a){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(D){a=new Ts(D),a.recorder.onaudioprocess=function(L){if(a.isRecording){var H=L.inputBuffer.getChannelData(0),z=L.inputBuffer.getChannelData(1);a.cloneChannelData(H,z)}},a.startRecordingNewWavFile(),i.tip.show(window.VditorI18n.recording),w.setAttribute("contenteditable","false"),r.element.children[0].classList.add("vditor-menu--current")}).catch(function(){i.tip.show(window.VditorI18n["record-tip"])});return}if(a.isRecording){a.stopRecording(),i.tip.hide();var _=new File([a.buildWavFileBlob()],"record".concat(new Date().getTime(),".wav"),{type:"video/webm"});Oi(i,[_]),r.element.children[0].classList.remove("vditor-menu--current")}else i.tip.show(window.VditorI18n.recording),w.setAttribute("contenteditable","false"),a.startRecordingNewWavFile(),r.element.children[0].classList.add("vditor-menu--current")}})},t}($e),xs=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),_s=function(e){xs(t,e);function t(i,r){var a=e.call(this,i,r)||this;return b({redo:a.element},["redo"]),a.element.children[0].addEventListener((0,d.y3)(),function(l){l.preventDefault(),!a.element.firstElementChild.classList.contains(h.Y.CLASS_MENU_DISABLED)&&i.undo.redo(i)}),a}return t}($e),Ls=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),As=function(e){Ls(t,e);function t(i,r){var a=e.call(this,i,r)||this;return b({undo:a.element},["undo"]),a.element.children[0].addEventListener((0,d.y3)(),function(l){l.preventDefault(),!a.element.firstElementChild.classList.contains(h.Y.CLASS_MENU_DISABLED)&&i.undo.undo(i)}),a}return t}($e),Ds=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Os=function(e){Ds(t,e);function t(i,r){var a=e.call(this,i,r)||this,l='<input type="file"';return i.options.upload.multiple&&(l+=' multiple="multiple"'),i.options.upload.accept&&(l+=' accept="'.concat(i.options.upload.accept,'"')),a.element.children[0].innerHTML="".concat(r.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>').concat(l,">"),a._bindEvent(i),a}return t.prototype._bindEvent=function(i){var r=this;this.element.children[0].addEventListener((0,d.y3)(),function(a){if(r.element.firstElementChild.classList.contains(h.Y.CLASS_MENU_DISABLED)){a.stopPropagation(),a.preventDefault();return}}),this.element.querySelector("input").addEventListener("change",function(a){if(r.element.firstElementChild.classList.contains(h.Y.CLASS_MENU_DISABLED)){a.stopPropagation(),a.preventDefault();return}a.target.files.length!==0&&Oi(i,a.target.files,a.target)})},t}($e),Ps=function(){function e(t){var i=this,r=t.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",r.toolbar.forEach(function(a,l){var w=i.genItem(t,a,l);if(i.element.appendChild(w),a.toolbar){var _=document.createElement("div");_.className="vditor-hint vditor-panel--arrow",_.addEventListener((0,d.y3)(),function(D){_.style.display="none"}),a.toolbar.forEach(function(D,L){D.level=2,_.appendChild(i.genItem(t,D,l+L))}),w.appendChild(_),A(t,_,w.children[0])}}),t.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),t.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),t.options.counter.enable&&(t.counter=new qo(t),this.element.appendChild(t.counter.element))}return e.prototype.updateConfig=function(t,i){t.options.toolbarConfig=Object.assign({hide:!1,pin:!1},i),t.options.toolbarConfig.hide?this.element.classList.add("vditor-toolbar--hide"):this.element.classList.remove("vditor-toolbar--hide"),t.options.toolbarConfig.pin?this.element.classList.add("vditor-toolbar--pin"):this.element.classList.remove("vditor-toolbar--pin")},e.prototype.genItem=function(t,i,r){var a;switch(i.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":a=new $e(t,i);break;case"emoji":a=new Jo(t,i);break;case"headings":a=new ss(t,i);break;case"|":a=new Zo;break;case"br":a=new zo;break;case"undo":a=new As(t,i);break;case"redo":a=new _s(t,i);break;case"help":a=new cs(t,i);break;case"both":a=new Bo(t,i);break;case"preview":a=new Cs(t,i);break;case"fullscreen":a=new as(t,i);break;case"upload":a=new Os(t,i);break;case"record":a=new Ms(t,i);break;case"info":a=new hs(t,i);break;case"edit-mode":a=new po(t,i);break;case"devtools":a=new Go(t,i);break;case"outdent":a=new ys(t,i);break;case"indent":a=new ds(t,i);break;case"outline":a=new Es(t,i);break;case"insert-after":a=new ms(t,i);break;case"insert-before":a=new vs(t,i);break;case"code-theme":a=new Uo(t,i);break;case"content-theme":a=new $o(t,i);break;case"export":a=new is(t,i);break;default:a=new Yo(t,i);break}if(a){var l=i.name;return(l==="br"||l==="|")&&(l=l+r),this.elements[l]=a.element,a.element}},e}(),Rs=c(192),Hs=function(){function e(){this.stackSize=50,this.resetStack(),this.dmp=new Rs}return e.prototype.clearStack=function(t){this.resetStack(),this.resetIcon(t)},e.prototype.resetIcon=function(t){t.toolbar&&(this[t.currentMode].undoStack.length>1?E(t.toolbar.elements,["undo"]):b(t.toolbar.elements,["undo"]),this[t.currentMode].redoStack.length!==0?E(t.toolbar.elements,["redo"]):b(t.toolbar.elements,["redo"]))},e.prototype.undo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"&&!(this[t.currentMode].undoStack.length<2)){var i=this[t.currentMode].undoStack.pop();i&&(this[t.currentMode].redoStack.push(i),this.renderDiff(i,t),this[t.currentMode].hasUndo=!0,x(t,["hint"]))}},e.prototype.redo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"){var i=this[t.currentMode].redoStack.pop();i&&(this[t.currentMode].undoStack.push(i),this.renderDiff(i,t,!0))}},e.prototype.recordFirstPosition=function(t,i){if(getSelection().rangeCount!==0&&!(this[t.currentMode].undoStack.length!==1||this[t.currentMode].undoStack[0].length===0||this[t.currentMode].redoStack.length>0)&&!((0,d.gm)()&&i.key==="Backspace")&&!(0,d.nr)()){var r=this.addCaret(t);r.replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[t.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[t.currentMode].undoStack[0][0].diffs[0][1]=r,this[t.currentMode].lastText=r)}},e.prototype.addToUndoStack=function(t){var i=this.addCaret(t,!0),r=this.dmp.diff_main(i,this[t.currentMode].lastText,!0),a=this.dmp.patch_make(i,this[t.currentMode].lastText,r);a.length===0&&this[t.currentMode].undoStack.length>0||(this[t.currentMode].lastText=i,this[t.currentMode].undoStack.push(a),this[t.currentMode].undoStack.length>this.stackSize&&this[t.currentMode].undoStack.shift(),this[t.currentMode].hasUndo&&(this[t.currentMode].redoStack=[],this[t.currentMode].hasUndo=!1,b(t.toolbar.elements,["redo"])),this[t.currentMode].undoStack.length>1&&E(t.toolbar.elements,["undo"]))},e.prototype.renderDiff=function(t,i,r){r===void 0&&(r=!1);var a;if(r){var l=this.dmp.patch_deepCopy(t).reverse();l.forEach(function(_){_.diffs.forEach(function(D){D[0]=-D[0]})}),a=this.dmp.patch_apply(l,this[i.currentMode].lastText)[0]}else a=this.dmp.patch_apply(t,this[i.currentMode].lastText)[0];if(this[i.currentMode].lastText=a,i[i.currentMode].element.innerHTML=a,i.currentMode!=="sv"&&(i[i.currentMode].element.querySelectorAll(".vditor-".concat(i.currentMode,"__preview")).forEach(function(_){_.parentElement.querySelector(".language-echarts")&&(i.currentMode==="ir"?_.parentElement.outerHTML=i.lute.SpinVditorIRDOM(_.parentElement.outerHTML):_.parentElement.outerHTML=i.lute.SpinVditorDOM(_.parentElement.outerHTML))}),i[i.currentMode].element.querySelectorAll(".vditor-".concat(i.currentMode,"__preview[data-render='2']")).forEach(function(_){ce(_,i)})),i[i.currentMode].element.querySelector("wbr"))(0,j.ir)(i[i.currentMode].element,i[i.currentMode].element.ownerDocument.createRange()),We(i);else{var w=getSelection().getRangeAt(0);w.setEndBefore(i[i.currentMode].element),w.collapse(!1)}ne(i),xe(i,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),fn(i),i[i.currentMode].element.querySelectorAll(".vditor-".concat(i.currentMode,"__preview[data-render='2']")).forEach(function(_){ce(_,i)}),this[i.currentMode].undoStack.length>1?E(i.toolbar.elements,["undo"]):b(i.toolbar.elements,["undo"]),this[i.currentMode].redoStack.length!==0?E(i.toolbar.elements,["redo"]):b(i.toolbar.elements,["redo"])},e.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},e.prototype.addCaret=function(t,i){i===void 0&&(i=!1);var r;if(getSelection().rangeCount!==0&&!t[t.currentMode].element.querySelector("wbr")){var a=getSelection().getRangeAt(0);if(t[t.currentMode].element.contains(a.startContainer)){r=a.cloneRange();var l=document.createElement("span");l.className="vditor-wbr",a.insertNode(l)}}var w=t[t.currentMode].element.cloneNode(!0);w.querySelectorAll(".vditor-".concat(t.currentMode,"__preview[data-render='1']")).forEach(function(D){D.firstElementChild&&(D.firstElementChild.classList.contains("language-echarts")||D.firstElementChild.classList.contains("language-plantuml")||D.firstElementChild.classList.contains("language-mindmap")?(D.firstElementChild.removeAttribute("_echarts_instance_"),D.firstElementChild.removeAttribute("data-processed"),D.firstElementChild.innerHTML=D.previousElementSibling.firstElementChild.innerHTML,D.setAttribute("data-render","2")):D.firstElementChild.classList.contains("language-math")&&(D.setAttribute("data-render","2"),D.firstElementChild.textContent=D.firstElementChild.getAttribute("data-math"),D.firstElementChild.removeAttribute("data-math")))});var _=w.innerHTML;return t[t.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(D){D.remove()}),i&&r&&(0,j.jl)(r),_.replace('<span class="vditor-wbr"></span>',"<wbr>")},e}(),Is=c(905),Ns=function(){function e(t){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:h.Y.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},customRenders:[],debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"👍","-1":"👎",confused:"😕",eyes:"👀️",heart:"❤️",rocket:"🚀️",smile:"😄",tada:"🎉️"},emojiPath:"".concat(h.Y.CDN,"/dist/images/emoji"),extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:h.Y.HLJS_OPTIONS,markdown:h.Y.MARKDOWN_OPTIONS,math:h.Y.MATH_OPTIONS,maxWidth:800,mode:"both",theme:h.Y.THEME_OPTIONS,render:{media:{enable:!0}}},link:{isOpen:!0},image:{isPreview:!0},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(i){return i.replace(/\W/g,"")},linkToImgUrl:"",max:10*1024*1024,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=t}return e.prototype.merge=function(){var t,i,r,a,l,w,_,D,L;this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),!((i=(t=this.options.preview)===null||t===void 0?void 0:t.theme)===null||i===void 0)&&i.list&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),!((l=(a=(r=this.options.preview)===null||r===void 0?void 0:r.render)===null||a===void 0?void 0:a.media)===null||l===void 0)&&l.enable&&(this.defaultOptions.preview.render.media.enable=this.options.preview.render.media.enable),!((w=this.options.hint)===null||w===void 0)&&w.emoji&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment),this.options.cdn&&(!((D=(_=this.options.preview)===null||_===void 0?void 0:_.theme)===null||D===void 0)&&D.path||(this.defaultOptions.preview.theme.path="".concat(this.options.cdn,"/dist/css/content-theme")),!((L=this.options.hint)===null||L===void 0)&&L.emojiPath||(this.defaultOptions.hint.emojiPath="".concat(this.options.cdn,"/dist/images/emoji"))));var H=(0,Is.h)(this.defaultOptions,this.options);if(H.cache.enable&&!H.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return H},e.prototype.mergeToolbar=function(t){var i=this,r=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"⌘E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"⌘H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"⌘B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"⌘I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"⌘D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"⌘K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"⌘L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"⌘O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"⌘J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"⇧⌘I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"⇧⌘O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"⌘;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"⇧⌘H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"⌘U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"⌘G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"⇧⌘B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"⇧⌘E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"⌘M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"⌘Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"⌘Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"⌘'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"⌘P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],a=[];return t.forEach(function(l){var w=l;r.forEach(function(_){typeof l=="string"&&_.name===l&&(w=_),typeof l=="object"&&_.name===l.name&&(w=Object.assign({},_,l))}),l.toolbar&&(w.toolbar=i.mergeToolbar(l.toolbar)),a.push(w)}),a},e}(),js=function(){function e(t){var i=this;this.composingLock=!1,this.commentIds=[];var r=document.createElement("div");r.className="vditor-wysiwyg",r.innerHTML='<pre class="vditor-reset" placeholder="'.concat(t.options.placeholder,`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`).concat(window.VditorI18n.comment,`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`),this.element=r.firstElementChild,this.popover=r.firstElementChild.nextElementSibling,this.selectPopover=r.lastElementChild,this.bindEvent(t),Ti(t,this.element),wr(t,this.element),ki(t,this.element),Li(t,this.element),Ai(t,this.element),Mi(t,this.element),xi(t,this.element,this.copy),_i(t,this.element,this.copy),t.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var a=Lute.NewNodeID(),l=getSelection().getRangeAt(0),w=l.cloneRange(),_=l.extractContents(),D,L,H=!1,z=!1;_.childNodes.forEach(function(K,le){var ee=!1;if(K.nodeType===3?ee=!0:K.classList.contains("vditor-comment")?K.classList.contains("vditor-comment")&&K.setAttribute("data-cmtids",K.getAttribute("data-cmtids")+" "+a):ee=!0,ee)if(K.nodeType!==3&&K.getAttribute("data-block")==="0"&&le===0&&w.startOffset>0)K.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(a,'">').concat(K.innerHTML,"</span>"),D=K;else if(K.nodeType!==3&&K.getAttribute("data-block")==="0"&&le===_.childNodes.length-1&&w.endOffset<w.endContainer.textContent.length)K.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(a,'">').concat(K.innerHTML,"</span>"),L=K;else if(K.nodeType!==3&&K.getAttribute("data-block")==="0")le===0?H=!0:le===_.childNodes.length-1&&(z=!0),K.innerHTML='<span class="vditor-comment" data-cmtids="'.concat(a,'">').concat(K.innerHTML,"</span>");else{var W=document.createElement("span");W.classList.add("vditor-comment"),W.setAttribute("data-cmtids",a),K.parentNode.insertBefore(W,K),W.appendChild(K)}});var X=(0,g.pt)(w.startContainer);X&&(D?(X.insertAdjacentHTML("beforeend",D.innerHTML),D.remove()):X.textContent.trim().replace(h.Y.ZWSP,"")===""&&H&&X.remove());var Z=(0,g.pt)(w.endContainer);Z&&(L?(Z.insertAdjacentHTML("afterbegin",L.innerHTML),L.remove()):Z.textContent.trim().replace(h.Y.ZWSP,"")===""&&z&&Z.remove()),l.insertNode(_),t.options.comment.add(a,l.toString(),i.getComments(t,!0)),Ie(t,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),i.hideComment()})}return e.prototype.getComments=function(t,i){var r=this;if(i===void 0&&(i=!1),t.currentMode==="wysiwyg"&&t.options.comment.enable){this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(l){r.commentIds=r.commentIds.concat(l.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var a=[];if(i)return this.commentIds.forEach(function(l){a.push({id:l,top:r.element.querySelector('.vditor-comment[data-cmtids="'.concat(l,'"]')).offsetTop})}),a}else return[]},e.prototype.triggerRemoveComment=function(t){var i=function(l,w){var _=new Set(w);return l.filter(function(D){return!_.has(D)})};if(t.currentMode==="wysiwyg"&&t.options.comment.enable&&t.wysiwyg.commentIds.length>0){var r=JSON.parse(JSON.stringify(this.commentIds));this.getComments(t);var a=i(r,this.commentIds);a.length>0&&t.options.comment.remove(a)}},e.prototype.showComment=function(){var t=(0,j.Ey)(this.element);this.selectPopover.setAttribute("style","left:".concat(t.left,"px;display:block;top:").concat(Math.max(-8,t.top-21),"px"))},e.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},e.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},e.prototype.copy=function(t,i){var r=getSelection().getRangeAt(0);if(r.toString()!==""){t.stopPropagation(),t.preventDefault();var a=(0,g._Y)(r.startContainer,"CODE"),l=(0,g._Y)(r.endContainer,"CODE");if(a&&l&&l.isSameNode(a)){var w="";a.parentElement.tagName==="PRE"?w=r.toString():w="`"+r.toString()+"`",t.clipboardData.setData("text/plain",w),t.clipboardData.setData("text/html","");return}var _=(0,g._Y)(r.startContainer,"A"),D=(0,g._Y)(r.endContainer,"A");if(_&&D&&D.isSameNode(_)){var L=_.getAttribute("title")||"";L&&(L=' "'.concat(L,'"')),t.clipboardData.setData("text/plain","[".concat(r.toString(),"](").concat(_.getAttribute("href")).concat(L,")")),t.clipboardData.setData("text/html","");return}var H=document.createElement("div");H.appendChild(r.cloneContents()),t.clipboardData.setData("text/plain",i.lute.VditorDOM2Md(H.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var i=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){if(x(t,["hint"]),!(i.popover.style.display!=="block"||i.selectPopover.style.display!=="block")){var r=parseInt(i.popover.getAttribute("data-top"),10);if(t.options.height!=="auto"){if(t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0){var a=Math.max(window.scrollY-t.element.offsetTop-8,Math.min(r-t.wysiwyg.element.scrollTop,i.element.clientHeight-21))+"px";i.popover.style.display==="block"&&(i.popover.style.top=a),i.selectPopover.style.display==="block"&&(i.selectPopover.style.top=a)}return}else if(!t.options.toolbarConfig.pin)return;var l=Math.max(r,window.scrollY-t.element.offsetTop-8)+"px";i.popover.style.display==="block"&&(i.popover.style.top=l),i.selectPopover.style.display==="block"&&(i.selectPopover.style.top=l)}}),this.element.addEventListener("scroll",function(){if(x(t,["hint"]),t.options.comment&&t.options.comment.enable&&t.options.comment.scroll&&t.options.comment.scroll(t.wysiwyg.element.scrollTop),i.popover.style.display==="block"){var r=parseInt(i.popover.getAttribute("data-top"),10)-t.wysiwyg.element.scrollTop,a=-8;t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0&&(a=window.scrollY-t.element.offsetTop+a);var l=Math.max(a,Math.min(r,i.element.clientHeight-21))+"px";i.popover.style.top=l,i.selectPopover.style.top=l}}),this.element.addEventListener("paste",function(r){Kn(t,r,{pasteCode:function(a){var l=(0,j.RN)(t),w=document.createElement("template");w.innerHTML=a,l.insertNode(w.content.cloneNode(!0));var _=(0,g.Th)(l.startContainer,"data-block","0");_?_.outerHTML=t.lute.SpinVditorDOM(_.outerHTML):t.wysiwyg.element.innerHTML=t.lute.SpinVditorDOM(t.wysiwyg.element.innerHTML),(0,j.ir)(t.wysiwyg.element,l)}})}),this.element.addEventListener("compositionstart",function(){i.composingLock=!0}),this.element.addEventListener("compositionend",function(r){var a=(0,O.c)(getSelection().getRangeAt(0).startContainer);if(a&&a.textContent===""){ne(t);return}(0,d.gm)()||$n(t,getSelection().getRangeAt(0).cloneRange(),r),i.composingLock=!1}),this.element.addEventListener("input",function(r){if(!(r.inputType==="deleteByDrag"||r.inputType==="insertFromDrop")){if(i.preventInput){i.preventInput=!1,Ie(t);return}if(i.composingLock||r.data==="‘"||r.data==="“"||r.data==="《"){Ie(t);return}var a=getSelection().getRangeAt(0),l=(0,g.pt)(a.startContainer);if(l||(Ei(t,a),l=(0,g.pt)(a.startContainer)),!!l){for(var w=(0,j.ED)(l,t.wysiwyg.element,a).start,_=!0,D=w-1;D>l.textContent.substr(0,w).lastIndexOf(`
`);D--)if(l.textContent.charAt(D)!==" "&&l.textContent.charAt(D)!=="	"){_=!1;break}w===0&&(_=!1);for(var L=!0,D=w-1;D<l.textContent.length;D++)if(l.textContent.charAt(D)!==" "&&l.textContent.charAt(D)!==`
`){L=!1;break}L&&/^#{1,6} $/.test(l.textContent)&&(L=!1);var H=(0,O.c)(getSelection().getRangeAt(0).startContainer);if(H&&H.textContent===""&&(ne(t),H.remove()),_&&l.getAttribute("data-type")!=="code-block"||L||Hi(l.innerHTML)||Ri(l.innerHTML)&&l.previousElementSibling){typeof t.options.input=="function"&&t.options.input(C(t));return}r.inputType==="insertParagraph"&&i.element.innerHTML==="<p><br></p><p><br></p>"&&l.previousElementSibling.remove(),$n(t,a,r)}}}),this.element.addEventListener("click",function(r){if(r.target.tagName==="INPUT"){var a=r.target;a.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),i.preventInput=!0,getSelection().rangeCount>0&&(0,j.jl)(getSelection().getRangeAt(0)),Ie(t);return}if(r.target.tagName==="IMG"&&!r.target.parentElement.classList.contains("vditor-wysiwyg__preview")){r.target.getAttribute("data-type")==="link-ref"?br(t,r.target):co(r,t);return}var l=(0,g._Y)(r.target,"A");if(l){t.options.link.click?t.options.link.click(l):t.options.link.isOpen&&window.open(l.getAttribute("href")),r.preventDefault();return}var w=(0,j.RN)(t);if(r.target.isEqualNode(i.element)&&i.element.lastElementChild&&w.collapsed){var _=i.element.lastElementChild.getBoundingClientRect();r.y>_.top+_.height&&(i.element.lastElementChild.tagName==="P"&&i.element.lastElementChild.textContent.trim().replace(h.Y.ZWSP,"")===""?(w.selectNodeContents(i.element.lastElementChild),w.collapse(!1)):(i.element.insertAdjacentHTML("beforeend",'<p data-block="0">'.concat(h.Y.ZWSP,"<wbr></p>")),(0,j.ir)(i.element,w)))}Wt(t);var D=(0,g.KJ)(r.target,"vditor-wysiwyg__preview");D||(D=(0,g.KJ)((0,j.RN)(t).startContainer,"vditor-wysiwyg__preview")),D&&_n(D,t),J(r,t)}),this.element.addEventListener("keyup",function(r){if(!(r.isComposing||(0,d._0)(r))){r.key==="Enter"&&We(t),(r.key==="Backspace"||r.key==="Delete")&&t.wysiwyg.element.innerHTML!==""&&t.wysiwyg.element.childNodes.length===1&&t.wysiwyg.element.firstElementChild&&t.wysiwyg.element.firstElementChild.tagName==="P"&&t.wysiwyg.element.firstElementChild.childElementCount===0&&(t.wysiwyg.element.textContent===""||t.wysiwyg.element.textContent===`
`)&&(t.wysiwyg.element.innerHTML="");var a=(0,j.RN)(t);if(r.key==="Backspace"&&(0,d.gm)()&&a.startContainer.textContent===`
`&&a.startOffset===1&&(a.startContainer.textContent=""),Ei(t,a),Wt(t),!(r.key!=="ArrowDown"&&r.key!=="ArrowRight"&&r.key!=="Backspace"&&r.key!=="ArrowLeft"&&r.key!=="ArrowUp")){(r.key==="ArrowLeft"||r.key==="ArrowRight")&&t.hint.render(t);var l=(0,g.KJ)(a.startContainer,"vditor-wysiwyg__preview");if(!l&&a.startContainer.nodeType!==3&&a.startOffset>0){var w=a.startContainer;w.classList.contains("vditor-wysiwyg__block")&&(l=w.lastElementChild)}if(l){var _=l.previousElementSibling;if(_.style.display==="none"){r.key==="ArrowDown"||r.key==="ArrowRight"?_n(l,t):_n(l,t,!1);return}var D=l.previousElementSibling;if(D.tagName==="PRE"&&(D=D.firstElementChild),r.key==="ArrowDown"||r.key==="ArrowRight"){var w=l.parentElement,L=cn(w);if(L&&L.nodeType!==3){var H=L.querySelector(".vditor-wysiwyg__preview");if(H){_n(H,t);return}}if(L.nodeType===3){for(;L.textContent.length===0&&L.nextSibling;)L=L.nextSibling;a.setStart(L,1)}else a.setStart(L.firstChild,0)}else a.selectNodeContents(D),a.collapse(!1)}}}})},e}(),Bs=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(t,i);function r(){this.constructor=t}t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),zs=function(e){Bs(t,e);function t(i,r){var a=e.call(this)||this;if(a.version=h.g,typeof i=="string"){if(r?r.cache?r.cache.id||(r.cache.id="vditor".concat(i)):r.cache={id:"vditor".concat(i)}:r={cache:{id:"vditor".concat(i)}},!document.getElementById(i))return a.showErrorTip("Failed to get element by id: ".concat(i)),a;i=document.getElementById(i)}var l=new Ns(r),w=l.merge();if(w.i18n)window.VditorI18n=w.i18n,a.init(i,w);else if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(w.lang)){var _="vditorI18nScript",D=_+w.lang;document.querySelectorAll('head script[id^="'.concat(_,'"]')).forEach(function(L){L.id!==D&&document.head.removeChild(L)}),(0,S.Z)("".concat(w.cdn,"/dist/js/i18n/").concat(w.lang,".js"),D).then(function(){a.init(i,w)}).catch(function(L){a.showErrorTip("GET ".concat(w.cdn,"/dist/js/i18n/").concat(w.lang,".js net::ERR_ABORTED 404 (Not Found)"))})}else throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");return a}return t.prototype.showErrorTip=function(i){var r=new Yr;document.body.appendChild(r.element),r.show(i,0)},t.prototype.updateToolbarConfig=function(i){this.vditor.toolbar.updateConfig(this.vditor,i)},t.prototype.setTheme=function(i,r,a,l){this.vditor.options.theme=i,Oe(this.vditor),r&&(this.vditor.options.preview.theme.current=r,(0,ue.H)(r,l||this.vditor.options.preview.theme.path)),a&&(this.vditor.options.preview.hljs.style=a,(0,Kr.h)(a,this.vditor.options.cdn))},t.prototype.getValue=function(){return C(this.vditor)},t.prototype.getCurrentMode=function(){return this.vditor.currentMode},t.prototype.focus=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.focus():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.focus():this.vditor.currentMode==="ir"&&this.vditor.ir.element.focus()},t.prototype.blur=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.blur():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.blur():this.vditor.currentMode==="ir"&&this.vditor.ir.element.blur()},t.prototype.disabled=function(){x(this.vditor,["subToolbar","hint","popover"]),b(this.vditor.toolbar.elements,h.Y.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},t.prototype.enable=function(){E(this.vditor.toolbar.elements,h.Y.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},t.prototype.getSelection=function(){if(this.vditor.currentMode==="wysiwyg")return An(this.vditor.wysiwyg.element);if(this.vditor.currentMode==="sv")return An(this.vditor.sv.element);if(this.vditor.currentMode==="ir")return An(this.vditor.ir.element)},t.prototype.renderPreview=function(i){this.vditor.preview.render(this.vditor,i)},t.prototype.getCursorPosition=function(){return(0,j.Ey)(this.vditor[this.vditor.currentMode].element)},t.prototype.isUploading=function(){return this.vditor.upload.isUploading},t.prototype.clearCache=function(){this.vditor.options.cache.enable&&(0,d.D)()&&localStorage.removeItem(this.vditor.options.cache.id)},t.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},t.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},t.prototype.html2md=function(i){return this.vditor.lute.HTML2Md(i)},t.prototype.exportJSON=function(i){return this.vditor.lute.RenderJSON(i)},t.prototype.getHTML=function(){return qr(this.vditor)},t.prototype.tip=function(i,r){this.vditor.tip.show(i,r)},t.prototype.setPreviewMode=function(i){Ni(i,this.vditor)},t.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},t.prototype.updateValue=function(i){document.execCommand("insertHTML",!1,i)},t.prototype.insertValue=function(i,r){r===void 0&&(r=!0);var a=(0,j.RN)(this.vditor);a.collapse(!0);var l=document.createElement("template");l.innerHTML=i,a.insertNode(l.content.cloneNode(!0)),a.collapse(!1),this.vditor.currentMode==="sv"?(this.vditor.sv.preventInput=!0,r&&se(this.vditor)):this.vditor.currentMode==="wysiwyg"?r&&$n(this.vditor,getSelection().getRangeAt(0)):this.vditor.currentMode==="ir"&&(this.vditor.ir.preventInput=!0,r&&V(this.vditor,getSelection().getRangeAt(0),!0))},t.prototype.insertMD=function(i){this.vditor.currentMode==="ir"?(0,j.Z2)(this.vditor.lute.Md2VditorIRDOM(i),this.vditor):this.vditor.currentMode==="wysiwyg"?(0,j.Z2)(this.vditor.lute.Md2VditorDOM(i),this.vditor):Di(this.vditor,i),this.vditor.outline.render(this.vditor),xe(this.vditor)},t.prototype.setValue=function(i,r){var a=this;r===void 0&&(r=!1),this.vditor.currentMode==="sv"?(this.vditor.sv.element.innerHTML="<div data-block='0'>".concat(this.vditor.lute.SpinVditorSVDOM(i),"</div>"),Ge(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):this.vditor.currentMode==="wysiwyg"?yr(this.vditor,i,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(i),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(l){ce(l,a.vditor)}),Rt(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),i||(x(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),r&&this.clearStack()},t.prototype.insertEmptyBlock=function(i){Dn(this.vditor,i)},t.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},t.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var i=document.getElementById("vditorIconScript");i&&i.remove(),this.clearCache(),wi(),this.vditor.wysiwyg.unbindListener()},t.prototype.getCommentIds=function(){return this.vditor.currentMode!=="wysiwyg"?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},t.prototype.hlCommentIds=function(i){if(this.vditor.currentMode==="wysiwyg"){var r=function(a){a.classList.remove("vditor-comment--hover"),i.forEach(function(l){a.getAttribute("data-cmtids").indexOf(l)>-1&&a.classList.add("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a)})}},t.prototype.unHlCommentIds=function(i){if(this.vditor.currentMode==="wysiwyg"){var r=function(a){i.forEach(function(l){a.getAttribute("data-cmtids").indexOf(l)>-1&&a.classList.remove("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a)})}},t.prototype.removeCommentIds=function(i){var r=this;if(this.vditor.currentMode==="wysiwyg"){var a=function(l,w){var _=l.getAttribute("data-cmtids").split(" ");_.find(function(D,L){if(D===w)return _.splice(L,1),!0}),_.length===0?(l.outerHTML=l.innerHTML,(0,j.RN)(r.vditor).collapse(!0)):l.setAttribute("data-cmtids",_.join(" "))};i.forEach(function(l){r.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(w){a(w,l)}),r.vditor.preview.element.style.display!=="none"&&r.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(w){a(w,l)})}),Ie(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})}},t.prototype.init=function(i,r){var a=this;this.vditor={currentMode:r.mode,element:i,hint:new Ao(r.hint.extend),lute:void 0,options:r,originalInnerHTML:i.innerHTML,outline:new Po(window.VditorI18n.outline),tip:new Yr},this.vditor.sv=new No(this.vditor),this.vditor.undo=new Hs,this.vditor.wysiwyg=new js(this.vditor),this.vditor.ir=new Do(this.vditor),this.vditor.toolbar=new Ps(this.vditor),r.resize.enable&&(this.vditor.resize=new Io(this.vditor)),this.vditor.toolbar.elements.devtools&&(this.vditor.devtools=new u),(r.upload.url||r.upload.handler)&&(this.vditor.upload=new yo),(0,S.Z)(r._lutePath||"".concat(r.cdn,"/dist/js/lute/lute.min.js"),"vditorLuteScript").then(function(){a.vditor.lute=(0,Oo.X)({autoSpace:a.vditor.options.preview.markdown.autoSpace,gfmAutoLink:a.vditor.options.preview.markdown.gfmAutoLink,codeBlockPreview:a.vditor.options.preview.markdown.codeBlockPreview,emojiSite:a.vditor.options.hint.emojiPath,emojis:a.vditor.options.hint.emoji,fixTermTypo:a.vditor.options.preview.markdown.fixTermTypo,footnotes:a.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:a.vditor.options.preview.math.inlineDigit,linkBase:a.vditor.options.preview.markdown.linkBase,linkPrefix:a.vditor.options.preview.markdown.linkPrefix,listStyle:a.vditor.options.preview.markdown.listStyle,mark:a.vditor.options.preview.markdown.mark,mathBlockPreview:a.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:a.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:a.vditor.options.preview.markdown.sanitize,toc:a.vditor.options.preview.markdown.toc}),a.vditor.preview=new Ho(a.vditor),Xe(a.vditor),r.after&&r.after(),r.icon&&(0,S.U)("".concat(r.cdn,"/dist/js/icons/").concat(r.icon,".js"),"vditorIconScript")})},t}(m.default);const Fs=zs})(),f=f.default,f})())}(hi)),hi.exports}var Ul=Fl();const vi=Bl(Ul),Vl=Ct({__name:"VditorEditor",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(T,{expose:n,emit:o}){const s=T,c=o,f=ie();let m=null;const h={mode:"ir",height:"auto",minHeight:140,resize:{enable:!0,position:"bottom"},icon:"ant",lang:"zh_CN",theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","|","quote","line","code","inline-code","|","preview","fullscreen"],toolbarConfig:{pin:!0,hideTooltip:!0},counter:{enable:!1},cache:{enable:!0,id:"vue-vditor"},input:y=>{c("update:modelValue",y)},preview:{hljs:{style:"native"},markdown:{listStyle:!0,mark:!0},actions:[]},placeholder:"灵感记录~"};return Bt(async()=>{f.value&&(m=new vi(f.value,{...h,after:()=>{m==null||m.setValue(s.modelValue)}}))}),bi(()=>{m==null||m.destroy()}),n({clear:()=>{m&&(m.setValue(""),c("update:modelValue",""))},insertValue:y=>{m&&(m.insertValue(y),c("update:modelValue",m.getValue()))}}),(y,C)=>(fe(),ve("div",{ref_key:"editorContainer",ref:f,class:"vditor-container"},null,512))}}),$l={class:"bg-gray-800 p-6 rounded-lg"},ql={class:"space-y-4"},Wl={class:"flex justify-end gap-2"},Yl=Ct({__name:"Searchmode",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","search-result"],setup(T,{expose:n,emit:o}){const s=Ne(),f=an().public.baseApi,m=T,h=o,y=ze({get:()=>m.modelValue,set:d=>h("update:modelValue",d)}),C=()=>{h("update:modelValue",!1)},S=ie(""),u=async()=>{var d,p;if(!S.value.trim()){s.add({title:"提示",description:"请输入搜索关键词",color:"yellow"});return}try{const{data:v,error:E}=await Sl("/messages/search",{method:"GET",baseURL:f,params:{keyword:S.value,page:1,pageSize:10}},"$4cD5OWGgav");if(E.value)throw new Error(((d=E.value)==null?void 0:d.message)||"网络请求失败");if(!v.value)throw new Error("未收到服务器响应");if(v.value.code===1)h("search-result",v.value),h("update:modelValue",!1),S.value="",s.add({title:"成功",description:"搜索完成",color:"green"});else throw new Error(((p=v.value)==null?void 0:p.msg)||"搜索失败")}catch(v){console.error("Search error:",v),s.add({title:"错误",description:v instanceof Error?v.message:"搜索失败，请稍后重试",color:"red"})}};return n({handleSearch:u}),(d,p)=>{const v=hr,E=_t,b=Ba;return fe(),zt(b,{modelValue:y.value,"onUpdate:modelValue":p[1]||(p[1]=k=>y.value=k)},{default:qe(()=>[$("div",$l,[p[4]||(p[4]=$("h3",{class:"text-xl font-semibold text-white mb-4"},"搜索内容",-1)),$("div",ql,[de(v,{modelValue:S.value,"onUpdate:modelValue":p[0]||(p[0]=k=>S.value=k),placeholder:"输入搜索关键词",class:"w-full",onKeyup:Na(u,["enter"])},null,8,["modelValue"]),$("div",Wl,[de(E,{variant:"solid",color:"gray",onClick:C,class:"bg-gray-700 hover:bg-gray-700 text-white hover:text-white border border-gray-600"},{default:qe(()=>p[2]||(p[2]=[et(" 取消 ")])),_:1}),de(E,{color:"primary",onClick:u,class:"text-white hover:text-white"},{default:qe(()=>p[3]||(p[3]=[et(" 搜索 ")])),_:1})])])])]),_:1},8,["modelValue"])}}}),so=Mn(Yl,[["__scopeId","data-v-07a5871c"]]),Kl=Ia("notify",{state:()=>({config:{webhookEnabled:!1,webhookURL:"",telegramEnabled:!1,telegramToken:"",telegramChatID:"",weworkEnabled:!1,weworkKey:"",feishuEnabled:!1,feishuWebhook:"",feishuSecret:"",twitterEnabled:!1,twitterApiKey:"",twitterApiSecret:"",twitterAccessToken:"",twitterAccessTokenSecret:"",customHttpEnabled:!1,customHttpUrl:"",customHttpMethod:"POST",customHttpHeaders:"",customHttpBody:'{"content":"{{content}}"}'}}),actions:{async fetchConfig(){try{const n=await(await fetch("/api/notify/config",{credentials:"include"})).json();n.code===1&&(this.config=n.data)}catch(T){console.error("获取推送配置失败:",T)}},async saveConfig(T){try{const o=await(await fetch("/api/notify/config",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)})).json();if(o.code===1){const s=o.data||T;return Object.keys(this.config).forEach(c=>{c.endsWith("Enabled")?this.config[c]=!!s[c]&&s[c]!=="false":s[c]!==void 0&&(this.config[c]=s[c])}),!0}return!1}catch(n){return console.error("保存推送配置失败:",n),!1}},async testNotify(T){try{return(await(await fetch("/api/notify/test",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:T})})).json()).code===1}catch(n){return console.error("测试推送失败:",n),!1}},async sendNotify(T){try{let n=T.content;return T.images&&T.images.length>0&&(n+=`

`,T.images.forEach(c=>{n+=`![](${c})
`})),(await(await fetch("/api/notify/send",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:n,format:T.format||"markdown",config:this.config})})).json()).code===1}catch(n){return console.error("发送推送失败:",n),!1}}}}),Gl=Ct({__name:"VideoUpload",emits:["video-uploaded","upload-progress"],setup(T,{emit:n}){const o=n,s=ie(null),c=Ne(),f=an().public.baseApi,m=()=>{var y;(y=s.value)==null||y.click()},h=async y=>{const C=y.target,S=C.files?C.files[0]:null;if(!S){c.add({title:"错误",description:"未选择视频",color:"red"});return}const u=200*1024*1024;if(S.size>u){c.add({title:"错误",description:"视频不能超过200MB",color:"red"});return}const d=new FormData;d.append("video",S);const p=new XMLHttpRequest;p.open("POST",`${f}/videos/upload`,!0),p.withCredentials=!0,p.upload.onprogress=v=>{if(v.lengthComputable){const E=Math.round(v.loaded/v.total*100);o("upload-progress",E)}},p.onload=()=>{if(p.status===200)try{const v=JSON.parse(p.responseText);if(v.code===1&&v.data)o("video-uploaded",v.data),c.add({title:"成功",description:"视频上传成功",color:"green"});else throw new Error(v.msg||"视频上传失败")}catch(v){c.add({title:"错误",description:v.message||"视频上传失败",color:"red"})}else c.add({title:"错误",description:"视频上传失败",color:"red"});o("upload-progress",0),s.value&&(s.value.value="")},p.onerror=()=>{c.add({title:"错误",description:"视频上传失败",color:"red"}),o("upload-progress",0),s.value&&(s.value.value="")},p.send(d)};return(y,C)=>{const S=_t;return fe(),ve("div",null,[$("input",{ref_key:"videoInput",ref:s,type:"file",accept:"video/*",class:"hidden",onChange:h},null,544),de(S,{color:"gray",variant:"solid",size:"sm",icon:"i-mdi-video",class:"cursor-pointer",onClick:m,title:"上传视频"})])}}}),Cn=el(lr.ui.strategy,lr.ui.progress,Tl),Zl=Ct({inheritAttrs:!1,props:{value:{type:Number,default:null},max:{type:[Number,Array],default:100},indicator:{type:Boolean,default:!1},animation:{type:String,default:()=>Cn.default.animation,validator(T){return Object.keys(Cn.animation).includes(T)}},size:{type:String,default:()=>Cn.default.size,validator(T){return Object.keys(Cn.progress.size).includes(T)}},color:{type:String,default:()=>Cn.default.color,validator(T){return lr.ui.colors.includes(T)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(T){const{ui:n,attrs:o}=tl("progress",sr(T,"ui"),Cn,sr(T,"class")),s=ze(()=>Gt(n.value.indicator.container.base,n.value.indicator.container.width,n.value.indicator.container.transition)),c=ze(()=>Gt(n.value.indicator.align,n.value.indicator.width,n.value.indicator.color,n.value.indicator.size[T.size])),f=ze(()=>{var M;const k=[n.value.progress.base,n.value.progress.width,n.value.progress.size[T.size],n.value.progress.rounded,n.value.progress.track,n.value.progress.bar,(M=n.value.progress.color)==null?void 0:M.replaceAll("{color}",T.color),n.value.progress.background,n.value.progress.indeterminate.base,n.value.progress.indeterminate.rounded];return p.value&&k.push(n.value.animation[T.animation]),Gt(...k)}),m=ze(()=>{var k;return Gt(n.value.steps.base,(k=n.value.steps.color)==null?void 0:k.replaceAll("{color}",T.color),n.value.steps.size[T.size])}),h=ze(()=>Gt(n.value.step.base,n.value.step.align)),y=ze(()=>Gt(n.value.step.active)),C=ze(()=>Gt(n.value.step.first));function S(k){return k===Number(T.value)}function u(k){return k===0}function d(k){k=Number(k);const M=[h.value];return u(k)&&M.push(C.value),S(k)&&M.push(y.value),M.join(" ")}const p=ze(()=>T.value===void 0||T.value===null),v=ze(()=>Array.isArray(T.max)),E=ze(()=>p.value?null:Array.isArray(T.max)?T.max.length-1:Number(T.max)),b=ze(()=>{if(!p.value)switch(!0){case T.value<0:return 0;case T.value>E.value:return 100;default:return T.value/E.value*100}});return{ui:n,attrs:o,indicatorContainerClass:s,indicatorClass:c,progressClass:f,stepsClass:m,stepClasses:d,isIndeterminate:p,isSteps:v,realMax:E,percent:b}}}),Xl=["aria-valuemax","aria-valuenow"];function Jl(T,n,o,s,c,f){return fe(),ve("div",{class:St(T.ui.wrapper),role:"progressbar"},[T.indicator||T.$slots.indicator?na(T.$slots,"indicator",nl(Ui({key:0},{percent:T.percent})),()=>[T.isSteps?Le("",!0):(fe(),ve("div",{key:0,class:St(T.indicatorContainerClass),style:on({width:`${T.percent}%`})},[$("div",{class:St(T.indicatorClass)},Ze(Math.round(T.percent))+"% ",3)],6))],!0):Le("",!0),$("progress",Ui({"aria-valuemax":T.realMax,"aria-valuenow":T.value,class:T.progressClass},{value:T.value,max:T.realMax,...T.attrs}),Ze(T.percent!==void 0?`${Math.round(T.percent)}%`:void 0),17,Xl),T.isSteps?(fe(),ve("div",{key:1,class:St(T.stepsClass)},[(fe(!0),ve(Lt,null,qt(T.max,(m,h)=>(fe(),ve("div",{key:h,class:St(T.stepClasses(h))},[na(T.$slots,`step-${h}`,Ui({ref_for:!0},{step:m}),()=>[et(Ze(m),1)],!0)],2))),128))],2)):Le("",!0)],2)}const Ql=Mn(Zl,[["render",Jl],["__scopeId","data-v-157fbd8e"]]),ec={class:"flex justify-between items-center mb-3"},tc={class:"mb-4"},nc={class:"flex gap-2 mb-3"},ic={key:0,class:"space-y-2 mb-3"},rc={class:"flex items-center gap-2"},ac={class:"flex justify-end mt-2 mb-3"},oc=["src"],sc={key:3,class:"text-sm text-gray-300"},lc={key:4,class:"text-sm text-gray-300"},cc={key:1,class:"flex justify-end mt-2"},uc={key:2,class:"mt-2 text-red-400 text-sm"},dc={key:3,class:"mt-2"},fc={class:"flex items-center gap-2 bg-gray-800 p-2 rounded"},hc=["value"],pc={class:"flex justify-end mt-2"},mc=Ct({__name:"ImageHostingUploader",props:{position:{type:Object,required:!0,default:()=>({x:0,y:0})},editorRef:{type:Object,required:!1,default:null}},emits:["close","upload-success"],setup(T,{emit:n}){const o=T,s=ze(()=>{if(typeof window>"u")return{};const ne=window.innerWidth,J=window.innerHeight,Ce=400,V=500;let N=o.position.x,q=o.position.y;return N+Ce>ne&&(N=ne-Ce-20),N<0&&(N=20),q+V>J&&(q=J-V-20),q<0&&(q=20),ne<768&&(N=(ne-Ce)/2,q=60),{position:"fixed",top:`${q}px`,left:`${N}px`,maxWidth:`${Math.min(Ce,ne-40)}px`,width:"100%",cursor:"move",userSelect:"none",touchAction:"none"}}),c=ie(!1),f=ie({x:0,y:0}),m=ne=>{c.value=!0;const J="touches"in ne?ne.touches[0].clientX:ne.clientX,Ce="touches"in ne?ne.touches[0].clientY:ne.clientY;f.value={x:J-o.position.x,y:Ce-o.position.y},document.addEventListener("mousemove",h),document.addEventListener("touchmove",h),document.addEventListener("mouseup",y),document.addEventListener("touchend",y)},h=ne=>{if(!c.value)return;const J="touches"in ne?ne.touches[0].clientX:ne.clientX,Ce="touches"in ne?ne.touches[0].clientY:ne.clientY;C("update:position",{x:J-f.value.x,y:Ce-f.value.y})},y=()=>{c.value=!1,document.removeEventListener("mousemove",h),document.removeEventListener("touchmove",h),document.removeEventListener("mouseup",y),document.removeEventListener("touchend",y)},C=n,S=Ne(),u=ie("smms"),d=ie(null),p=ie(!1),v=ie(!1),E=ie(0),b=ie(""),k=ie(""),M=ie(""),x=ie(""),A=ie(""),g=ie("main"),O=ie("images/"),I=ie(!1),R=ie(""),P=ie(""),B=ie(""),Y=()=>{var ne;(ne=d.value)==null||ne.click()},G=ne=>{var Ce;p.value=!1;const J=(Ce=ne.dataTransfer)==null?void 0:Ce.files;J&&J.length>0&&me(J[0])},re=ne=>{const Ce=ne.target.files;Ce&&Ce.length>0&&me(Ce[0])},he=ie(null),me=async ne=>{if(!ne.type.startsWith("image/")){M.value="请选择图片文件";return}const J=5*1024*1024;if(ne.size>J){M.value="图片大小不能超过 5MB";return}M.value="",he.value=ne;const Ce=new FileReader;Ce.onload=V=>{var N;b.value=(N=V.target)==null?void 0:N.result},Ce.readAsDataURL(ne)},Me=()=>{if(!k.value){M.value="请先上传图片";return}const ne=`![](${k.value})`;C("upload-success",ne),C("close"),he.value=null,b.value="",k.value="",E.value=0,v.value=!1,M.value=""},Se=async ne=>{try{await navigator.clipboard.writeText(ne),S.add({title:"成功",description:"已复制到剪贴板",color:"green",timeout:2e3})}catch{S.add({title:"错误",description:"复制失败",color:"red",timeout:2e3})}},ke=async()=>{if(!he.value){M.value="请先选择图片";return}v.value=!0,E.value=0,M.value="";try{switch(u.value){case"github":await De(he.value);break;default:throw new Error("未知的图床类型")}}catch(ne){console.error("上传错误:",ne),M.value=ne.message||"上传失败",v.value=!1,ne.name==="AbortError"?M.value="请求超时，请检查网络连接":ne.message.includes("Failed to fetch")&&(M.value="网络请求失败，可能是跨域问题或API不可用")}},De=async ne=>{if(!x.value||!A.value){M.value="请先配置 GitHub Token 和仓库名";return}try{E.value=30;const J=Date.now(),Ce=ne.name.split(".").pop(),V=`${J}.${Ce}`,N=`${O.value}${V}`.replace(/\/\//g,"/"),q=await we(ne),U={message:`Upload image ${V}`,content:q,branch:g.value||"main"};E.value=50;const F=await fetch(`https://api.github.com/repos/${A.value}/contents/${N}`,{method:"PUT",headers:{Authorization:`token ${x.value}`,"Content-Type":"application/json"},body:JSON.stringify(U)});if(E.value=80,!F.ok)throw new Error(`GitHub 上传失败: ${F.status}`);const ye=await F.json();k.value=I.value&&R.value?`https://${R.value}/gh/${A.value}@${g.value||"main"}/${N}`:ye.content.download_url,E.value=100,v.value=!1,S.add({title:"成功",description:`图片已上传到 GitHub${I.value&&R.value?" (CDN加速)":""}`,color:"green",timeout:2e3})}catch(J){console.error("GitHub 上传错误:",J),M.value=J.message||"GitHub 上传失败",v.value=!1}},we=ne=>new Promise((J,Ce)=>{const V=new FileReader;V.onload=()=>J(V.result.split(",")[1]),V.onerror=Ce,V.readAsDataURL(ne)}),ce=()=>{try{const ne={selectedHost:u.value,github:{token:x.value,repo:A.value,branch:g.value,path:O.value,enableCDN:I.value,cdnDomain:R.value},smms:{token:P.value},freeimage:{token:B.value}};localStorage.setItem("imageHostingConfig",JSON.stringify(ne)),S.add({title:"成功",description:"配置已保存",color:"green",timeout:2e3})}catch(ne){console.error("保存配置失败:",ne),S.add({title:"错误",description:"保存配置失败",color:"red",timeout:2e3})}},j=()=>{const ne=localStorage.getItem("imageHostingConfig");if(ne)try{const J=JSON.parse(ne);u.value=J.selectedHost||"smms",J.github&&(x.value=J.github.token||"",A.value=J.github.repo||"",g.value=J.github.branch||"main",O.value=J.github.path||"images/",I.value=J.github.enableCDN||!1,R.value=J.github.cdnDomain||""),J.smms&&(P.value=J.smms.token||""),J.imgtp&&(imgtpToken.value=J.imgtp.token||""),J.freeimage&&(B.value=J.freeimage.token||"")}catch(J){console.error("加载配置失败:",J)}};return ot([u,x,A,g,O,P],()=>{ce()},{deep:!0}),Bt(()=>{j()}),(ne,J)=>{const Ce=_t,V=hr,N=ll,q=yi,U=Ql;return fe(),ve("div",{class:"fixed z-50 bg-black/80 backdrop-blur-sm rounded-lg shadow-lg p-4 text-white",style:on(s.value),onMousedown:m,onTouchstart:m},[$("div",ec,[J[11]||(J[11]=$("h3",{class:"text-lg font-medium"},"图床上传",-1)),de(Ce,{icon:"i-heroicons-x-mark",color:"gray",variant:"ghost",size:"xs",onClick:J[0]||(J[0]=F=>ne.$emit("close"))})]),$("div",tc,[$("div",nc,[de(Ce,{color:u.value==="github"?"blue":"gray",variant:"solid",size:"sm",onClick:J[1]||(J[1]=F=>u.value="github")},{default:qe(()=>J[12]||(J[12]=[et(" GitHub ")])),_:1},8,["color"])]),u.value==="github"?(fe(),ve("div",ic,[de(V,{modelValue:x.value,"onUpdate:modelValue":J[2]||(J[2]=F=>x.value=F),placeholder:"GitHub Token",size:"sm",type:"password"},null,8,["modelValue"]),de(V,{modelValue:A.value,"onUpdate:modelValue":J[3]||(J[3]=F=>A.value=F),placeholder:"仓库名 (用户名/仓库)",size:"sm"},null,8,["modelValue"]),de(V,{modelValue:g.value,"onUpdate:modelValue":J[4]||(J[4]=F=>g.value=F),placeholder:"分支名 (默认: main)",size:"sm"},null,8,["modelValue"]),de(V,{modelValue:O.value,"onUpdate:modelValue":J[5]||(J[5]=F=>O.value=F),placeholder:"存储路径 (默认: images/)",size:"sm"},null,8,["modelValue"]),$("div",rc,[de(N,{modelValue:I.value,"onUpdate:modelValue":J[6]||(J[6]=F=>I.value=F)},null,8,["modelValue"]),J[13]||(J[13]=$("span",{class:"text-sm"},"启用CDN加速",-1))]),I.value?(fe(),zt(V,{key:0,modelValue:R.value,"onUpdate:modelValue":J[7]||(J[7]=F=>R.value=F),placeholder:"输入CDN域名 (如: jsd.cdn.noisework.cn)",size:"sm"},null,8,["modelValue"])):Le("",!0)])):Le("",!0),$("div",ac,[de(Ce,{color:"green",variant:"solid",size:"sm",icon:"i-heroicons-check",onClick:ce},{default:qe(()=>J[14]||(J[14]=[et(" 保存配置 ")])),_:1})]),$("div",{class:St(["flex flex-col items-center justify-center border-2 border-dashed border-gray-500 rounded-lg p-4 cursor-pointer hover:border-blue-400 transition-colors",{"border-blue-400":p.value}]),onClick:Y,onDragover:J[8]||(J[8]=Vi(F=>p.value=!0,["prevent"])),onDragleave:J[9]||(J[9]=Vi(F=>p.value=!1,["prevent"])),onDrop:Vi(G,["prevent"])},[$("input",{ref_key:"fileInput",ref:d,type:"file",accept:"image/*",onChange:re,class:"hidden"},null,544),!v.value&&!b.value?(fe(),zt(q,{key:0,name:"i-heroicons-cloud-arrow-up",class:"w-10 h-10 text-gray-400 mb-2"})):Le("",!0),b.value&&!v.value?(fe(),ve("img",{key:1,src:b.value,class:"max-h-32 max-w-full mb-2 rounded"},null,8,oc)):Le("",!0),v.value?(fe(),zt(U,{key:2,value:E.value,color:"blue",class:"w-full mb-2"},null,8,["value"])):Le("",!0),!v.value&&!b.value?(fe(),ve("p",sc," 点击或拖拽图片到此处上传 ")):Le("",!0),v.value?(fe(),ve("p",lc," 上传中... "+Ze(E.value)+"% ",1)):Le("",!0)],34),b.value&&!v.value&&!k.value?(fe(),ve("div",cc,[de(Ce,{color:"blue",variant:"solid",size:"sm",icon:"i-heroicons-cloud-arrow-up",onClick:ke},{default:qe(()=>J[15]||(J[15]=[et(" 开始上传 ")])),_:1})])):Le("",!0),M.value?(fe(),ve("div",uc,Ze(M.value),1)):Le("",!0),k.value?(fe(),ve("div",dc,[$("div",fc,[$("input",{type:"text",value:k.value,readonly:"",class:"bg-transparent flex-1 text-sm outline-none"},null,8,hc),de(Ce,{icon:"i-heroicons-clipboard",color:"gray",variant:"ghost",size:"xs",onClick:J[10]||(J[10]=F=>Se(k.value))})]),$("div",pc,[de(Ce,{color:"blue",variant:"solid",size:"sm",onClick:Me},{default:qe(()=>J[16]||(J[16]=[et(" 插入图片 ")])),_:1})])])):Le("",!0)])],36)}}}),gc=Mn(mc,[["__scopeId","data-v-a97867d7"]]),vc={class:"flex justify-between mb-3"},bc={class:"flex justify-start items-center gap-2"},yc={class:"flex gap-2"},wc={href:"/rss",target:"_blank"},Ec={class:"flex justify-between items-center"},Sc={class:"flex items-center justify-start gap-2"},Cc={key:0,class:"w-full mt-2"},Tc={class:"bg-gray-700 rounded h-2"},kc={class:"text-xs text-gray-300 mt-1 text-right"},Mc={class:"flex gap-2"},xc={key:0,class:"mx-auto sm:max-w-2xl mt-5 backdrop-blur-sm bg-black/40 p-4 rounded-md"},_c={class:"prose prose-invert max-w-none"},Lc=["innerHTML"],Ac={key:0,class:"prose prose-invert max-w-none"},Dc=["innerHTML"],Oc=Ct({__name:"AddForm",emits:["search-result","video-uploaded","before-upload","upload-progress"],setup(T,{emit:n}){const o=ie(!1),s=ie({x:400,y:320}),c=we=>{var ce;(ce=I.value)!=null&&ce.insertValue&&I.value.insertValue(we),o.value=!1},f=we=>{s.value=we},m=ie(0),h=we=>{m.value=we},y=ie(!1),C=n,S=we=>{C("search-result",we)},u=Ne(),d=an().public.baseApi,{save:p}=Ua(),v=zn("showHeatmap");fi("showHeatmap",v);const E=()=>{v.value=!v.value},b=ie(""),k=ie(""),M=ie(""),x=ie(typeof window<"u"&&localStorage.getItem("postPrivate")==="true"),A=zn("contentTheme"),g=zn("toggleContentTheme"),O=ie(null),I=ie(null),R=ze(()=>x.value?"i-mdi-eye-off-outline":"i-mdi-eye-outline");Kl();const P=ie(localStorage.getItem("enableNotify")==="true"),B=()=>{b.value="",k.value="",M.value="",I.value&&I.value.clear()},Y=ja(),G=()=>Y.isLogin?!0:(u.add({title:"提示",description:"请先登录",color:"orange",timeout:2e3}),!1),re=()=>{const we=document.getElementById("file-input");we&&we.click()},he=async we=>{var N;if(!G())return;const ce=we.target,j=ce.files?ce.files[0]:null;if(!j){u.add({title:"错误",description:"没有选择文件",color:"red",timeout:2e3});return}const ne=["image/jpeg","image/png","image/gif","image/webp"],J=[".jpg",".jpeg",".png",".gif",".webp"],Ce=j.name.toLowerCase().substring(j.name.lastIndexOf("."));if(!ne.includes(j.type)||!J.includes(Ce)){u.add({title:"错误",description:"仅支持 JPG、PNG、GIF、WEBP 格式的图片",color:"red",timeout:2e3});return}const V=5*1024*1024;if(j.size>V){u.add({title:"错误",description:"图片大小不能超过 5MB",color:"red",timeout:2e3});return}try{const q=new FormData;q.append("image",j);const U=await fetch(`${d}/images/upload`,{method:"POST",body:q,credentials:"include"});if(!U.ok){const ye=await U.json();throw new Error(ye.msg||"图片上传失败")}const F=await U.json();if(F.code===1&&F.data){if((N=I.value)!=null&&N.insertValue){const Q=`
![](${typeof window<"u"?window.location.origin:""}${d}${F.data})
`;I.value.insertValue(Q)}u.add({title:"成功",description:"图片上传成功",color:"green",timeout:2e3})}else throw new Error(F.msg||"图片上传失败")}catch(q){console.error("上传错误:",q),u.add({title:"错误",description:q.message||"图片上传失败",color:"red",timeout:2e3})}finally{O.value&&(O.value.value="")}},me=we=>{var J;const ce=typeof window<"u"?window.location.origin:"",j=we.startsWith("/")?we:`/${we}`,ne=`<video width="100%" height="100%" src="${ce}${j}" controls loop></video>
`;(J=I.value)!=null&&J.insertValue&&I.value.insertValue(ne)};ot(k,we=>{M.value=vi.md2html(we||"")}),ot(()=>Y.isLogin,we=>{we&&(P.value=localStorage.getItem("enableNotify")==="true")},{immediate:!0}),Bt(async()=>{Ae.bind("[data-fancybox]",{}),Y.isLogin||localStorage.getItem("token")&&Y.fetchUserInfo&&await Y.fetchUserInfo(),x.value=localStorage.getItem("postPrivate")==="true",A.value=localStorage.getItem("contentTheme")||A.value}),bi(()=>{Ae.destroy()});const Me=()=>{P.value=!P.value,localStorage.setItem("enableNotify",P.value.toString())},Se=()=>{x.value=!x.value,localStorage.setItem("postPrivate",x.value?"true":"false")},ke=we=>Y.isLogin?!0:(u.add({title:"提示",description:"请登录后操作",color:"orange",timeout:2e3}),we.preventDefault&&we.preventDefault(),!1),De=async()=>{if(!G())return;if(!k.value.trim()){u.add({title:"错误",description:"请输入内容或上传图片/视频",color:"red",timeout:2e3});return}const we={username:b.value,content:k.value,private:x.value,notify:P.value};try{await p(we)&&B()}catch(ce){console.error("发布错误:",ce),u.add({title:"错误",description:ce.message||"发布失败",color:"red",timeout:2e3})}};return(we,ce)=>{const j=yi,ne=cl,J=il,Ce=fr;return fe(),ve(Lt,null,[de(Ce,{class:"mx-auto sm:max-w-2xl hover:shadow-md backdrop-blur-sm bg-black/40 shadow-lg text-white"},{default:qe(()=>[$("div",vc,[$("div",bc,[de(j,{name:"i-heroicons-pencil-square",class:"w-6 h-6 transition-all duration-300 hover:scale-110 hover:text-blue-400 animate-pulse"}),ce[6]||(ce[6]=$("h2",{class:"text-lg font-bold italic text-white"},"说说·笔记~",-1))]),$("div",yc,[de(ne,null,{default:qe(()=>[$("div",{onClick:ce[0]||(ce[0]=V=>y.value=!0),class:"cursor-pointer flex"},[de(j,{name:"i-heroicons-magnifying-glass",class:"w-5 h-5 text-gray-200"})]),$("button",{onClick:E},[de(j,{name:"i-mdi-calendar-month",class:"w-5 h-5 text-gray-200"})]),$("button",{onClick:ce[1]||(ce[1]=V=>Ee(g)&&Ee(g)()),title:"切换暗黑/白天模式"},[de(j,{name:Ee(A)==="dark"?"i-mdi-weather-night":"i-mdi-white-balance-sunny",class:"w-5 h-5 text-gray-200"},null,8,["name"])]),$("a",wc,[de(j,{name:"i-mdi-rss",class:"w-5 h-5 text-gray-200"})])]),_:1}),de(J,{to:"/status"},{default:qe(()=>[de(j,{name:"i-mdi-server-outline",class:"w-5 h-5 text-gray-200"})]),_:1})])]),$("div",null,[de(Vl,{ref_key:"vditorEditor",ref:I,modelValue:k.value,"onUpdate:modelValue":ce[2]||(ce[2]=V=>k.value=V)},null,8,["modelValue"]),$("div",Ec,[$("div",Sc,[$("input",{id:"file-input",ref_key:"fileInput",ref:O,type:"file",accept:"image/*",onChange:he,class:"hidden",placeholder:"选择图片"},null,544),de(Gl,{onVideoUploaded:me,onBeforeUpload:ke,onUploadProgress:h}),m.value>0&&m.value<100?(fe(),ve("div",Cc,[$("div",Tc,[$("div",{class:"bg-blue-500 h-2 rounded",style:on({width:m.value+"%"})},null,4)]),$("div",kc,Ze(m.value)+"%",1)])):Le("",!0),de(Ee(_t),{color:"gray",variant:"solid",class:"cursor-pointer",size:"sm",icon:"i-fluent-image-20-regular",onClick:re}),de(Ee(_t),{color:"gray",variant:"solid",class:"cursor-pointer",size:"sm",icon:"i-mdi-cloud-upload-outline",onClick:ce[3]||(ce[3]=V=>o.value=!0),title:"图床上传"}),de(Ee(_t),{color:"gray",variant:"solid",size:"sm",onClick:Se,icon:R.value,title:x.value?"设为公开":"设为私密",ui:{tooltip:{text:x.value?"设为公开":"设为私密"}}},null,8,["icon","title","ui"]),de(Ee(_t),{color:"gray",variant:"solid",size:"sm",onClick:Me,icon:P.value?"i-mdi-bell":"i-mdi-bell-off",title:P.value?"关闭推送":"开启推送",ui:{tooltip:{text:P.value?"关闭推送":"开启推送"}},class:"text-gray-600"},null,8,["icon","title","ui"])]),$("div",Mc,[de(Ee(_t),{icon:"i-fluent-broom-16-regular",variant:"solid",color:"gray",size:"sm",onClick:B}),de(Ee(_t),{icon:"i-fluent-add-12-filled",variant:"solid",color:"gray",size:"sm",onClick:De})])])])]),_:1}),M.value?(fe(),ve("div",xc,[$("div",_c,[$("div",{innerHTML:M.value},null,8,Lc)]),ce[7]||(ce[7]=$("hr",{class:"border-gray-600 my-4"},null,-1)),M.value?(fe(),ve("div",Ac,[$("div",{innerHTML:M.value},null,8,Dc)])):Le("",!0)])):Le("",!0),de(so,{modelValue:y.value,"onUpdate:modelValue":ce[4]||(ce[4]=V=>y.value=V),onSearchResult:S},null,8,["modelValue"]),o.value?(fe(),zt(gc,{key:1,position:s.value,onClose:ce[5]||(ce[5]=V=>o.value=!1),onUploadSuccess:c,"onUpdate:position":f},null,8,["position"])):Le("",!0)],64)}}}),Ha=Ct({__name:"MarkdownRenderer",props:{content:{type:String,required:!0},enableGithubCard:{type:Boolean,default:!0}},emits:["tagClick"],setup(T,{emit:n}){const o=/https:\/\/www\.bilibili\.com\/video\/(BV[\w]+)\/?$/,s=/https:\/\/(?:www\.)?youtube\.com\/watch\?v=([\w-]+)|https:\/\/youtu\.be\/([\w-]+)/,c=/https:\/\/music\.163\.com(?:\/#)?\/song\?id=(\d+)/,f=/https:\/\/y\.qq\.com\/n\/yqq\/song(\w+)\.html/,m=/https:\/\/v\.qq\.com\/x\/cover\/\w+\/(\w+)\.html/,h=/https:\/\/open\.spotify\.com\/(track|album|playlist)\/([a-zA-Z0-9]+)/,y=/https:\/\/v\.youku\.com\/v_show\/id_([a-zA-Z0-9]+)\.html/,C=n,S=ie(null);let u=null;const d=T,p=zn("contentTheme"),v=()=>{if(!S.value)return;const g=p&&p.value==="dark";S.value.classList.toggle("theme-dark",!!g),S.value.classList.toggle("theme-light",!g)},E=()=>{var g;if(window.mediumZoom){u&&u.detach();const O=(g=S.value)==null?void 0:g.getElementsByTagName("img");O&&O.length>0&&(u=window.mediumZoom(O,{background:"rgba(0, 0, 0, 0.9)",margin:24,scrollOffset:0}))}},b=new RegExp("(?<!!)\\[([^\\]]+)\\]\\((https:\\/\\/github\\.com\\/([\\w-]+)\\/([\\w.-]+)(?:\\/[^\\s)]*)?)\\)","g"),k=new RegExp(`(?<!["'\\(])\\bhttps:\\/\\/github\\.com\\/([\\w-]+)\\/([\\w.-]+)(?:\\/[^\\s<\\)]*)?\\b`,"g"),M=g=>(d.enableGithubCard&&(g=g.replace(b,(O,I,R,P,B)=>`<div class="github-card" id="${`github-card-${P}-${B}`}" data-owner="${P}" data-repo="${B}">
        <div class="github-card-loading">Loading GitHub Repo...</div>
      </div>`),g=g.replace(k,(O,I,R)=>`<div class="github-card" id="${`github-card-${I}-${R}`}" data-owner="${I}" data-repo="${R}">
        <div class="github-card-loading">Loading GitHub Repo...</div>
      </div>`)),g.replace(o,"<div class='video-wrapper'><iframe src='https://www.bilibili.com/blackboard/html5mobileplayer.html?bvid=$1&as_wide=1&high_quality=1&danmaku=0' scrolling='no' border='0' frameborder='no' framespacing='0' allowfullscreen='true' style='position:absolute;height:100%;width:100%'></iframe></div>").replace(s,"<div class='video-wrapper'><iframe src='https://www.youtube.com/embed/$1$2' title='YouTube video player' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen></iframe></div>").replace(c,"<div class='music-wrapper'><meting-js auto='https://music.163.com/#/song?id=$1'></meting-js></div>").replace(f,"<meting-js auto='https://y.qq.com/n/yqq/song$1.html'></meting-js>").replace(m,"<div class='video-wrapper'><iframe src='//v.qq.com/iframe/player.html?vid=$1' allowFullScreen='true' frameborder='no'></iframe></div>").replace(h,"<div class='spotify-wrapper'><iframe style='border-radius:12px' src='https://open.spotify.com/embed/$1/$2?utm_source=generator&theme=0' width='100%' frameBorder='0' allowfullscreen='' allow='autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture' loading='lazy'></iframe></div>").replace(y,"<div class='video-wrapper'><iframe src='https://player.youku.com/embed/$1' frameborder=0 'allowfullscreen'></iframe></div>")),x=async(g,O,I)=>{try{const R=await fetch(`https://api.github.com/repos/${g}/${O}`);if(!R.ok)return;const P=await R.json(),B=document.getElementById(I);B&&(B.innerHTML=`
        <div class="github-card-header">
          <img src="${P.owner.avatar_url}" class="github-card-avatar" />
          <div>
            <a href="${P.html_url}" target="_blank" class="github-card-title">${P.full_name}</a>
            <div class="github-card-desc">${P.description||""}</div>
          </div>
        </div>
        <div class="github-card-footer">
          <span>⭐ ${P.stargazers_count}</span>
          <span>🍴 ${P.forks_count}</span>
          <span>🛠️ ${P.language||""}</span>
        </div>
      `)}catch{}},A=async g=>{if(S.value)try{if(typeof vi>"u"){console.error("Vditor is not loaded.");return}const I=M(g).replace(/<a /g,'<a target="_blank" ').replace(new RegExp("(?<!<[^>]*)#([^\\s#<>]+)(?![^<]*>)","g"),`<span class="clickable-tag" onclick="window.handleTagClick('$1')" style="cursor: pointer;">#$1</span>`),R=p&&p.value==="dark"?"dark":"light",P=R==="dark"?"github-dark":"github";vi.preview(S.value,I,{mode:"light",lang:"zh_CN",theme:{current:R},hljs:{style:P,lineNumber:!0,enable:!0},after:()=>{var G,re,he;const B=(G=S.value)==null?void 0:G.querySelectorAll("a");B==null||B.forEach(me=>{me.hasAttribute("target")||(me.setAttribute("target","_blank"),me.setAttribute("rel","noopener noreferrer"))}),E(),console.log("Rendering complete."),v();const Y=(re=S.value)==null?void 0:re.querySelectorAll(".clickable-tag");if(Y==null||Y.forEach(me=>{me.addEventListener("click",Me=>{var ke;Me.preventDefault();const Se=(ke=me.textContent)==null?void 0:ke.substring(1);Se&&C("tagClick",Se)})}),d.enableGithubCard){const me=(he=S.value)==null?void 0:he.querySelectorAll(".github-card");me==null||me.forEach(Me=>{const Se=Me.getAttribute("data-owner"),ke=Me.getAttribute("data-repo"),De=Me.id;Se&&ke&&De&&x(Se,ke,De)})}}})}catch(O){console.error("Error rendering markdown:",O),S.value.innerHTML=""}};return ot(()=>d.content,async g=>{await A(g)},{immediate:!0}),Bt(()=>{A(d.content),window.APlayer&&window.MetingJSElement?console.log("MetingJS is ready"):console.error("MetingJS or APlayer is not loaded properly"),v()}),bi(()=>{u&&(u.detach(),u=null)}),ot(()=>p&&p.value,()=>{v(),A(d.content)}),(g,O)=>(fe(),ve("div",{ref_key:"previewElement",ref:S,class:"markdown-preview"},null,512))}}),Pc={class:"min-h-screen flex flex-col"},Rc={key:0,class:"text-center text-gray-500 py-8"},Hc={class:"flex-grow mx-auto w-full sm:max-w-2xl px-2"},Ic={key:0,class:"flex justify-between items-center mb-4 p-4 rounded-lg"},Nc={class:"text-gray-400"},jc={class:"my-4"},Bc={key:0,class:"text-center text-gray-500 py-8"},zc={class:"flex justify-between items-center"},Fc={class:"flex justify-start items-center h-auto overflow-x-auto whitespace-nowrap hide-scrollbar"},Uc={class:"flex justify-start text-sm"},Vc={class:"text-orange-500"},$c={class:"text-orange-500"},qc={class:"message-actions flex justify-end items-center space-x-2 flex-shrink-0 px-3 py-1.5 mr-[9px] -mb-[1px]"},Wc={key:0,class:"w-5 h-5 flex-shrink-0 transition-transform duration-200 hover:scale-110"},Yc=["onClick"],Kc=["onClick"],Gc=["onClick"],Zc=["onClick"],Xc=["onClick"],Jc={class:"border-l-2 border-gray-300 p-4 ml-1"},Qc=["data-msg-id"],eu=["src","fetchpriority"],tu={key:1,class:"border-t border-gray-600 my-4"},nu={key:2,class:"text-center mt-2 relative",style:{"z-index":"9999"}},iu=["onClick"],ru={class:"mt-4"},au=["id"],ou={key:1,class:"flex justify-center items-center space-x-4 w-full my-4 flex-wrap md:flex-nowrap"},su={class:"flex justify-center items-center space-x-4 w-full md:w-auto"},lu={key:2,class:"ml-2 text-orange-400"},cu={class:"flex items-center justify-center space-x-2 w-full md:w-auto mt-3 md:mt-0"},uu={class:"text-gray-500 text-shadow-sm text-sm"},du={key:2,class:"text-center text-gray-500 mt-4"},fu={key:1,class:"text-center text-xs text-gray-400 py-4"},hu=["innerHTML"],pu={class:"flex justify-between items-center"},mu={class:"flex flex-col space-y-4"},gu={class:"border-t border-gray-200 my-2 pt-2"},vu={class:"p-4 rounded-lg overflow-auto max-h-[300px] bg-[rgba(36,43,50,0.95)]"},bu={class:"text-white"},yu={class:"flex justify-end space-x-2"},wu=Ct({__name:"MessageList",props:{siteConfig:{type:Object,required:!0},targetMessageId:{type:String,default:null}},setup(T,{expose:n}){const o=zn("contentTheme",ie(typeof window<"u"&&localStorage.getItem("contentTheme")||"dark")),s=ze(()=>o.value==="dark"?"bg-[rgba(36,43,50,0.95)] text-white":"bg-white text-black"),c=ze(()=>o.value==="dark"?"text-white":"text-black"),f=ze(()=>o.value==="dark"?"from-[rgba(36,43,50,1)] via-[rgba(36,43,50,0.8)] to-transparent":"from-[rgba(255,255,255,1)] via-[rgba(255,255,255,0.8)] to-transparent"),m=ie(""),h=ze(()=>Math.ceil(u.total/15)),y=async()=>{const V=parseInt(m.value);if(!V||V<1||V>h.value||u.loading){Ne().add({title:"页码无效",description:`请输入 1-${h.value} 之间的数字`,color:"orange",timeout:2e3});return}try{const N=await u.getMessages({page:V,pageSize:15});if(!N)throw new Error("跳转页面失败");u.messages=N.items,window.scrollTo({top:0,behavior:"instant"}),m.value=""}catch(N){console.error("跳转页面失败:",N),Ne().add({title:"跳转失败",color:"red",timeout:2e3})}},C=T;ot(()=>C.targetMessageId,async V=>{if(!V)return;await nt();const N=document.querySelector(`.content-container[data-msg-id="${V}"]`);N&&(N.scrollIntoView({behavior:"smooth",block:"center"}),N.classList.add("highlight-message"),setTimeout(()=>{N.classList.remove("highlight-message")},2e3))},{immediate:!0});const S=an().public.baseApi;Ua();const u=Fa(),d=ie(null),p=ja(),v=ze(()=>p.isLogin),E=async V=>{try{const N=encodeURIComponent(V.trim()),q=await fetch(`${S}/messages/tags/${N}`,{credentials:"include",headers:{Accept:"application/json"}});if(!q.ok)throw new Error(`HTTP error! status: ${q.status}`);const U=await q.json();if(U.code===1&&Array.isArray(U.data))ce.value=!0,j.value=U.data,await nt(),R(),M();else throw new Error(U.msg||"获取标签内容失败")}catch(N){console.error("获取标签消息失败:",N),Ne().add({title:"获取标签消息失败",description:N.message||"服务器错误，请稍后重试",color:"red",timeout:3e3})}},b=async()=>{j.value=[],ce.value=!1,await u.getMessages({page:1,pageSize:15}),await nt(),R(),M()},k=async V=>{if(confirm("确定要删除这条消息吗？"))try{await u.deleteMessage(V),u.messages=u.messages.filter(q=>q.id!==V),Ne().add({title:"删除成功",color:"green",timeout:2e3})}catch(q){console.error("删除失败:",q),Ne().add({title:"删除失败",color:"red",timeout:2e3})}},M=()=>{if(window.Fancybox){window.Fancybox.destroy();const V={Carousel:{infinite:!1},Toolbar:{display:[{id:"prev",position:"center"},{id:"counter",position:"center"},{id:"next",position:"center"},"zoom","slideshow","fullscreen","close"]},Image:{zoom:!0,click:!0,wheel:"slide"}};document.querySelectorAll(".markdown-preview img").forEach(q=>{const U=q.getAttribute("src")||"",F=/^https?:\/\//i.test(U),ye=q.parentElement;if(ye&&ye.tagName==="A"&&ye.hasAttribute("data-fancybox")){F||ye.replaceWith(q);return}if(F){const Q=document.createElement("a");Q.href=U,Q.setAttribute("data-fancybox","uploaded-image"),Q.style.display="block",q.parentNode.insertBefore(Q,q),Q.appendChild(q)}else ye&&ye.tagName==="A"&&ye.hasAttribute("data-fancybox")&&ye.replaceWith(q)}),window.Fancybox.bind("[data-fancybox]",V)}},x=async V=>{d.value===V?d.value=null:(d.value=V,await nt(),window.Waline?document.querySelector(`#waline-${V}`)?window.Waline.init({el:`#waline-${V}`,serverURL:C.siteConfig.walineServerURL,path:"messages/${msgId}",reaction:!1,meta:["nick","mail","link"],requiredMeta:["mail","nick"],pageview:!0,search:!1,wordLimit:200,pageSize:5,avatar:"monsterid",emoji:["https://unpkg.com/@waline/emojis@1.2.0/tieba"],imageUploader:!1,copyright:!1,dark:'html[class="dark"]'}):console.error(`评论容器 #waline-${V} 未找到`):console.error("Waline 未加载"))},A=V=>{const N=new Date(V),U=new Date().getTime()-N.getTime(),F=Math.floor(U/(1e3*60*60*24)),ye=Math.floor(U/(1e3*60*60)),Q=Math.floor(U/(1e3*60));return Math.floor(U/1e3)<60?"刚刚":Q<60?`${Q}分钟前`:ye<24?`${ye}小时前`:F<3?`${F}天前`:N.toLocaleString()},g=ie({}),O=ie({}),I=V=>{g.value[V]=!g.value[V]},R=()=>{nt(()=>{(ce.value?j.value:u.messages).forEach(N=>{const q=document.querySelector(`.content-container[data-msg-id="${N.id}"] .overflow-y-hidden`);q&&q.scrollHeight>700&&(O.value[N.id]=!0,g.value[N.id]===void 0&&(g.value[N.id]=!1))})})};ot(()=>u.messages,()=>{P.hash.includes("/messages/")||nt(()=>{requestAnimationFrame(()=>{R(),M()})})},{deep:!0});const P=rl();Bt(async()=>{try{const V=P.hash.split("/messages/").pop();if(!window.Waline){const N=document.createElement("link");N.rel="stylesheet",N.href="https://unpkg.com/@waline/client@v2/dist/waline.css",document.head.appendChild(N),await new Promise((q,U)=>{const F=document.createElement("script");F.src="https://unpkg.com/@waline/client@v2/dist/waline.js",F.crossOrigin="anonymous",F.onload=q,F.onerror=U,document.head.appendChild(F)})}if(V){const N=await fetch(`${S}/messages/${V}`,{credentials:"include",headers:{Accept:"application/json"}});if(!N.ok)throw new Error("消息加载失败");const q=await N.json();if(q.code===1&&q.data){u.messages=[q.data],u.hasMore=!1,u.page=1,await nt();const U=document.querySelector(`.content-container[data-msg-id="${V}"]`);U&&U.scrollIntoView({behavior:"instant",block:"start"})}else throw new Error("消息不存在")}else P.hash.includes("/messages/")||await u.getMessages({page:1,pageSize:15});await nt(),R(),M()}catch(V){console.error("初始化失败:",V),V instanceof Error&&Ne().add({title:"加载失败",description:V.message||"请刷新重试",color:"red",timeout:2e3})}}),ot(()=>P.hash,async V=>{const N=V.split("/messages/").pop();if(!N){P.hash.includes("/messages/")||await u.getMessages({page:1,pageSize:15});return}try{const q=await fetch(`${S}/messages/${N}`,{credentials:"include",headers:{Accept:"application/json"}});if(!q.ok)throw new Error("消息加载失败");const U=await q.json();if(U.code===1&&U.data){u.messages=[U.data],u.hasMore=!1,u.page=1,await nt();const F=document.querySelector(`.content-container[data-msg-id="${N}"]`);F&&F.scrollIntoView({behavior:"instant",block:"start"})}}catch(q){console.error("加载消息失败:",q),Ne().add({title:"加载失败",color:"red",timeout:2e3})}},{immediate:!0});const B=ie(!1),Y=async()=>{if(!(B.value||u.page<=1)){B.value=!0;try{const V=u.page-1,N=await u.getMessages({page:V,pageSize:15});N&&Array.isArray(N.items)?(u.messages=N.items,u.page=N.page||V):u.page=V,window.scrollTo({top:0,behavior:"instant"})}catch{Ne().add({title:"加载失败",color:"red",timeout:2e3})}finally{B.value=!1}}},G=async()=>{if(!(B.value||!u.hasMore)){B.value=!0;try{const V=u.page+1,N=await u.getMessages({page:V,pageSize:15});N&&Array.isArray(N.items)?(u.messages=N.items,u.page=N.page||V):u.page=V,window.scrollTo({top:0,behavior:"instant"})}catch{Ne().add({title:"加载失败",color:"red",timeout:2e3})}finally{B.value=!1}}};ot(()=>p.isLogin,V=>{V&&u.getMessages({page:1,pageSize:15})}),ot(()=>u.messages,async()=>{try{await nt(),R(),M()}catch(V){console.error("更新视图失败:",V)}},{deep:!0}),bi(()=>{window.Fancybox&&window.Fancybox.destroy()});const re=async V=>{try{await navigator.clipboard.writeText(V),Ne().add({title:"复制成功",color:"green",timeout:2e3})}catch(N){console.error("复制失败:",N),Ne().add({title:"复制失败",color:"red",timeout:2e3})}},he=ie(!1),me=ie(""),Me=ie(null),Se=ie(!1),ke=V=>{if(Me.value=V.id,me.value=V.content,V.image_url){const N=`

<!-- 附件图片(编辑时可删除) -->
![附件图片](${S}${V.image_url})
<!-- 附件图片结束 -->`;me.value+=N}he.value=!0},De=async()=>{if(Me.value){Se.value=!0;try{const V=u.messages.find(F=>F.id===Me.value);if(!V)return;let N=me.value;if(N=N.replace(/\n*<!-- 附件图片\(编辑时可删除\) -->\n!\[附件图片\]\(.*?\)\n<!-- 附件图片结束 -->\n*/g,""),N===V.content){Ne().add({title:"内容未修改",description:"请修改内容后再保存",color:"orange",timeout:2e3}),Se.value=!1;return}const q=await fetch(`${S}/messages/${Me.value}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({content:N,image_url:V.image_url})});if(!q.ok)throw new Error(`HTTP error! status: ${q.status}`);const U=await q.json();if(U.code===1){const F=u.messages.findIndex(ye=>ye.id===Me.value);F!==-1&&(u.messages[F]={...u.messages[F],content:me.value,image_url:V.image_url}),he.value=!1,Ne().add({title:"更新成功",color:"green",timeout:2e3})}else throw new Error(U.msg||"保存失败")}catch(V){console.error("更新消息失败:",V),Ne().add({title:"更新失败",color:"red",timeout:2e3})}finally{Se.value=!1}}},we=async V=>{var N,q;try{const U=document.querySelector(`.content-container[data-msg-id="${V}"]`);if(!U)return;const F=(q=(N=U.querySelector(".markdown-preview"))==null?void 0:N.textContent)==null?void 0:q.trim(),ye=U.querySelector("img"),Q=U.querySelector("video"),Fe=U.querySelector("audio");if(!F&&!ye&&Q||!F&&!ye&&Fe){Ne().add({title:"此内容不可生成卡片",color:"orange",timeout:2e3});return}const se=setTimeout(()=>{Ne().add({title:"生成超时",description:"卡片生成时间过长，请稍后重试",color:"red",timeout:3e3})},1e4),Ue=g.value[V];g.value[V]=!0,await nt();const ue=document.createElement("div");ue.style.cssText=`
  padding: 16px;
  background: transparent;
  border-radius: 12px;
  width: ${ye?"640px":"480px"};
  position: absolute;
  left: -9999px;
  top: 0;
  z-index: -1;
  overflow: visible;
  min-height: fit-content;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
  border: none;
`,document.body.appendChild(ue);const Oe=U.cloneNode(!0),Xe=window.getComputedStyle(U),it=Xe.backgroundColor&&Xe.backgroundColor!=="rgba(0, 0, 0, 0)"?Xe.backgroundColor:"#ffffff",ln=Xe.color||"#333";Oe.querySelectorAll(".text-center.mt-2, .bg-gradient-to-t").forEach(rt=>rt.remove()),Oe.style.cssText=`
      max-height: none;
      overflow: visible;
      padding: 0;
      margin: 0;
      background: ${it};
      border-radius: 12px;
    `;const Ot=Oe.querySelector(".overflow-y-hidden");Ot&&(Ot.className="",Ot.style.cssText=`
        overflow: visible;
        max-height: none !important;
        height: auto !important;
        padding: 12px;
        line-height: 1.6;
        margin-bottom: 0;
        white-space: pre-wrap;
        background: ${it};
        border-radius: 12px;
        font-size: 14px;
        color: ${ln};
      `),Oe.querySelectorAll("video, audio, iframe").forEach(rt=>{var yt;const Ve=document.createElement("div");Ve.style.cssText=`
        padding: 15px;
        background: rgba(251, 146, 60, 0.1);
        border: 1px solid rgba(251, 146, 60, 0.3);
        border-radius: 8px;
        color: #fb923c;
        margin: 15px 0;
        word-break: break-all;
      `,rt instanceof HTMLVideoElement?Ve.innerHTML=`🎬 视频链接：${rt.src||"未知链接"}`:rt instanceof HTMLAudioElement?Ve.innerHTML=`🎵 音频链接：${rt.src||"未知链接"}`:rt instanceof HTMLIFrameElement&&(Ve.innerHTML=`🔗 嵌入内容链接：${rt.src||"未知链接"}`),(yt=rt.parentNode)==null||yt.replaceChild(Ve,rt)}),await(async()=>{const rt=Oe.querySelectorAll("img");await Promise.all(Array.from(rt).map(async Ve=>new Promise(yt=>{const cn=Ve.src;Ve.crossOrigin="anonymous",cn.startsWith("/")?(Ve.src=`${S}${cn}`,fetch(Ve.src,{credentials:"include"}).then(wt=>wt.blob()).then(wt=>{Ve.src=URL.createObjectURL(wt),yt()}).catch(()=>{var wt;console.error("图片加载失败:",cn),(wt=Ve.parentElement)==null||wt.removeChild(Ve),yt()})):Ve.complete?yt():(Ve.onload=()=>yt(),Ve.onerror=()=>{var wt;console.error("图片加载失败:",cn),(wt=Ve.parentElement)==null||wt.removeChild(Ve),yt()})})))})(),ue.appendChild(Oe);const Pt=document.createElement("div");Pt.style.cssText=`
    margin-top: 12px;
    padding-top: 12px;
    text-align: center;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background: transparent;
  `,Pt.innerHTML=`
    <div style="color: #fb923c; font-size: 13px; margin-bottom: 4px; font-weight: 500;">
      ${C.siteConfig.cardFooterTitle}
    </div>
    <a href="https://note.noisework.cn" 
       target="_blank" 
       rel="noopener noreferrer" 
       style="color: rgba(255,255,255,0.5); text-decoration: none;">
      ${C.siteConfig.cardFooterSubtitle}
    </a>
  `,ue.appendChild(Pt),await nt();const Ie=await html2canvas(ue,{backgroundColor:null,scale:2,useCORS:!0,allowTaint:!0,logging:!1,width:ue.offsetWidth,height:ue.scrollHeight,borderRadius:"16px",onclone:rt=>{const Ve=rt.querySelector(".content-container");Ve&&(Ve.style.cssText=`
            overflow: visible !important;
            max-height: none !important;
            height: auto !important;
            padding: 0;
            min-height: ${(Ot==null?void 0:Ot.scrollHeight)||0}px;
            background: ${it};
            border-radius: 12px;
          `)}});clearTimeout(se);const xn=document.createElement("a");xn.download=`message-${V}.png`,xn.href=Ie.toDataURL("image/png"),xn.click(),document.body.removeChild(ue),g.value[V]=Ue,Ne().add({title:"下载成功",color:"green",timeout:2e3})}catch(U){console.error("下载失败:",U),Ne().add({title:"下载失败",color:"red",timeout:2e3})}},ce=ie(!1),j=ie([]),ne=async V=>{var N;try{const q=ce.value?null:window.scrollY;if(console.debug("API返回的原始数据:",V),!V)throw new Error("API返回数据为空");let U=[],F=0;if(V.code===1?Array.isArray(V.data)?U=V.data:(N=V.data)!=null&&N.items&&(U=V.data.items):Array.isArray(V)&&(U=V),!Array.isArray(U))throw new Error("无效的数据格式");F=U.length,ce.value=!0,j.value=U,F===0?Ne().add({title:"未找到相关内容",color:"orange",timeout:2e3}):Ne().add({title:`找到 ${F} 条结果`,color:"green",timeout:2e3}),q!==null&&window.scrollTo({top:0,behavior:"smooth"}),await nt(),R(),M()}catch(q){console.error("处理搜索结果时出错:",q),Ne().add({title:"搜索失败",description:q.message||"处理搜索结果时发生错误",color:"red",timeout:2e3}),J()}},J=()=>{j.value=[],ce.value=!1,console.log("重置搜索 - searchResults:",j.value),console.log("重置搜索 - isSearchMode:",ce.value),nt(()=>{R(),M()})},Ce=ze(()=>ce.value&&Array.isArray(j.value)?j.value:u.messages||[]);return n({handleSearchResult:ne}),ot(j,V=>{console.log("searchResults变化:",V),nt(()=>{R(),M()})},{deep:!0,immediate:!0}),ot(ce,V=>{console.log("isSearchMode变化:",V),nt(()=>{R(),M()})}),ze(()=>({cardFooterTitle:C.siteConfig.cardFooterTitle,cardFooterSubtitle:C.siteConfig.cardFooterSubtitle,pageFooterHTML:C.siteConfig.pageFooterHTML,walineServerURL:C.siteConfig.walineServerURL})),(V,N)=>{const q=yi,U=_t,F=hr,ye=ul,Q=fr,Fe=Ba;return fe(),ve(Lt,null,[$("div",Pc,[Ee(Ce).length?Le("",!0):(fe(),ve("div",Rc,[de(q,{name:"i-heroicons-inbox",class:"w-12 h-12 mx-auto mb-4"}),N[5]||(N[5]=$("p",null,"暂无消息内容",-1))])),$("div",Hc,[Ee(ce)?(fe(),ve("div",Ic,[$("p",Nc,"搜索结果 ("+Ze(Ee(j).length)+" 条)",1),de(U,{size:"sm",variant:"ghost",class:"text-gray-400 hover:text-orange-500",icon:"i-heroicons-arrow-left",onClick:b},{default:qe(()=>N[6]||(N[6]=[et(" 返回完整列表 ")])),_:1})])):Le("",!0),$("div",jc,[Ee(ce)&&Ee(j).length===0?(fe(),ve("div",Bc,[de(q,{name:"i-heroicons-magnifying-glass",class:"w-12 h-12 mx-auto mb-4"}),N[7]||(N[7]=$("p",null,"未找到相关内容",-1))])):Le("",!0),(fe(!0),ve(Lt,null,qt(Ee(Ce),se=>{var Ue;return fe(),ve("div",{key:se.id,class:"w-full h-auto overflow-hidden flex flex-col justify-between"},[$("div",zc,[$("div",Fc,[N[9]||(N[9]=$("div",{class:"w-2 h-2 rounded-full bg-orange-600 mr-2 flex-shrink-0"},null,-1)),$("div",Uc,[$("span",Vc,Ze(A(se.created_at)),1),N[8]||(N[8]=$("span",{class:"gradient-dot mx-2 flex-shrink-0"},"@",-1)),$("span",$c,Ze(se.username||"匿名用户"),1)])]),$("div",qc,[se.private?(fe(),ve("div",Wc,[de(q,{name:"i-mdi-lock-outline",class:"text-gray-400"})])):Le("",!0),Ee(v)?(fe(),ve("div",{key:1,class:"w-5 h-5 cursor-pointer flex-shrink-0 transition-all duration-200 hover:scale-110",onClick:ue=>ke(se),title:"编辑内容"},[de(q,{name:"i-mdi-pencil-outline",class:"text-gray-400 hover:text-orange-500"})],8,Yc)):Le("",!0),$("div",{class:"w-5 h-5 cursor-pointer flex-shrink-0 transition-all duration-200 hover:scale-110",onClick:ue=>re(se.content),title:"复制内容"},[de(q,{name:"i-mdi-content-copy",class:"text-gray-400 hover:text-orange-500"})],8,Kc),$("div",{class:"w-5 h-5 cursor-pointer flex-shrink-0 transition-all duration-200 hover:scale-110",onClick:ue=>we(se.id),title:"下载为图片"},[de(q,{name:"i-mdi-image-outline",class:"text-gray-400 hover:text-orange-500"})],8,Gc),$("div",{class:"w-5 h-5 cursor-pointer flex-shrink-0 transition-all duration-200 hover:scale-110",onClick:ue=>x(se.id),title:"评论"},[de(q,{name:"i-mdi-comment-outline",class:"text-gray-400 hover:text-orange-500"})],8,Zc),Ee(v)?(fe(),ve("div",{key:2,class:"w-5 h-5 cursor-pointer flex-shrink-0 transition-all duration-200 hover:scale-110",onClick:ue=>k(se.id),title:"删除"},[de(q,{name:"i-mdi-paper-roll-outline",class:"text-gray-400 hover:text-orange-500"})],8,Xc)):Le("",!0)])]),$("div",Jc,[se.image_url||se.content?(fe(),ve("div",{key:0,class:St(["content-container",Ee(s)]),"data-msg-id":se.id},[se.image_url?(fe(),ve("img",{key:0,src:`${Ee(S)}${se.image_url}`,alt:"Image",class:"max-w-full object-cover rounded-lg mb-4",loading:"lazy",fetchpriority:V.index<3?"high":"low"},null,8,eu)):Le("",!0),se.image_url&&se.content?(fe(),ve("div",tu)):Le("",!0),$("div",{class:St(["overflow-y-hidden relative",[{"max-h-[700px]":!Ee(g)[se.id]},Ee(c)]])},[de(Ha,{content:se.content,enableGithubCard:((Ue=T.siteConfig)==null?void 0:Ue.enableGithubCard)===!0,onTagClick:E,"link-target":"_blank"},null,8,["content","enableGithubCard"]),Ee(O)[se.id]&&!Ee(g)[se.id]?(fe(),ve("div",{key:0,class:St(["absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t",Ee(f)])},null,2)):Le("",!0)],2),Ee(O)[se.id]?(fe(),ve("div",nu,[$("button",{onClick:ue=>I(se.id),class:"flex items-center justify-center space-x-1 mx-auto px-4 py-2 text-orange-500 hover:text-orange-600 focus:outline-none transition-colors duration-200"},[$("span",null,Ze(Ee(g)[se.id]?"收起内容":"展开全文"),1),de(q,{name:Ee(g)[se.id]?"i-mdi-chevron-up":"i-mdi-chevron-down",class:"w-5 h-5"},null,8,["name"])],8,iu)])):Le("",!0)],10,Qc)):Le("",!0),al($("div",ru,[$("div",{id:`waline-${se.id}`},null,8,au)],512),[[ol,Ee(d)===se.id]])])])}),128))]),Ee(ce)?Le("",!0):(fe(),ve("div",ou,[$("div",su,[Ee(u).page>1?(fe(),zt(U,{key:0,color:"gray",variant:"outline",size:"xs",class:"rounded-full px-4 py-1.5 bg-[rgba(36,43,50,0.95)] text-white hover:text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 backdrop-blur-sm",onClick:Y,disabled:Ee(B)},{default:qe(()=>[de(q,{name:"i-heroicons-arrow-left",class:"mr-1 w-4 h-4"}),N[10]||(N[10]=et(" 上一页 "))]),_:1},8,["disabled"])):Le("",!0),Ee(u).hasMore?(fe(),zt(U,{key:1,color:"gray",variant:"outline",size:"xs",class:"rounded-full px-4 py-1.5 bg-[rgba(36,43,50,0.95)] text-white hover:text-white border-none shadow-lg hover:shadow-xl transition-all duration-300 backdrop-blur-sm",onClick:G,disabled:Ee(B)},{default:qe(()=>[N[11]||(N[11]=et(" 下一页 ")),de(q,{name:"i-heroicons-arrow-right",class:"ml-1 w-4 h-4"})]),_:1},8,["disabled"])):Le("",!0),Ee(B)?(fe(),ve("span",lu,"加载中...")):Le("",!0)]),$("div",cu,[$("span",uu,"第 "+Ze(Ee(u).page)+" 页",1),de(F,{modelValue:Ee(m),"onUpdate:modelValue":N[0]||(N[0]=se=>$i(m)?m.value=se:null),type:"number",min:"1",max:Ee(h),class:"w-12 text-center text-sm",placeholder:"#",onKeyup:Na(y,["enter"])},null,8,["modelValue","max"]),de(U,{size:"xs",color:"gray",variant:"ghost",class:"text-gray-400 hover:text-orange-500 text-sm",onClick:y},{default:qe(()=>N[12]||(N[12]=[et(" 跳转 ")])),_:1})])])),!Ee(ce)&&Ee(u).messages.length>0&&!Ee(u).hasMore?(fe(),ve("div",du,[de(q,{name:"i-fluent-emoji-flat-confetti-ball",size:"lg"}),N[13]||(N[13]=et(" 加载完毕~ "))])):Le("",!0)]),T.siteConfig.pageFooterHTML?(fe(),ve("div",{key:2,innerHTML:T.siteConfig.pageFooterHTML},null,8,hu)):(fe(),ve("div",fu,N[14]||(N[14]=[et(" 来自"),$("a",{href:"https://www.noisework.cn",target:"_blank",rel:"noopener noreferrer",class:"text-orange-400 hover:text-orange-500"},"Noise",-1),et(" 使用"),$("a",{href:"https://github.com/lin-snow/Ech0",target:"_blank",rel:"noopener noreferrer",class:"text-orange-400 hover:text-orange-500"},"Ech0",-1),et("发布 ")])))]),de(Fe,{modelValue:Ee(he),"onUpdate:modelValue":N[4]||(N[4]=se=>$i(he)?he.value=se:null),ui:{width:"sm:max-w-2xl"}},{default:qe(()=>[de(Q,null,{header:qe(()=>[$("div",pu,[N[15]||(N[15]=$("h3",{class:"text-lg font-medium"},"编辑内容",-1)),de(U,{color:"gray",variant:"ghost",icon:"i-mdi-close",class:"-my-1",onClick:N[1]||(N[1]=se=>he.value=!1)})])]),footer:qe(()=>[$("div",yu,[de(U,{color:"gray",variant:"outline",onClick:N[3]||(N[3]=se=>he.value=!1),class:"text-white"},{default:qe(()=>N[17]||(N[17]=[et(" 取消 ")])),_:1}),de(U,{color:"orange",onClick:De,loading:Ee(Se),class:"text-white"},{default:qe(()=>N[18]||(N[18]=[et(" 保存 ")])),_:1},8,["loading"])])]),default:qe(()=>{var se;return[$("div",mu,[de(ye,{modelValue:Ee(me),"onUpdate:modelValue":N[2]||(N[2]=Ue=>$i(me)?me.value=Ue:null),placeholder:"编辑内容...",rows:"10",class:"font-mono text-sm"},null,8,["modelValue"]),$("div",gu,[N[16]||(N[16]=$("div",{class:"text-sm text-gray-500 mb-2"},"预览：",-1)),$("div",vu,[$("div",bu,[de(Ha,{content:Ee(me),enableGithubCard:((se=T.siteConfig)==null?void 0:se.enableGithubCard)===!0},null,8,["content","enableGithubCard"])])])])])]}),_:1})]),_:1},8,["modelValue"])],64)}}}),Eu=Mn(wu,[["__scopeId","data-v-d95aa50d"]]),Su={class:"heatmap-header"},Cu={class:"heatmap-legend"},Tu={class:"legend-colors"},ku={class:"calendar-wrapper"},Mu={class:"month-labels"},xu={class:"weekday-labels"},_u={class:"heatmap-grid"},Lu=["title"],Au=Ct({__name:"heatmap",setup(T){const n=ie([]),o=ie([]),s=ie(null),c=ze(()=>{if(!n.value.length)return Array(12).fill("").map((k,M)=>`${M+1}月`);const d=n.value.map(k=>new Date(k.date)),p=new Date(Math.min(...d)),v=[];let E=new Date(p);E.setDate(1);let b=E.getFullYear();for(let k=0;k<12;k++){const M=E.getMonth(),x=E.getFullYear();x!==b||k===0?(v.push(`${x}年${M+1}月`),b=x):v.push(`${M+1}月`),E.setMonth(M+1)}return v}),f=["日","一","二","三","四","五","六"],m=d=>["#9be9a8","#40c463","#30a14e","#216e39","#0e4429"][Math.min(d-1,4)]||"#ebedf0",h=d=>d.count?m(d.level):"rgba(235, 237, 240, 0.4)",y=async()=>{try{const p=await(await fetch("/api/messages/calendar")).json();p&&p.code===1&&p.data&&p.data.length>0?(n.value=p.data,u()):C()}catch(d){console.error("获取热力图数据失败:",d),C()}},C=()=>{const d=new Date,p=new Date(d);p.setMonth(d.getMonth()-11),p.setDate(1);const v=[];let E=new Date(p);for(;E<=d;){const b=Math.random()>.7?Math.floor(Math.random()*10)+1:0;v.push({date:S(E),count:b}),E.setDate(E.getDate()+1)}n.value=v,u()},S=d=>{const p=d.getFullYear(),v=String(d.getMonth()+1).padStart(2,"0"),E=String(d.getDate()).padStart(2,"0");return`${p}-${v}-${E}`},u=()=>{if(!n.value.length)return;const d=n.value.map(x=>new Date(x.date)),p=new Date(Math.min(...d));new Date(Math.max(...d));const v=new Date(p);v.setDate(1);const E=new Date(v);E.setMonth(v.getMonth()+11),E.setDate(E.getDate()+(6-E.getDay()));const b=new Map;n.value.forEach(x=>{x&&x.date&&x.count!==void 0&&b.set(x.date,x.count)});const k=[];let M=new Date(v);for(M.setDate(M.getDate()-M.getDay());M<=E;){const x=[];for(let A=0;A<7;A++){const g=S(M),O=b.get(g)||0;x.push({date:g,count:O,level:O?Math.min(Math.ceil(O/2),5):0}),M.setDate(M.getDate()+1)}k.push(x)}o.value=k};return Bt(()=>{y()}),(d,p)=>{const v=fr;return fe(),zt(v,{class:"mx-auto sm:max-w-2xl hover:shadow-md backdrop-blur-sm bg-black/40 shadow-lg text-white"},{default:qe(()=>[$("div",Su,[p[2]||(p[2]=$("h3",null,"内容发布日历",-1)),$("div",Cu,[p[0]||(p[0]=$("span",null,"少",-1)),$("div",Tu,[(fe(),ve(Lt,null,qt(5,E=>$("div",{key:E,style:on({backgroundColor:m(E)})},null,4)),64))]),p[1]||(p[1]=$("span",null,"多",-1))])]),$("div",ku,[$("div",{class:"calendar-container",ref_key:"calendarContainer",ref:s},[$("div",Mu,[(fe(!0),ve(Lt,null,qt(c.value,(E,b)=>(fe(),ve("div",{class:"month-label",key:b},Ze(E),1))),128))]),$("div",xu,[(fe(),ve(Lt,null,qt(f,E=>$("div",{class:"weekday-label",key:E},Ze(E),1)),64))]),$("div",_u,[(fe(!0),ve(Lt,null,qt(o.value,(E,b)=>(fe(),ve("div",{key:b,class:"heatmap-week"},[(fe(!0),ve(Lt,null,qt(E,(k,M)=>(fe(),ve("div",{key:M,class:"heatmap-day",style:on({backgroundColor:h(k)}),title:`${k.date}: ${k.count||0} 条内容`},null,12,Lu))),128))]))),128))])],512)])]),_:1})}}}),Du=Mn(Au,[["__scopeId","data-v-4da783b8"]]),Ou={class:"tags-container mx-auto w-full sm:max-w-2xl"},Pu={class:"relative"},Ru={class:"tags-wrapper"},Hu={class:"tags-scroll"},Iu=["onClick"],Nu={class:"tag-count"},ju=Ct({__name:"TagList",props:{tags:{type:Array,default:()=>[]}},emits:["tagClick","updateTags"],setup(T,{emit:n}){const o=n,s=ie(!1),c=ie(Date.now()),f=T,m=ze(()=>{const C=/[/?=&]/,S=/^(song|video|playlist)\?id=\d+$/,u=new Map;return f.tags.reduce((d,p)=>(u.has(p.name)||!C.test(p.name)&&!S.test(p.name)&&(u.set(p.name,!0),d.push(p)),d),[])},{}),h=C=>{o("tagClick",C)},y=async()=>{s.value||(s.value=!0,c.value=Date.now(),o("updateTags"),setTimeout(()=>{s.value=!1},1e3))};return(C,S)=>{const u=yi;return fe(),ve("div",Ou,[$("div",Pu,[$("div",Ru,[$("div",Hu,[(fe(!0),ve(Lt,null,qt(m.value,d=>(fe(),ve("span",{key:d.name+c.value,class:"tag-item",onClick:p=>h(d.name)},[et(" #"+Ze(d.name)+" ",1),$("span",Nu,"("+Ze(d.count)+")",1)],8,Iu))),128))])]),$("div",{class:"absolute -right-1 top-1/2 -translate-y-1/2 p-2 cursor-pointer transition-all duration-200 hover:scale-110 z-10",onClick:y,title:"刷新标签"},[de(u,{name:"i-mdi-refresh",class:St(["w-5 h-5 text-gray-400 hover:text-orange-500",{"animate-spin":s.value}])},null,8,["class"])]),S[0]||(S[0]=$("div",{class:"scroll-fade"},null,-1))])])}}}),Bu=Mn(ju,[["__scopeId","data-v-a469a53f"]]),zu=window.setInterval,Fu={key:0,class:"loading"},Uu={class:"moments-header"},Vu={class:"header-title"},$u={class:"profile-info"},qu=["src","alt"],Wu={class:"profile-text"},Yu={class:"title"},Ku={class:"description"},Gu={key:0,class:"mx-auto sm:max-w-2xl mb-4"},ed=Ct({__name:"index",setup(T){const n=ie(null),o=O=>{console.log("接收到搜索结果:",O),n.value&&n.value.handleSearchResult(O)},s=ie(!1),c=ie(typeof window<"u"&&localStorage.getItem("contentTheme")||"dark");fi("showHeatmap",s),fi("contentTheme",c),fi("toggleContentTheme",()=>{c.value=c.value==="dark"?"light":"dark",typeof window<"u"&&localStorage.setItem("contentTheme",c.value)}),ot(s,O=>{console.log("index.vue 中热力图状态变化:",O)}),ia({meta:[{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}]});const f=ie({siteTitle:"",subtitleText:"",avatarURL:"",username:"",description:"",backgrounds:[],cardFooterTitle:"",cardFooterSubtitle:"",pageFooterHTML:"",rssTitle:"",rssDescription:"",rssAuthorName:"",rssFaviconURL:"",enableGithubCard:!1,pwaEnabled:!0,pwaTitle:"",pwaDescription:"",pwaIconURL:""}),m=ze(()=>({"--bg-image":`url(${S.value||f.value.backgrounds[0]})`})),h=ze(()=>({"background-image":`url(${S.value||f.value.backgrounds[0]})`,"background-size":"cover","background-position":"center"})),y={siteTitle:"Noise的说说笔记",subtitleText:"欢迎访问，点击头像可更换封面背景！",avatarURL:"https://s2.loli.net/2025/03/24/HnSXKvibAQlosIW.png",username:"Noise",description:"执迷不悟",backgrounds:["https://s2.loli.net/2025/03/27/KJ1trnU2ksbFEYM.jpg","https://s2.loli.net/2025/03/27/MZqaLczCvwjSmW7.jpg","https://s2.loli.net/2025/03/27/UMijKXwJ9yTqSeE.jpg","https://s2.loli.net/2025/03/27/WJQIlkXvBg2afcR.jpg","https://s2.loli.net/2025/03/27/oHNQtf4spkq2iln.jpg","https://s2.loli.net/2025/03/27/PMRuX5loc6Uaimw.jpg","https://s2.loli.net/2025/03/27/U2WIslbNyTLt4rD.jpg","https://s2.loli.net/2025/03/27/xu1jZL5Og4pqT9d.jpg","https://s2.loli.net/2025/03/27/OXqwzZ6v3PVIns9.jpg","https://s2.loli.net/2025/03/27/HGuqlE6apgNywbh.jpg","https://s2.loli.net/2025/03/26/d7iyuPYA8cRqD1K.jpg","https://s2.loli.net/2025/03/27/wYy12qDMH6bGJOI.jpg","https://s2.loli.net/2025/03/27/y67m2k5xcSdTsHN.jpg"],cardFooterTitle:"Noise·说说·笔记~",cardFooterSubtitle:"note.noisework.cn",pageFooterHTML:'<div class="text-center text-xs text-gray-400 py-4">来自<a href="https://www.noisework.cn" target="_blank" rel="noopener noreferrer" class="text-orange-400 hover:text-orange-500">Noise</a> 使用<a href="https://github.com/lin-snow/Ech0" target="_blank" rel="noopener noreferrer" class="text-orange-400 hover:text-orange-500">Ech0</a>发布</div>',rssTitle:"Noise的说说笔记",rssDescription:"一个说说笔记~",rssAuthorName:"Noise",rssFaviconURL:"/favicon.ico",enableGithubCard:!1,pwaEnabled:!0,pwaTitle:"",pwaDescription:"",pwaIconURL:"",walineServerURL:"https://s9cewscb.lc-cn-n1-shared.com"},C=async()=>{var O,I;try{f.value={...y};const R=await fetch("/api/frontend/config",{credentials:"include",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!R.ok)throw new Error("Network response was not ok");const P=await R.json();if(console.log("获取到的配置数据:",P),(O=P==null?void 0:P.data)!=null&&O.frontendSettings){const B=P.data.frontendSettings,Y=["enableGithubCard","pwaEnabled"];Object.keys(f.value).forEach(G=>{if(B[G]!==null&&B[G]!==void 0)if(G==="backgrounds"&&Array.isArray(B[G]))f.value.backgrounds=[...B[G]];else if(Y.includes(G)){const re=B[G];f.value[G]=re===!0||re==="true"}else{const re=B[G];f.value[G]=typeof re=="string"?re.trim():re}})}if((I=f.value.backgrounds)!=null&&I.length||(f.value.backgrounds=[...y.backgrounds]),f.value.backgrounds.length>0){const B=Math.floor(Math.random()*f.value.backgrounds.length);S.value=f.value.backgrounds[B]}u.value=!0}catch(R){console.error("获取配置失败:",R),f.value={...y},u.value=!0}},S=ie(""),u=ie(!1),d=ie(!1),p=async O=>{const I=R=>new Promise(P=>{const B=new Image;B.src=R,B.onload=()=>P(R),B.onerror=()=>P(null)});await Promise.all(O.map(R=>I(R)))};Bt(()=>{window.addEventListener("frontend-config-updated",async O=>{var I;if(await C(),((I=f.value.backgrounds)==null?void 0:I.length)>0){const R=Math.floor(Math.random()*f.value.backgrounds.length),P=f.value.backgrounds[R];S.value=P}})}),di(()=>{window.removeEventListener("frontend-config-updated",C)});const v=async()=>{if(d.value)return;d.value=!0;const O=Math.floor(Math.random()*f.value.backgrounds.length),I=f.value.backgrounds[O];if(I===S.value){d.value=!1;return}const R=`${I}?imageView2/2/w/10/blur/1/q/10`;S.value=R,requestAnimationFrame(()=>{const P=new Image;P.src=I,P.onload=()=>{requestAnimationFrame(()=>{S.value=I,d.value=!1})},P.onerror=()=>{d.value=!1}})},E=()=>{const O=(f.value.pwaTitle||f.value.siteTitle||"说说笔记").trim(),I="/favicon.ico",R=(f.value.pwaDescription||f.value.description||"").trim();ia({title:O,meta:[{name:"description",content:R},{name:"theme-color",content:"#000000"}],link:[{rel:"icon",href:I},...f.value.pwaEnabled?[{rel:"manifest",href:"/site.webmanifest"}]:[]]})};ot(()=>[f.value.pwaEnabled,f.value.pwaTitle,f.value.pwaIconURL,f.value.pwaDescription,f.value.siteTitle,f.value.rssFaviconURL,f.value.description],()=>{E()},{immediate:!0});const b=ie(null),k=ie([]),M=async()=>{await x()},x=async()=>{try{const I=await(await fetch(`${an().public.baseApi}/messages/tags`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}})).json();I.code===1&&(k.value=I.data||[])}catch(O){console.error("获取标签失败:",O),k.value=[]}};Bt(()=>{const O=()=>C();window.addEventListener("frontend-config-updated",O),C(),di(()=>window.removeEventListener("frontend-config-updated",O))});const A=async O=>{try{const I=encodeURIComponent(O.trim()),R=await fetch(`${an().public.baseApi}/messages/tags/${I}`,{credentials:"include",headers:{Accept:"application/json"}});if(!R.ok)throw new Error(`HTTP error! status: ${R.status}`);const P=await R.json();if(P.code===1&&Array.isArray(P.data))n.value&&n.value.handleSearchResult(P.data);else throw new Error(P.msg||"获取标签内容失败")}catch(I){console.error("获取标签消息失败:",I),Ne().add({title:"获取标签消息失败",description:I.message||"服务器错误，请稍后重试",color:"red",timeout:3e3})}},g=()=>{if(!b.value)return;let O=0,I=!1,R=!1;return zu(()=>{R||(I?(O--,b.value.textContent=f.value.subtitleText.slice(0,O),O<=0&&(R=!0,b.value.textContent="",setTimeout(()=>{I=!1,R=!1,O=0},1e3))):(b.value.textContent=f.value.subtitleText.slice(0,O+1),O++,O>=f.value.subtitleText.length&&(R=!0,setTimeout(()=>{I=!0,R=!1},2e3))))},100)};return Bt(async()=>{try{if(u.value=!1,window.requestIdleCallback=window.requestIdleCallback||(I=>setTimeout(I,1)),await C(),ra(async()=>{await x(),await p(f.value.backgrounds)}),f.value.backgrounds.length>0){const I=f.value.backgrounds[Math.floor(Math.random()*f.value.backgrounds.length)],R=`${I}?imageView2/2/w/100/q/30`;S.value=R,ra(async()=>{await p(f.value.backgrounds)});const P=new Image;P.src=I,P.onload=()=>{requestAnimationFrame(()=>{S.value=I,u.value=!0})}}const O=g();di(()=>{O&&clearInterval(O)}),window.addEventListener("frontend-config-updated",async I=>{var R;if(await C(),((R=f.value.backgrounds)==null?void 0:R.length)>0){const P=Math.floor(Math.random()*f.value.backgrounds.length),B=f.value.backgrounds[P];S.value=B}})}catch(O){console.error("初始化失败:",O),u.value=!0}}),(O,I)=>{const R=sl;return fe(),ve("div",{class:"background-container",style:on(m.value)},[u.value?Le("",!0):(fe(),ve("div",Fu,I[1]||(I[1]=[$("div",{class:"rainbow-spinner"},null,-1),$("div",{class:"loading-text"},"加载中...",-1)]))),$("div",{class:St(["content-wrapper",{"gpu-accelerated":!0}])},[de(R,{class:"container-fixed py-2 pb-4 my-4"},{default:qe(()=>[$("div",Uu,[$("div",{class:"header-image",style:on(h.value)},[$("h1",Vu,Ze(f.value.siteTitle),1),$("div",{ref_key:"subtitleEl",ref:b,class:"header-subtitle"},Ze(f.value.subtitleText),513),$("div",$u,[$("img",{class:"avatar",onClick:v,src:f.value.avatarURL,alt:f.value.username},null,8,qu),$("div",Wu,[$("div",Yu,Ze(f.value.username),1),$("div",Ku,Ze(f.value.description),1)])])],4)]),s.value?(fe(),ve("div",Gu,[de(Du)])):Le("",!0),de(Oc,{onSearchResult:o}),k.value&&k.value.length>0?(fe(),zt(Bu,{key:1,tags:k.value,onTagClick:A,onUpdateTags:M},null,8,["tags"])):Le("",!0),de(Eu,{ref_key:"messageList",ref:n,class:"message-list-container","site-config":f.value,"target-message-id":O.targetMessageId},null,8,["site-config","target-message-id"])]),_:1}),de(dl),de(so,{modelValue:O.showSearchModal,"onUpdate:modelValue":I[0]||(I[0]=P=>O.showSearchModal=P),onSearchResult:o},null,8,["modelValue"])])],4)}}});export{ed as default};
